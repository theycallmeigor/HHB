{%- comment -%}
  Updated: 05/07/2025
  This file is system-generated and should not be modified. We reserve the right to overwrite it at any moment to add improvements or new features so that customizations you made might be lost
{%- endcomment -%}
{% assign zp_template_suffix = template.suffix %}{% if zp_template_suffix contains 'zipifypages' %}{% assign zp_init_split_test_object = false %}{% assign zp_alternative_entity_title = nil %}{% assign zp_entity_marker = template.name %}{% if zp_entity_marker == 'article' %}{% assign zp_current_entity = article %}{% elsif zp_entity_marker == 'blog' %}{% assign zp_current_entity = blog %}{% elsif zp_entity_marker == 'page' %}{% assign zp_current_entity = page %}{% assign zp_init_split_test_object = true %}{% elsif zp_entity_marker == 'product' %}{% assign zp_current_entity = product %}{% else %}{% assign zp_current_entity = nil %}{% endif %}{% if zp_current_entity != blank %}{% assign zp_current_entity_metafields = zp_current_entity.metafields['zipifypages'] %}{% if zp_current_entity_metafields['splittest'] != blank and zp_current_entity_metafields['splittest'].type == 'json' %}{% assign zp_split_test_data = zp_current_entity_metafields['splittest'].value %}{% assign zp_split_test_type = zp_split_test_data.type %}{% assign zp_split_test_view_type = zp_split_test_data.view_type %}{% assign zp_alternative_entity_loaded = false %}{% assign zp_split_test_type_check_entities = 'article,blog,page' | split: ',' %}{% assign zp_alternative_entity_handle = '' | append: zp_split_test_data.alternative_handle %}{% if zp_split_test_type == 'mainlayout' and zp_split_test_type_check_entities contains zp_entity_marker and zp_alternative_entity_handle.size > 0 %}{% assign zp_alternative_entity_loaded = true %}{% if zp_entity_marker == 'article' %}{% assign zp_alternative_entity = articles[zp_alternative_entity_handle] %}{% elsif zp_entity_marker == 'blog' %}{% assign zp_alternative_entity = blogs[zp_alternative_entity_handle] %}{% elsif zp_entity_marker == 'page' %}{% assign zp_alternative_entity = pages[zp_alternative_entity_handle] %}{% else %}{% assign zp_alternative_entity = nil %}{% endif %}{% assign zp_alternative_entity_title = zp_alternative_entity.title %}{% if zp_alternative_entity.template_suffix contains 'zipifypages-' %}{% assign zp_split_test_type = 'viewtyperedirect' %}{% assign zp_split_test_view_type = zp_alternative_entity.template_suffix %}{% endif %}{% endif %}{% if zp_split_test_type == 'redirect' or zp_split_test_type == 'viewtyperedirect' %}{% assign zp_split_test_type_check_entities = 'article,blog,page' | split: ',' %}{% if zp_split_test_type_check_entities contains zp_entity_marker and zp_alternative_entity_loaded == false %}{% if zp_entity_marker == 'article' %}{% assign zp_alternative_entity = articles[zp_alternative_entity_handle] %}{% elsif zp_entity_marker == 'blog' %}{% assign zp_alternative_entity = blogs[zp_alternative_entity_handle] %}{% elsif zp_entity_marker == 'page' %}{% assign zp_alternative_entity = pages[zp_alternative_entity_handle] %}{% else %}{% assign zp_alternative_entity = nil %}{% endif %}{% assign zp_alternative_entity_title = zp_alternative_entity.title %}{% endif %}{% assign zp_split_dataset = zp_split_test_data.dataset | json %}{% assign zp_split_dataset = '' | append: zp_split_dataset %}{% assign zp_split_data_string = '{' %}{% assign zp_replacement_value = zp_entity_marker | json %}{% assign zp_split_data_string = zp_split_data_string | append: 'entityMarker:' | append: zp_replacement_value %}{% assign zp_split_token = zp_split_test_data.token %}{% assign zp_replacement_value = zp_split_test_data.token | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',testToken:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_split_test_type | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',testType:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_current_entity.handle | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',handles:{main:' | append: zp_replacement_value %}{% assign zp_view_type_url_param_name = 'view' %}{% if zp_split_test_type == 'viewtyperedirect' %}{% assign zp_replacement_value = zp_current_entity.handle | append: '?' | append: zp_view_type_url_param_name | append: '=' | append: zp_split_test_view_type | json %}{% else %}{% assign zp_replacement_value = zp_alternative_entity_handle | json %}{% endif %}{% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_split_dataset | json %}{% assign zp_split_data_string = zp_split_data_string | append: '},dataSet:' | append: zp_replacement_value %}{% if zp_split_test_type == 'viewtyperedirect' %}{% assign zp_replacement_value = zp_split_test_view_type | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',viewType:' | append: zp_replacement_value %}{% endif %}{% assign zp_replacement_value = '' | append: zp_current_entity.title | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',titles:{main:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_alternative_entity_title | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_current_entity.handle | json %}{% assign zp_split_data_string = zp_split_data_string | append: '},analyticsHandles:{main:' | append: zp_replacement_value %}{% assign zp_replacement_value = zp_alternative_entity_handle | json %}{% assign zp_split_data_string = zp_split_data_string | append: ',alternative:' | append: zp_replacement_value %}{% assign zp_replacement_value = routes.root_url | json %}{% assign zp_split_data_string = zp_split_data_string | append: '},locale:{root:' | append: zp_replacement_value | append: '},initSplitTestObject:' | append: zp_init_split_test_object | append: '}' %}{% assign zp_replacement_value = nil %}{% assign zp_split_dataset = nil %}<script>!function(t){if(!window.ZipifyPagesSplitTestScriptRedirectLoaded){window.ZipifyPagesSplitTestScriptRedirectLoaded=!0,d.prototype.selectVariation=function(){if(!this.data)return this.defaultVariation;try{var t,e=[],i=null;for(t in this.data)this.data.hasOwnProperty(t)&&(i=parseFloat(this.data[t]),isNaN(i)||e.push([i,t]));if(e.length>1){var n,r,a,s=0,o=null;for(t=0,n=e.length;t<n;t++)s+=e[t][0];for(a=Math.random()*s,t=0,n=e.length;t<n;t++){if((r=e[t][0])>=a){o=e[t][1];break}a-=r}return o||this.defaultVariation}return this.defaultVariation}catch(t){return console.error("selectVariation error",t),this.defaultVariation}},g.prototype.getItem=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},g.prototype.setItem=function(t,e,i){var n=(i=i||{}).expires;if("number"==typeof n&&n){var r=new Date;r.setTime(r.getTime()+1e3*n),n=i.expires=r}n&&n.toUTCString&&(i.expires=n.toUTCString());var a=t+"="+(e=encodeURIComponent(e));for(var s in i)if(i.hasOwnProperty(s)){a+="; "+s;var o=i[s];!0!==o&&(a+="="+o)}document.cookie=a},g.prototype.removeItem=function(t){this.setItem(t,"",{expires:-1})},m.prototype.getItem=function(){return this.storage.getItem.apply(this.storage,arguments)},m.prototype.setItem=function(){this.storage.setItem.apply(this.storage,arguments)},P.prototype.getAvailableState=function(t){return this.availableStates[t]||this.mainState},P.prototype._getStoredKey=function(){return"zpCurrentState"+this.entityType+this.testToken},P.prototype.getState=function(){return this.state},P.prototype.setState=function(t){return this.state=t,this.stateStorage.setItem(this._getStoredKey(),this.state,{expires:31536e3}),this.state},P.prototype.setMainState=function(){return this.setState(this.mainState)},P.prototype.getStoredState=function(){return this.stateStorage.getItem(this._getStoredKey())},P.prototype.currentScope=function(){return this.scopes[this.entityType]},P.prototype.isMainState=function(){return this.getState()===this.mainState},P.prototype.getMainStateValue=function(){return this.mainState},I.prototype.rootPath=function(){return this.localeData.root},I.prototype.baseRootPath=function(){return"/"},I.prototype.isChanged=function(){return this.baseRootPath()!==this.rootPath()},w.prototype.getRequestPath=function(t){return this.locale.isChanged()?this.locale.rootPath()+t:t},T.prototype.setState=function(t){return this.state=t,this.state},T.prototype.entityHandle=function(){return this.handles[this.state]},T.prototype.entityTitle=function(){return this.titles[this.state]},T.prototype.entityStylesLink=function(){return this.styles[this.state]},T.prototype.entityWrapperClasses=function(){return this.wrapperClasses[this.state]},T.prototype.entityFontsSettings=function(){return this.fonts[this.state]},T.prototype.entityFontsCssState=function(){return this.fontsCss[this.state]},T.prototype.entityPath=function(){return this.entityRequestPath(this.entityHandle())},T.prototype.entityRequestPath=function(t){if(this.scope&&t){var e="/"+this.scope+"/"+t;return this.route.getRequestPath(e)}return null},T.prototype.entityUrl=function(){return this.entityShopUrl(this.entityPath())},T.prototype.entityShopUrl=function(t){return t?"https://{{ shop.domain }}"+t:null},T.prototype.analyticsEntityHandle=function(){return this.analyticsHandles[this.state]},T.prototype.analyticsEntityPath=function(){return this.entityRequestPath(this.analyticsEntityHandle())},T.prototype.analyticsEntityUrl=function(){return this.entityShopUrl(this.analyticsEntityPath())},v.prototype.parseUrl=function(t){var e=(""+t).trim();if(!/^\//.test(e)&&!/^https?:\/\//.test(e))return{};var i=document.createElement("a");return i.href=t,{protocol:i.protocol,host:i.host,hostname:i.hostname,port:i.port,pathname:i.pathname,hash:i.hash,search:i.search,origin:i.origin}},v.prototype.searchQueryParams=function(t){var e=this.parseUrl(t);return e.search?(""+e.search).replace(/^\?+/,""):""},v.prototype.filterSearchParams=function(t,e){if(!(t&&e instanceof RegExp))return t;for(var i,n=this.splitSearchParams(t),r=[],a=0,s=n.length;a<s;a++)i=n[a],e.test(i)||r.push(i);return r.join("&")},v.prototype.splitSearchParams=function(t){return t?(""+(""+t).replace(/^\?+/,"")).split("&"):[]},_.prototype.searchIdentifierParam=function(){return"zpstest={{ zp_split_token | url_escape }}"},_.prototype.getSearchParams=function(){var t=[this.searchIdentifierParam()],e=this.urlHelper.searchQueryParams(window.location.href).trim();return e.length>0&&t.push(this._filterSearchParams(e)),t.join("&")},_.prototype._filterSearchParams=function(t){var e=new RegExp("^zpstest=");return this.urlHelper.filterSearchParams(t,e)};var e=new P(t.entityMarker,t.testToken);if(!e.getState()){var i=new d(t.dataSet).selectVariation(),n=e.getAvailableState(i);e.setState(n)}var r=new _,a=new T({state:e.getState(),scope:e.currentScope(),localeData:t.locale,handles:t.handles,titles:t.titles,analyticsHandles:t.analyticsHandles});window.ZipifyPages=window.ZipifyPages||{},t.initSplitTestObject&&!window.ZipifyPages.SplitTest&&(window.ZipifyPages.SplitTest={currentEntityUrl:function(){return a.analyticsEntityUrl()},currentEntityTitle:function(){return a.entityTitle()},searchIdentifierParam:function(){return r.searchIdentifierParam()}});var s=new v,o="";if(!e.isMainState())if("viewtyperedirect"!==t.testType||(o=s.searchQueryParams(window.location.href).trim(),!new RegExp("\\b{{ zp_view_type_url_param_name }}="+t.viewType+"\\b").test(o))){var p=a.entityPath();if(o.length>0){var h=s.searchQueryParams(p).trim(),l=s.splitSearchParams(h);h=o;for(var c,u,y=0,f=l.length;y<f;y++)(c=(""+l[y]).split("=")[0])&&c!==l[y]&&"undefined"!==c&&(u=new RegExp("^"+c+"="),h=s.filterSearchParams(h,u));var S=l.length>0?"&":"?";p+=h.length>0?S+h:""}window.location.replace(p)}}function d(t){this.defaultVariation="a";try{this.data=JSON.parse(t)}catch(t){this.data=null}}function g(){}function m(){this.storage=new g}function P(t,e){this.mainState="main",this.scopes={"article":"articles","blog":"blogs","page":"pages","product":"products"},this.testToken=""+e,this.entityType=""+t,this.availableStates={a:"main",b:"alternative"},this.stateStorage=new m,this.state=this.getStoredState()}function I(t){this.localeData=t}function w(t){this.locale=new I(t)}function T(t){var e=t||{};this.state=e.state,this.scope=e.scope,this.handles=e.handles||{},this.titles=e.titles||{},this.styles=e.styles||{},this.wrapperClasses=e.wrapperClasses||{},this.fonts=e.fonts||{},this.fontsCss=e.fontsCss||{},this.analyticsHandles=e.analyticsHandles||{},this.route=new w(e.localeData)}function v(){}function _(){this.urlHelper=new v}}({{ zp_split_data_string }});</script>{% assign zp_split_data_string = nil %}{% endif %}{% endif %}{% endif %}{% endif %}
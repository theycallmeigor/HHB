{%- comment -%}
  Updated: 08/06/2025
  This file is system-generated and should not be modified. We reserve the right to overwrite it at any moment to add improvements or new features so that customizations you made might be lost
  Please, read through this article to make sure that your customizations will be preserved: https://help.zipify.com/en/articles/877075-zipify-pages-advanced-work-with-buy-box-blocks
{%- endcomment -%}{% assign zp_gclgrdprpg = nil %}{% assign zp_cecac = '' %}{% assign zp_cpgpgtd = false %}{% assign zp_rcprewso = false %}{% assign zp_cphshmb = true %}{% if renderscope == 'metafield' %}{% assign zp_rprfrmf = true %}{% assign zp_rprfrtg = false %}{% else %}{% assign zp_rprfrmf = false %}{% assign zp_rprfrtg = true %}{% endif %}{% assign zp_dnprsex = true %}{% assign zp_dnprsmex = true %}{% if zp_rprfrmf %}{% if zp_uiec %}{% assign zp_enprs = '' %}{% assign zp_pppdt = '' %}{% for zp_prt in zp_ppdt %}{% assign zp_prts = zp_prt | append: ' ' | split: '|**|' %}{% assign zp_enprs = zp_enprs | append: zp_prts[0] | strip | append: '|**|' %}{% assign zp_pppdt = zp_pppdt | append: zp_prts[1] | strip | append: '|**|' %}{% endfor %}{% assign zp_enprs = zp_enprs | split: '|**|' %}{% assign zp_ppdtm = zp_pppdt | split: '|**|' %}{% elsif zp_current_entity_metafields['config'].type == 'json' %}{% assign zp_enprs = zp_current_entity_metafields['config'].value['products'] %}{% else %}{% assign zp_enprs = zp_current_entity_metafields['config']['products'] %}{% endif %}{% if zp_product_page_with_zp_layout %}{% if zp_uiec %}{% if zp_vts contains 'dynamicproductsection' %}{% assign zp_dnprsex = false %}{% endif %}{% else %}{% for zp_part in zp_enprs %}{% assign zp_cprst = zp_part | last %}{% if zp_cprst['vtp'] == 'dynamicproductsection' %}{% assign zp_dnprsex = false %}{% break %}{% endif %}{% endfor %}{% endif %}{% endif %}{% else %}{% assign zp_enprs = zp_current_entity_content | split: '<zpdproduct ' %}{% assign zp_current_entity_content = '' %}{% endif %}{% if zp_product_image_size == nil %}{% assign zp_current_product_image_size = '1080x' %}{% else %}{% assign zp_current_product_image_size = zp_product_image_size %}{% endif %}{% assign zp_eimsrc = 'no-image.gif' | img_url: zp_current_product_image_size %}{% assign zp_opcstg = '<zpdcsproduct ' %}{% assign zp_clcstg = '</zpdcsproduct>' %} 
{%- for zp_part in zp_enprs -%}{% if zp_uiec %}{% assign zp_pblkmkr = zp_part %}{% assign zp_cprst = zp_ppdtm[forloop.index0] %}{% assign zp_prcps = 2 %}{% elsif zp_rprfrmf %}{% assign zp_pblkmkr = zp_part | first %}{% assign zp_cprst = zp_part | last %}{% assign zp_prcps = 2 %}{% else %}{% assign zp_prct = zp_part | append: ' ' | split: '</zpdproduct>' %}{% assign zp_prcps = zp_prct | size %}{% endif %}{%- if zp_prcps < 2 -%}{% assign zp_current_entity_content = zp_current_entity_content | append: zp_part %}{%- else -%}{% assign zp_pshcren = false %}{% assign zp_display_product_markup = false %}{% assign zp_product_as_current_entity = false %}{% assign zp_product_handle = '' %}{% assign zp_phndents = '' | split: ',' %}{% assign zp_selected_variants = '' %}{% assign zp_selected_variants_list = '' %}{% assign zp_product_default_quantity = '1' %}{% assign zp_product_show_quantity = true %}{% assign zp_product_link_type = 'cart' %}{% assign zp_product_link_types = nil %}{% assign zp_redirect_product_url = routes.cart_url %}{% assign zp_product_type = 'base' %}{% assign zp_patcm = 'Product has been added to cart' %}{% assign zp_pbtnlt = '_self' %}{% assign zp_product_image_type = 'product' %}{% assign zp_product_discount_data = '' %}{% assign zp_product_block_id = '' %}{% assign zp_product_element_id = nil %}{% assign zp_bpelid = nil %}{% assign zp_patccl = '' %}{% assign zp_pmsgwcl = '' %}{% assign zp_pqslcl = '' %}{% assign zp_pvrntslv = 'vt' %}{% assign zp_pimsdt = '' %}{% assign zp_product_form_classes = '' %}{% assign zp_product_view_type = 'dynamicbuybox' %}{% assign zp_pstprcnt = '' %}{% assign zp_pstcpprcnt = '' %}{% assign zp_pprvimg = false %}{% assign zp_pimlmi = true %}{% assign zp_product_show_quantity_label = true %}{% assign zp_pvrntslcl = nil %}{% assign zp_pshwvrntsllbl = nil %}{% assign zp_pvrntslofcl = nil %}{% assign zp_product_unit_price_tag_included = false %}{% assign zp_product_image_lazy_load = false %}{% assign zp_product_calculate_bundle_price = false %}{% assign zp_ugpimgcnt = false %}{% assign zp_psldven = false %}{% assign zp_upextppr = false %}{% assign zp_pvrntslwrcl = '' %}{% assign zp_pvrntslwrclen = false %}{% assign zp_popstng = nil %}{% assign zp_prvsr = nil %}{% assign zp_prvdt = nil %}{% assign zp_prvss = nil %}{% assign zp_pshcrid = nil %}{% assign zp_pshcrmfid = nil %}{% assign zp_pshcritid = nil %}{% assign zp_epimgln = true %}{% assign zp_shpwtginc = false %}{% assign zp_pfpmtcp = '' %}{% assign zp_bndblen = false %}{% assign zp_csblen = false %}{% assign zp_csicf = '' %}{% assign zp_bspc = '' %}{% assign zp_cscfgk = 'crossSell' %}{% assign zp_pbtnsjsndt = nil %}{% assign zp_pvrnjsndt = nil %}{% assign zp_pimgjsndt = nil %}{% assign zp_imids = nil %}{% assign zp_img_tps = nil %}{% assign zp_imarts = nil %}{% assign zp_pimgdt = nil %}{% assign zp_prdlpsbcren = false %}{% assign zp_pcrdt = nil %}{% assign zp_pcrmids = nil %}{% assign zp_pcrsss = nil %}{% assign zp_pcintrcsbcr = false %}{% assign zp_phnditr = 0 %}{% assign zp_pgrtpl = '' %}{% assign zp_pgrid = nil %}{% assign zp_uspgrt = false %}{% assign zp_pgrdprscnt = '' %}{% assign zp_pgrdclhnd = '' %}{% assign zp_pgrdclen = false %}{% assign zp_pgrdcice = false %}{% assign zp_pgrdclprpg = 10 %}{% assign zp_pbtnstgs = nil %}{% assign zp_pbtids = nil %}{% assign zp_pbtcpts = nil %}{% assign zp_lnktp = '' %}{% assign zp_product_title = 'Product Title' %}{% assign zp_pttpra = zp_product_title %}{% assign zp_product_description = 'Product Description' %}{% if zp_rprfrmf %}{% if zp_uiec %}{% assign zp_pstgs = zp_cprst | append: ' ' | split: '|~~|' %}{% assign zp_pstgk = '' %}{% assign zp_pstgvs = '' %}{% for zp_pstg in zp_pstgs %}{% assign zp_pstgpt = zp_pstg | append: ' ' | split: '|::|' %}{% if zp_pstgpt.size < 2 %}{% continue %}{% endif %}{% assign zp_pstgk = zp_pstgk | append: zp_pstgpt[0] | strip | append: '|::|' %}{% assign zp_pstgvs = zp_pstgvs | append: zp_pstgpt[1] | strip | append: '|::|' %}{% endfor %}{% assign zp_product_settings_keys = zp_pstgk | split: '|::|' %}{% assign zp_product_settings_values = zp_pstgvs | split: '|::|' %}{% else %}{% assign zp_product_settings_keys = zp_cprst %}{% endif %}{% capture zp_dpbcltg %}</zpdprdct_{{ zp_pblkmkr }}>{% endcapture %}{% assign zp_dpbshmr = '<zpprdmrkp></zpprdmrkp>' | append: zp_dpbcltg %}{% if zp_current_entity_content contains zp_dpbshmr %}{% assign zp_display_product_markup = true %}{% else %}{% assign zp_display_product_markup = false %}{% endif %}{% else %}{% if zp_prct[0] contains '<zpprdmrkp></zpprdmrkp>' %}{% assign zp_prct[0] = zp_prct[0] | remove: '<zpprdmrkp></zpprdmrkp>' %}{% assign zp_display_product_markup = true %}{% else %}{% assign zp_display_product_markup = false %}{% endif %}{% assign zp_prcpts = zp_prct[0] | append: ' ' | split: '>' %}{% assign zp_pstgs = zp_prcpts[0] %}{% assign zp_pstgt = zp_pstgs | append: '>' %}{% assign zp_prcpts = zp_prcpts | join: '>' | remove_first: zp_pstgt %}{% assign zp_pstgs = ' ' | append: zp_pstgs | split: ' data-' %}{% assign zp_pstgk = '' %}{% assign zp_pstgvs = '' %}{% for zp_pstg in zp_pstgs %}{% assign zp_pstgpt = zp_pstg | split: '=' %}{% if zp_pstgpt.size < 2 %}{% continue %}{% endif %}{% assign zp_prstnk = '' | append: zp_pstgpt[0] | strip %}{% if zp_prstnk.size < 1 %}{% continue %}{% endif %}{% assign zp_pstgk = zp_pstgk | append: zp_prstnk | append: '__zp1502150400__' %}{% assign zp_pstgss = zp_pstg | size %}{% assign zp_pstgks = '' | append: zp_pstgpt[0] | size | plus: 1 %}{% assign zp_prstnvl = '' | append: zp_pstg | slice: zp_pstgks, zp_pstgss | strip %}{% assign zp_pstgvli = zp_prstnvl | size | minus: 1 %}{% assign zp_pstgvfl = zp_prstnvl | first %}{% if zp_pstgvfl == '"' or zp_pstgvfl == "'" %}{% assign zp_prstnvl = zp_prstnvl | slice: 1, zp_pstgvli %}{% endif %}{% assign zp_pstgvli = zp_prstnvl | size | minus: 1 %}{% assign zp_pstgvll = zp_prstnvl | last %}{% if zp_pstgvll == '"' or zp_pstgvll == "'" %}{% assign zp_prstnvl = zp_prstnvl | slice: 0, zp_pstgvli %}{% endif %}{% assign zp_pstgvs = zp_pstgvs | append: zp_prstnvl | append: '__zp1502150400__' %}{% endfor %}{% assign zp_product_settings_keys = zp_pstgk | split: '__zp1502150400__' %}{% assign zp_product_settings_values = zp_pstgvs | split: '__zp1502150400__' %}{% assign zp_pstgs = nil %}{% assign zp_pstgt = nil %}{% assign zp_pstgpt = nil %}{% endif %}{% assign zp_unspsks = 'btns,srtgs,vrnts,imgs,pcrls' | split: ',' %}{% for zp_product_setting_key_data in zp_product_settings_keys %}{% if zp_rprfrmf and zp_uiec != true %}{% assign zp_prstnk = zp_product_setting_key_data | first %}{% if zp_unspsks contains zp_prstnk %}{% assign zp_prstnvl = zp_product_setting_key_data | last %}{% else %}{% assign zp_prstnvl = zp_product_setting_key_data | last | strip %}{% endif %}{% else %}{% assign zp_prstnk = zp_product_setting_key_data %}{% assign zp_prstnvl = '' | append: zp_product_settings_values[forloop.index0] | strip %}{% endif %}{% case zp_prstnk %}{% when 'handle' %}{% assign zp_phndents = zp_prstnvl | split: ':|~|:' %}{% when 'slctvrnt' %}{% assign zp_selected_variants = zp_prstnvl %}{% assign zp_selected_variants_list = zp_prstnvl %}{% when 'qty' %}{% assign zp_product_default_quantity = zp_prstnvl %}{% when 'shwqty' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_product_show_quantity = true %}{% else %}{% assign zp_product_show_quantity = false %}{% endif %}{% when 'btnltp' %}{% assign zp_product_link_type = zp_prstnvl | replace: '\', '&bsol;' %}{% when 'btns' %}{% if zp_uiec %}{% assign zp_plnktpsstr = zp_prstnvl %}{% else %}{% assign zp_plnktpsstr = '' %}{% assign zp_pbtnstgs = zp_prstnvl %}{% for zp_pstgv in zp_pbtnstgs %}{% assign zp_plnktpsstr = zp_plnktpsstr | append: zp_pstgv['tp'] | append: ',' %}{% endfor %}{% endif %}{% assign zp_product_link_types = zp_plnktpsstr | split: ',' %}{% when 'btnsc' %}{% assign zp_pbtnstgs = zp_prstnvl | append: ' ' | split: '|*b*|' %}{% when 'btids' %}{% assign zp_pbtids = zp_prstnvl | append: ' ' | split: '|*b*|' %}{% when 'btcpts' %}{% assign zp_pbtcpts = zp_prstnvl | append: ' ' | split: '|*b*|' %}{% when 'dcbe' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_use_product_form_action = true %}{% endif %}{% when 'url' %}{% assign zp_redirect_product_url = zp_prstnvl | replace: '&amp;', '&' | url_escape | replace: '%23', '#' | replace: '%25', '%' %}{% when 'btncpt' %}{% assign zp_pbcpt = zp_prstnvl | replace: '\', '&bsol;' %}{% when 'stkbtncpt' %}{% assign zp_pskbcpt = zp_prstnvl %}{% when 'type' %}{% assign zp_product_type = zp_prstnvl %}{% when 'addcrtmsg' %}{% assign zp_patcm = zp_prstnvl | replace: '\', '&bsol;' | url_escape %}{% when 'btnelt' %}{% assign zp_pbtnlt = zp_prstnvl %}{% when 'imgtp' %}{% assign zp_product_image_type = zp_prstnvl %}{% when 'dscntdt' %}{% assign zp_product_discount_data = zp_prstnvl %}{% when 'bid' %}{% assign zp_product_block_id = zp_prstnvl %}{% when 'eid' %}{% assign zp_product_element_id = zp_prstnvl %}{% assign zp_bpelid = zp_prstnvl %}{% when 'gid' %}{% assign zp_pgrid = zp_prstnvl %}{% when 'crtmsgcls' %}{% assign zp_patccl = zp_prstnvl | url_escape %}{% when 'msgwrpcl' %}{% assign zp_pmsgwcl = zp_prstnvl | url_escape %}{% when 'vrntcls' %}{% assign zp_pvrntslcl = zp_prstnvl | url_escape %}{% when 'vrntoffcls' %}{% assign zp_pvrntslofcl = zp_prstnvl | url_escape %}{% when 'vrntwcls' %}{% assign zp_pvrntslwrcl = zp_prstnvl | url_escape %}{% when 'qtycls' %}{% assign zp_pqslcl = zp_prstnvl %}{% when 'vrntsv' %}{% assign zp_pvrntslv = zp_prstnvl %}{% when 'imgszs' %}{% assign zp_pimsdt = zp_prstnvl %}{% when 'frmcls' %}{% assign zp_product_form_classes = zp_prstnvl %}{% when 'vtp' %}{% assign zp_product_view_type = zp_prstnvl %}{% when 'stcprc' %}{% assign zp_pstprcnt = zp_prstnvl %}{% when 'stccprprc' %}{% assign zp_pstcpprcnt = zp_prstnvl %}{% when 'optst' %}{% assign zp_popstng = zp_prstnvl %}{% when 'srtgs' %}{% if zp_uiec %}{% assign zp_prvdt = zp_prstnvl %}{% else %}{% assign zp_prvdt = zp_prstnvl | json %}{% endif %}{% when 'srtgsl' %}{% assign zp_prvss = zp_prstnvl %}{% when 'rtgsrc' %}{% assign zp_prvsr = zp_prstnvl %}{% when 'imgc' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_ugpimgcnt = true %}{% endif %}{% when 'imgprld' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_pprvimg = true %}{% endif %}{% when 'mimgld' %}{% if zp_prstnvl == 'false' or zp_prstnvl == '0' %}{% assign zp_pimlmi = false %}{% endif %}{% when 'shwqtylb' %}{% if zp_prstnvl == 'false' or zp_prstnvl == '0' %}{% assign zp_product_show_quantity_label = false %}{% endif %}{% when 'shwvrntlb' %}{% if zp_prstnvl == 'false' or zp_prstnvl == '0' %}{% assign zp_pshwvrntsllbl = false %}{% else %}{% assign zp_pshwvrntsllbl = true %}{% endif %}{% when 'enpimglg' %}{% if zp_prstnvl == 'false' or zp_prstnvl == '0' %}{% assign zp_epimgln = false %}{% endif %}{% when 'crntentt' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_product_as_current_entity = true %}{% assign zp_phndents = '_cprdct_' | split: ',' %}{% endif %}{% when 'unprcincl' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_product_unit_price_tag_included = true %}{% endif %}{% when 'lzld' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_product_image_lazy_load = true %}{% endif %}{% when 'sldtv' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_psldven = true %}{% endif %}{% when 'bndlprc' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_product_calculate_bundle_price = true %}{% endif %}{% when 'extpupd' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_upextppr = true %}{% endif %}{% when 'spwincl' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_shpwtginc = true %}{% endif %}{% when 'spcen' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_pshcren = true %}{% endif %}{% when 'rcsbcr' %}{% if zp_prstnvl == 'true' %}{% assign zp_pcintrcsbcr = true %}{% endif %}{% when 'spcid' %}{% assign zp_pshcrid = zp_prstnvl %}{% when 'spcpid' %}{% assign zp_pshcrmfid = zp_prstnvl %}{% when 'spsrcs' %}{% assign zp_pcrshsrs = zp_prstnvl %}{% when 'dfttl' %}{% assign zp_product_title = zp_prstnvl %}{% when 'dfbd' %}{% assign zp_product_description = zp_prstnvl %}{% when 'crsslls' %}{% assign zp_csblen = true %}{% if zp_uiec %}{% assign zp_csicf = zp_prstnvl %}{% endif %}{% when 'bndl' %}{% assign zp_cscfgk = 'bundle' %}{% assign zp_bndblen = true %}{% assign zp_phndents = '_bundle_' | split: ',' %}{% if zp_uiec %}{% assign zp_csicf = zp_prstnvl %}{% endif %}{% when 'bndldc' %}{% assign zp_bspc = zp_prstnvl %}{% when 'bndlc' %}{% assign zp_bjc = zp_prstnvl %}{% when 'bndlce' %}{% assign zp_bdh = zp_prstnvl %}{% when 'vrnts' %}{% if zp_uiec %}{% assign zp_pvrnjsndt = zp_prstnvl %}{% else %}{% assign zp_pvrnjsndt = zp_prstnvl | json %}{% endif %}{% when 'imgs' %}{% assign zp_pimgjsndt = zp_prstnvl | json %}{% assign zp_pimgdt = zp_prstnvl %}{% when 'imgsjsn' %}{% assign zp_pimgjsndt = zp_prstnvl %}{% when 'imgids' %}{% assign zp_imids = zp_prstnvl | append: ' ' | split: '|*i*|' %}{% when 'imgtps' %}{% assign zp_img_tps = zp_prstnvl | append: ' ' | split: '|*i*|' %}{% when 'imgarts' %}{% assign zp_imarts = zp_prstnvl | append: ' ' | split: '|*i*|' %}{% when 'pcrls' %}{% assign zp_pcrdt = zp_prstnvl %}{% when 'pcrmids' %}{% assign zp_pcrmids = zp_prstnvl | append: ' ' | split: '|*c*|' %}{% when 'pcrsss' %}{% assign zp_pcrsss = zp_prstnvl | append: ' ' | split: '|*c*|' %}{% when 'chandle' %}{% assign zp_pgrdclhnd = zp_prstnvl %}{% assign zp_pgrdclen = true %}{% when 'cicrent' %}{% assign zp_pgrdcice = true %}{% assign zp_pgrdclen = true %}{% when 'cppp' %}{% assign zp_pgrdclprpg = 0 | plus: zp_prstnvl %}{% when 'lnktp' %}{% assign zp_lnktp = zp_prstnvl %}{% endcase %}{% endfor %}{% if zp_product_link_types != blank %}{% for zp_link_type in zp_product_link_types %}{% if zp_shw_vrntsslctr_lnktps contains zp_link_type %}{% assign zp_product_link_type = zp_link_type %}{% break %}{% endif %}{% endfor %}{% endif %}{% if zp_product_link_type == 'cart' %}{% assign zp_redirect_product_url = routes.cart_url %}{% endif %}{% if zp_pvrntslwrcl.size > 0 %}{% assign zp_pvrntslwrcl = 'zp ' | append: zp_pvrntslwrcl %}{% assign zp_pvrntslwrclen = true %}{% endif %}{% if zp_rprfrtg and zp_popstng != empty %}{% assign zp_popstng = zp_popstng | replace: '&quot;', '"' %}{% endif %}{% if zp_pgrid != blank %}{% assign zp_pprsngtp = 'multiproduct' %}{% capture zp_pgrtplotg %}<zppgrt_{{ zp_pgrid }}>{% endcapture %}{% capture zp_pgrtplctg %}</zppgrt_{{ zp_pgrid }}>{% endcapture %}{% assign zp_pgrtplprt = zp_current_entity_content | split: zp_pgrtplotg %}{% if zp_pgrtplprt.size > 1 %}{% assign zp_pgrtplprt = zp_pgrtplprt | last | split: zp_pgrtplctg %}{% if zp_pgrtplprt.size > 1 %}{% assign zp_pgrtpl = zp_pgrtplprt | first %}{% assign zp_pgrtplprt = nil %}{% if zp_pgrtpl.size > 0 %}{% assign zp_uspgrt = true %}{% assign zp_tentcnt = zp_current_entity_content %}{% assign zp_current_entity_content = zp_pgrtpl %}{% else %}{% continue %}{% endif %}{% else %}{% continue %}{% endif %}{% else %}{% continue %}{% endif %}{% else %}{% assign zp_pprsngtp = 'product' %}{% endif %}{% if zp_pgrdclen %}{% if zp_pgrdcice %}{% assign zp_pgrdcl = zp_current_entity %}{% if zp_gclgrdprpg == blank %}{% assign zp_gclgrdprpg = zp_pgrdclprpg %}{% else %}{% assign zp_pgrdclprpg = zp_gclgrdprpg %}{% endif %}{% else %}{% assign zp_pgrdcl = collections[zp_pgrdclhnd] %}{% endif %}{% assign zp_pgrdclhndsz = '' | append: zp_pgrdcl.id %}{% if zp_pgrdclhndsz.size > 0 %}{% paginate zp_pgrdcl.products by zp_pgrdclprpg %}{% assign zp_product_iterator = zp_product_iterator | plus: paginate.current_offset %}{% assign zp_phndents = zp_pgrdcl.products %}{% if zp_pgrdcice and zp_cpgpgtd == blank %}{% assign zp_cpgpgtd = true %}{% capture zp_cpgpgcnt %}<script type="text/json" data-zp-collection-paginate>{"page":{{ paginate.current_page | json }},"pages":{{ paginate.pages | json }}}</script>{% endcapture %}{% assign zp_cecac = zp_cecac | append: zp_cpgpgcnt %}{% assign zp_cpgpgcnt = nil %}{% endif %}{% if zp_pgrdcice and paginate.items > paginate.page_size %}{% assign zp_cphshmb = false %}{% endif %}{% endpaginate %}{% endif %}{% endif %}{% for zp_phndent in zp_phndents %}{% assign zp_first_selected_variant = nil %}{% assign zp_first_available_variant = nil %}{% assign zp_current_selected_variant = nil %}{% assign zp_product_schema_variant = nil %}{% assign zp_any_product_variant_available = false %}{% assign zp_current_product_price = nil %}{% assign zp_pinscr = '' %}{% assign zp_product_additional_integrations = '' %}{% assign zp_pfoptg = '' %}{% assign zp_pfcstg = '' %}{% assign zp_unpcls = ' hidden' %}{% assign zp_unpbwrcls = '' %}{% assign zp_unplnbcls = ' hidden' %}{% assign zp_unavailable_discount_class = '' %}{% assign zp_pvrntcntr = '' %}{% assign zp_pqtycntr = '' %}{% assign zp_product_button_type = 'button' %}{% assign zp_pbtnintgr = '' %}{% assign zp_pbtnmsg = '' %}{% assign zp_product_image = zp_eimsrc %}{% assign zp_pimda = '' %}{% assign zp_product_wrapper_selector = '' %}{% assign zp_formatted_product_price = nil %}{% assign zp_formatted_product_compare_at_price = nil %}{% assign zp_unqtycls = ' hidden' %}{% assign zp_product_button_text = 'products.product.unavailable' | t %}{% if zp_product_button_text contains 'Translation missing' or zp_product_button_text contains 'translation missing' %}{% assign zp_product_button_text = "Unavailable" %}{% endif %}{% assign zp_product_sticky_button_text = 'products.product.unavailable' | t %}{% if zp_product_sticky_button_text contains 'Translation missing' or zp_product_sticky_button_text contains 'translation missing' %}{% assign zp_product_sticky_button_text = "Unavailable" %}{% endif %}{% assign zp_sale_price = nil %}{% assign zp_product_sale_price = nil %}{% assign zp_product_saved_amount = nil %}{% assign zp_product_discount_amount = nil %}{% assign zp_formatted_product_sale_price = nil %}{% assign zp_formatted_product_saved_amount = nil %}{% assign zp_formatted_product_discount_amount = nil %}{% assign zp_product_discount_amount_with_suffix = nil %}{% assign zp_pimgldcnt = '' %}{% assign zp_current_product_custom_variants = nil %}{% assign zp_product_unit_price = '' %}{% assign zp_pupwrcl = ' hidden' %}{% assign zp_acspct = 0 %}{% assign zp_uncswrcl = ' hidden' %}{% assign zp_puplbl = '' %}{% assign zp_pupblk = '' %}{% assign zp_unpfptrmscl = 'hidden' %}{% assign zp_product_review_wrapper_classes = 'disabled hidden' %}{% assign zp_product_review_count = nil %}{% assign zp_product_review_rating = nil %}{% assign zp_product_review_rating_text = '' %}{% assign zp_cscfg = nil %}{% assign zp_ucprart = false %}{% assign zp_prdscdfwcl = 'hidden' %}{% if zp_use_current_entity_markup %}{% assign zp_product_custom_title = zp_current_entity.title %}{% assign zp_product_custom_description = zp_current_entity.description %}{% assign zp_product_custom_image = zp_cprst['schm']['img'] %}{% else %}{% if zp_rprfrmf %}{% assign zp_crpshcfg = zp_cprst['schm'] %}{% else %}{% assign zp_crpshcfg = zp_current_entity_schema_config[zp_product_block_id] %}{% endif %}{% assign zp_product_custom_title = zp_crpshcfg['title'] %}{% assign zp_product_custom_description = zp_crpshcfg['descr'] %}{% assign zp_product_custom_image = zp_crpshcfg['img'] %}{% assign zp_crpshcfg = nil %}{% endif %}{% if zp_product_view_type == 'dynamicproductsection' %}{% assign zp_use_product_variant_from_url = true %}{% assign zp_product_entity_type = 'main' %}{% else %}{% assign zp_use_product_variant_from_url = false %}{% assign zp_product_entity_type = 'alt' %}{% endif %}{% if zp_product_link_types != blank %}{% assign zp_shw_vrntsslctr = false %}{% for zp_link_type in zp_product_link_types %}{% if zp_shw_vrntsslctr_lnktps contains zp_link_type %}{% assign zp_shw_vrntsslctr = true %}{% break %}{% endif %}{% endfor %}{% elsif zp_shw_vrntsslctr_lnktps contains zp_product_link_type %}{% assign zp_shw_vrntsslctr = true %}{% else %}{% assign zp_shw_vrntsslctr = false %}{% endif %}{% assign zp_show_variants_selectors = zp_shw_vrntsslctr %}{% assign zp_enable_subscription_widget = zp_shw_vrntsslctr %}{% assign zp_dshpwgt = true %}{% assign zp_dshpwgtbpr = false %}{% assign zp_product_iterator = zp_product_iterator | plus: 1 %}{% assign zp_product_selector = zp_main_product_selector | append: zp_product_iterator %}{% assign zp_product_wrapper_selector = zp_product_selector | append: zp_main_product_selector_suffix %}{% assign zp_main_product_available = true %}{% if zp_shw_vrntsslctr %}{% assign zp_unbndpiwrcl = '' %}{% else %}{% assign zp_unbndpiwrcl = 'hidden' %}{% endif %}{% assign zp_adpinstg = '' %}{% assign zp_padclcnt = '' %}{% assign zp_pshcrmtpl = nil %}{% assign zp_pshcrttpl = nil %}{% assign zp_pshcrm = '' %}{% assign zp_pshcrt = '' %}{% assign zp_pshcrjsn = '' %}{% assign zp_lpscrwgc = '' %}{% assign zp_aptscrwgc = '' %}{% assign zp_slscrwgc = '' %}{% assign zp_rcscrwgc = '' %}{% if zp_integrate_with_recharge or zp_pcintrcsbcr %}{% assign zp_pscrprrf = true %}{% else %}{% assign zp_pscrprrf = false %}{% endif %}{% if zp_product_as_current_entity or zp_pgrdclen %}{% assign zp_phndlsz = 1 %}{% elsif zp_bndblen %}{% assign zp_phndlsz = 0 %}{% else %}{% assign zp_phndlsz = zp_phndent.size %}{% endif %}{% assign zp_phnditr = zp_phnditr | plus: 1 %}{% if zp_pprsngtp == 'multiproduct' and zp_product_element_id != blank %}{% assign zp_product_element_id = '' | append: zp_bpelid | append: '_' | append: zp_phnditr %}{% assign zp_pshcrmfid = zp_product_element_id %}{% assign zp_pshcritid = zp_product_element_id %}{% endif %}{% assign zp_pphpr = '#' %}{% assign zp_purpr = '#' %}{% assign zp_pttpr = '' %}{% assign zp_pprid = nil %}{% assign zp_pldwc = 'hidden' %}{% assign zp_product_title = 'products.product.unavailable' | t %}{% if zp_product_title contains 'Translation missing' or zp_product_title contains 'translation missing' %}{% assign zp_product_title = "Unavailable" %}{% endif %}{% assign zp_product_description = 'products.product.unavailable' | t %}{% if zp_product_description contains 'Translation missing' or zp_product_description contains 'translation missing' %}{% assign zp_product_description = "Unavailable" %}{% endif %}{% assign zp_asmpbdpf = false %}{% assign zp_ansmpbndprav = false %}{% if zp_phndlsz < 1 and zp_rprfrmf %}{% if zp_uiec %}{% assign zp_cscntprts = zp_bspc | append: ' ' | split: '|#cs#|' %}{% else %}{% assign zp_cscntprts = zp_cprst['bndl'] %}{% endif %}{% for zp_cscntprt in zp_cscntprts %}{% if zp_uiec %}{% assign zp_prts = zp_cscntprt | append: ' ' | split: '|~c~|' %}{% assign zp_bdph = zp_prts[0] | strip %}{% assign zp_bdpslvs = zp_prts[1] | strip %}{% assign zp_prstnvl = zp_prts[2] | strip %}{% assign zp_product_discount_data = zp_prts[3] | strip %}{% assign zp_popstng = zp_prts[4] | strip %}{% assign zp_product_default_quantity = zp_prts[5] | strip %}{% assign zp_prstnui = zp_prts[6] | strip %}{% else %}{% assign zp_bdpsts = zp_cscntprt | last %}{% assign zp_bdph = zp_bdpsts['handle'] | strip %}{% assign zp_bdpslvs = zp_bdpsts['slctvrnt'] | strip %}{% assign zp_prstnvl = zp_bdpsts['bndlprc'] | strip %}{% assign zp_product_discount_data = zp_bdpsts['dscntdt'] | strip %}{% assign zp_popstng = zp_bdpsts['optst'] | strip %}{% assign zp_product_default_quantity = zp_bdpsts['qty'] | strip %}{% assign zp_prstnui = zp_bdpsts['unprcincl'] | strip %}{% endif %}{% if zp_bdph.size < 1 %}{% continue %}{% endif %}{% assign zp_bdpr = all_products[zp_bdph] %}{% assign zp_bdphs = '' | append: zp_bdpr.id | size %}{% if zp_bdphs > 0 %}{% assign zp_asmpbdpf = true %}{% endif %}{% if zp_bdpr.available == true %}{% assign zp_bdpupvfu = false %}{% assign zp_selected_variants = zp_bdpslvs %}{% assign zp_selected_variants_list = zp_bdpslvs %}{% assign zp_bavwcp = false %}{% if zp_bdpcsv == blank %}{% assign zp_bdpcsv = zp_bdpr.variants %}{% endif %}{% if zp_bdpslvs.size < 1 %}{% assign zp_bdpslvs = zp_bdpcsv | map: 'id' | join: ',' | split: ',' %}{% endif %}{% if zp_bdpupvfu %}{% assign zp_usvi = '' | append: zp_bdpr.selected_variant.id %}{% else %}{% assign zp_usvi = '' %}{% endif %}{% assign zp_fvrs = '' %}{% assign zp_bdfsv = nil %}{% assign zp_current_selected_variant = nil %}{% assign zp_bdpapvav = false %}{% for zp_pvr in zp_bdpcsv %}{% assign zp_vid = '' | append: zp_pvr.id %}{% if zp_bdpupvfu and zp_usvi == zp_vid and zp_bdpslvs contains zp_usvi %}{% assign zp_bdfsv = zp_pvr %}{% assign zp_current_selected_variant = zp_pvr %}{% endif %}{% if zp_bdpslvs contains zp_vid %}{% assign zp_fvrs = zp_fvrs | append: zp_vid | append: ',' %}{% if zp_bdfsv == nil %}{% assign zp_bdfsv = zp_pvr %}{% endif %}{% if zp_pvr.available %}{% assign zp_bdpapvav = true %}{% endif %}{% endif %}{% endfor %}{% assign zp_bdpslvs = zp_fvrs | split: ',' %}{% if zp_bdpslvs.size < 1 %}{% assign zp_bdpslvs = zp_bdpcsv | map: 'id' | join: ',' | split: ',' %}{% assign zp_bdpapvav = zp_bdpr.available %}{% if zp_bdpupvfu and zp_bdpslvs contains zp_usvi %}{% assign zp_bdfsv = zp_bdpr.selected_variant %}{% assign zp_current_selected_variant = zp_bdpr.selected_variant %}{% else %}{% assign zp_bdfsv = zp_bdpcsv | first %}{% endif %}{% endif %}{% unless zp_bdfsv.available %}{% assign zp_bdpfav = nil %}{% for zp_pvr in zp_bdpcsv %}{% assign zp_vid = '' | append: zp_pvr.id %}{% if zp_bdpslvs contains zp_vid and zp_pvr.available %}{% assign zp_bdpfav = zp_pvr %}{% break %}{% endif %}{% endfor %}{% unless zp_bdpfav == nil %}{% assign zp_bdfsv = zp_bdpfav %}{% endunless %}{% assign zp_bdpfav = nil %}{% endunless %}{% assign zp_vid = nil %}{% if zp_bdfsv.compare_at_price > zp_bdfsv.price %}{% assign zp_bavwcp = true %}{% endif %}{% unless zp_bdpapvav %}{% continue %}{% endunless %}{% assign zp_ansmpbndprav = true %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_product_calculate_bundle_price = true %}{% endif %}{% assign zp_psldven = false %}{% if zp_prstnui == 'true' or zp_prstnui == '1' %}{% assign zp_product_unit_price_tag_included = true %}{% endif %}{% assign zp_product_show_quantity = false %}{% assign zp_ucprart = true %}{% break %}{% endif %}{% endfor %}{% endif %}{% if zp_ansmpbndprav %}{% assign zp_smpbndlprdctwprprcls = '' %}{% else %}{% assign zp_smpbndlprdctwprprcls = 'hidden' %}{% endif %}{% assign zp_cspr = nil %}{% assign zp_cshndl = '' %}{% assign zp_csslcvrns = '' %}{% assign zp_csslvrnlst = '' %}{% assign zp_csblcid = '' %}{% assign zp_csimgsz = nil %}{% assign zp_csimgszjson = '[]' %}{% assign zp_csshwvrnlbl = nil %}{% assign zp_csvrntslvw = 'vt' %}{% assign zp_csvrntslofscls = nil %}{% assign zp_csdsctam = nil %}{% assign zp_cssvam = nil %}{% assign zp_crcspr = nil %}{% assign zp_crcscapr = nil %}{% assign zp_csslpr = nil %}{% assign zp_fmcspr = nil %}{% assign zp_csimg = 'no-image.gif' | img_url: '280x' %}{% assign zp_fmcsslpr = nil %}{% assign zp_fmcscapr = nil %}{% assign zp_fmcsdsctsvam = nil %}{% assign zp_fmcsdsctam = nil %}{% assign zp_csdsctamwsfx = nil %}{% assign zp_uncscls = ' hidden' %}{% assign zp_csunvbdsctcl = ' hidden' %}{% assign zp_uncsqtycls = ' hidden' %}{% assign zp_csupwrprcls = ' hidden' %}{% assign zp_csimgdatr = nil %}{% assign zp_csvrntcntr = nil %}{% assign zp_csqtycntr = nil %}{% assign zp_csmsgs = nil %}{% assign zp_csfsvr = nil %}{% assign zp_ccscvrs = nil %}{% assign zp_cselid = nil %}{% assign zp_csupblck = nil %}{% assign zp_csuplbl = '' %}{% assign zp_csatnlclscnt = '' %}{% assign zp_csavlbl = false %}{% assign zp_csldmnimg = true %}{% assign zp_csshwqtylbl = true %}{% assign zp_csdftqty = '1' %}{% assign zp_csimgtp = 'product' %}{% assign zp_csdsctdt = '' %}{% assign zp_csshwqty = true %}{% assign zp_cross_sell_view_type = 'crosssellproduct' %}{% assign zp_csprdfnd = false %}{% assign zp_csuntprtginc = false %}{% assign zp_csoptstgs = nil %}{% assign zp_csvrntslctrcls = nil %}{% assign zp_csimglzld = false %}{% assign zp_crvsrc = nil %}{% assign zp_csrvdt = nil %}{% assign zp_csrvss = nil %}{% assign zp_csrvwrpcl = 'disabled hidden' %}{% assign zp_csrvrtg = nil %}{% assign zp_csrvcnt = nil %}{% assign zp_csrvrtngtxt = '' %}{% assign zp_csshcrlen = false %}{% assign zp_csshcrlid = nil %}{% assign zp_csshcrlmfid = nil %}{% assign zp_csshcrlmdtpl = nil %}{% assign zp_csshcrltmbtpl = nil %}{% assign zp_csshcrlmds = '' %}{% assign zp_csshcrltmb = '' %}{% assign zp_csshcrljsn = '' %}{% assign zp_csvrntjsndt = nil %}{% assign zp_csimgsjsndt = nil %}{% assign zp_csimids = nil %}{% assign zp_csimtps = nil %}{% assign zp_csimarts = nil %}{% assign zp_csimgsdt = nil %}{% assign zp_cscrlsdt = nil %}{% assign zp_cscrmids = nil %}{% assign zp_cscrsss = nil %}{% assign zp_csldwc = 'hidden' %}{% assign zp_cspttl = 'products.product.unavailable' | t %}{% if zp_cspttl contains 'Translation missing' or zp_cspttl contains 'translation missing' %}{% assign zp_cspttl = "Unavailable" %}{% endif %}{% assign zp_cspdsc = 'products.product.unavailable' | t %}{% if zp_cspdsc contains 'Translation missing' or zp_cspdsc contains 'translation missing' %}{% assign zp_cspdsc = "Unavailable" %}{% endif %}{%- if zp_phndlsz > 0 or zp_ansmpbndprav -%}{% if zp_product_as_current_entity %}{% assign product = zp_current_entity %}{% elsif zp_pgrdclen %}{% assign product = zp_phndent %}{% elsif zp_ansmpbndprav %}{% assign product = zp_bdpr %}{% assign zp_main_product_available = false %}{% else %}{% assign product = all_products[zp_phndent] %}{% endif %}{% assign zp_pidsz = '' | append: product.id | size %}{% assign zp_product_found = true %}{% if zp_pidsz < 1 %}{% assign product = nil %}{% assign zp_product_found = false %}{% endif -%}{% if zp_product_found %}{% assign zp_product_handle = product.handle %}{% assign zp_product_title = product.title %}{% assign zp_pttpra = zp_product_title | escape %}{% assign zp_product_description = product.description %}{% assign zp_pqtyicrtr = 'products.product.quantity.increase' | t: product: product.title %}{% if zp_pqtyicrtr contains 'Translation missing' or zp_pqtyicrtr contains 'translation missing' %}{% assign zp_pqtyicrtr = "Increase quantity" %}{% endif %}{% assign zp_pqtyinpttr = 'products.product.quantity.input_label' | t: product: product.title %}{% if zp_pqtyinpttr contains 'Translation missing' or zp_pqtyinpttr contains 'translation missing' %}{% assign zp_pqtyinpttr = "Quantity" %}{% endif %}{% assign zp_pqtydcrtr = 'products.product.quantity.decrease' | t: product: product.title %}{% if zp_pqtydcrtr contains 'Translation missing' or zp_pqtydcrtr contains 'translation missing' %}{% assign zp_pqtydcrtr = "Decrease quantity" %}{% endif %}{% assign zp_pqtyaatr = ' name="quantity"' %}{% assign zp_crrpi = '<zplpsbcr_' | append: zp_pblkmkr | append: '>' %}{% if zp_current_entity_content contains zp_crrpi %}{% assign zp_prdlpsbcren = true %}{% capture zp_lpscrwgc %}{% render 'loop-subscriptions', type: 'product-widget', product: product %}{% endcapture %}{% endif %}{% assign zp_pjed = product | json | escape | replace: '\&', '__zpamp__' %}{% assign zp_aptscrwgc = '<div class="appstle_stand_alone_selector" data-product-data="' | append: zp_pjed | append: '"></div>' %}{% assign zp_slscrwgc = '<div class="sealsubs-target-element" data-product="' | append: zp_pjed | append: '" data-handle="' | append: product.handle | append: '"></div>' %}{% assign zp_pjed = nil %}{% if zp_pcintrcsbcr %}{% assign zp_rcscrwgc = '<div id="' | append: zp_product_selector | append: '-recharge-wrapper" class="zpa-offset-bottom-xs zpa-recharge-wrapper" data-zp-recharge-product="' | append: product.id | append: '" data-zp-wrapper="' | append: zp_product_selector | append: '"></div>' %}{% endif %}{% assign zp_pphpr = routes.root_url | append: '/products/' | replace: '//', '/' | append: product.handle %}{% assign zp_purpr = shop.url | append: zp_pphpr %}{% assign zp_pttpr = product.title %}{% assign zp_pprid = product.id %}{% capture zp_pphrpr %}zps_pp{{ zp_pprid }}_{% endcapture %}{% capture zp_purrpr %}zps_pu{{ zp_pprid }}_{% endcapture %}{% assign zp_redirect_product_url = zp_redirect_product_url | replace: zp_pphrpr, zp_pphpr | replace: zp_purrpr, zp_purpr %}{% endif -%} 
{%- if zp_main_product_available %}{%- capture zp_replace_integration -%}<zp_product_custom_variants_integration></zp_product_custom_variants_integration>{%- endcapture -%}{% assign zp_replace_integration = '' %}{% endif -%}{% if zp_pbtnstgs != blank %}{% assign zp_pbtnsjsndt = '[' %}{% for zp_pstgv in zp_pbtnstgs %}{% if zp_uiec %}{% assign zp_pbtnt = zp_product_link_types[forloop.index0] %}{% else %}{% assign zp_pbtnt = zp_pstgv['tp'] %}{% endif %}{% if forloop.first %}{% assign zp_pbtnsispr = '' %}{% else %}{% assign zp_pbtnsispr = ',' %}{% endif %}{% assign zp_pbtnsjsndt = zp_pbtnsjsndt | append: zp_pbtnsispr | append: '{' %}{% if zp_uiec %}{% assign zp_pstgvl = zp_pstgv | append: ' ' | split: '|~b~|' %}{% else %}{% assign zp_pstgvl = zp_pstgv %}{% endif %}{% for zp_pstgnv in zp_pstgvl %}{% if zp_uiec %}{% assign zp_pstgnvd = zp_pstgnv | append: ' ' | split: '|:b:|' %}{% else %}{% assign zp_pstgnvd = zp_pstgnv %}{% endif %}{% assign zp_pstgntk = zp_pstgnvd | first | strip | json %}{% if zp_pstgntk == '"cpt"' %}{% continue %}{% endif %}{% if forloop.first %}{% assign zp_pbtnsipspr = '' %}{% else %}{% assign zp_pbtnsipspr = ',' %}{% endif %}{% if zp_pstgntk == '"url"' and zp_product_found and zp_pbtnt == 'product' %}{% assign zp_pstgntv = routes.root_url | append: '/products/' | replace: '//', '/' | append: product.handle | url_escape | json %}{% else %}{% assign zp_pstgntv = zp_pstgnvd | last | strip | url_escape | json %}{% endif %}{% assign zp_pbtnsjsndt = zp_pbtnsjsndt | append: zp_pbtnsipspr | append: zp_pstgntk | append: ':' | append: zp_pstgntv %}{% endfor %}{% assign zp_pbtnsjsndt = zp_pbtnsjsndt | append: '}' %}{% endfor %}{% assign zp_pbtnsjsndt = zp_pbtnsjsndt | append: ']' %}{% endif %}{% if zp_uiec and zp_nll != blank %}{% if zp_nll == 'true' %}{% assign zp_ceunll = true %}{% else %}{% assign zp_ceunll = false %}{% endif %}{% elsif zp_current_entity_metafields['config'].type == 'json' %}{% assign zp_cenlls = zp_current_entity_metafields['config'].value['native_lzld'] %}{% if zp_cenlls %}{% assign zp_ceunll = true %}{% else %}{% assign zp_ceunll = false %}{% endif %}{% else %}{% assign zp_ceunll = false %}{% endif %}{% assign zp_avwcp = false %}{% if zp_current_product_custom_variants == blank %}{% assign zp_current_product_custom_variants = product.variants %}{% endif %}{% if zp_selected_variants.size < 1 %}{% assign zp_selected_variants = zp_current_product_custom_variants | map: 'id' | join: ',' | split: ',' %}{% endif %}{% if zp_use_product_variant_from_url %}{% assign zp_usvi = '' | append: product.selected_variant.id %}{% else %}{% assign zp_usvi = '' %}{% endif %}{% assign zp_fvrs = '' %}{% assign zp_first_selected_variant = nil %}{% assign zp_current_selected_variant = nil %}{% assign zp_any_product_variant_available = false %}{% assign zp_bvids = '' %}{% assign zp_bdvids = '' %}{% assign zp_product_min_price = nil %}{% assign zp_product_max_price = nil %}{% for zp_pvr in zp_current_product_custom_variants %}{% assign zp_vid = '' | append: zp_pvr.id %}{% if zp_intgrt_wboldqtbrk and zp_integrate_with_bold_custom_pricing %}{% assign zp_bvids = zp_bvids | append: zp_vid | append: ',' %}{% assign zp_bdvid = zp_pvr.metafields.shappify_csp['csp_base'] | default: zp_pvr.metafields.shappify_qb['qb_parent'] | default: zp_pvr.metafields.shappify_bundle['bundle_parent'] | default: 'notassigned' %}{% assign zp_bdvids = zp_bdvids | append: zp_bdvid | append: ',' %}{% endif %}{% if zp_use_product_variant_from_url and zp_usvi == zp_vid and zp_selected_variants contains zp_usvi %}{% assign zp_first_selected_variant = zp_pvr %}{% assign zp_current_selected_variant = zp_pvr %}{% endif %}{% if zp_selected_variants contains zp_vid %}{% assign zp_fvrs = zp_fvrs | append: zp_vid | append: ',' %}{% if zp_first_selected_variant == nil %}{% assign zp_first_selected_variant = zp_pvr %}{% endif %}{% if zp_pvr.available %}{% assign zp_any_product_variant_available = true %}{% endif %}{% if zp_product_min_price == blank or zp_product_min_price > zp_pvr.price %}{% assign zp_product_min_price = zp_pvr.price %}{% endif %}{% if zp_product_max_price == blank or zp_product_max_price < zp_pvr.price %}{% assign zp_product_max_price = zp_pvr.price %}{% endif %}{% endif %}{% endfor %}{% assign zp_selected_variants = zp_fvrs | split: ',' %}{% if zp_selected_variants.size < 1 %}{% assign zp_selected_variants = zp_current_product_custom_variants | map: 'id' | join: ',' | split: ',' %}{% assign zp_any_product_variant_available = product.available %}{% if zp_use_product_variant_from_url and zp_selected_variants contains zp_usvi %}{% assign zp_first_selected_variant = product.selected_variant %}{% assign zp_current_selected_variant = product.selected_variant %}{% else %}{% assign zp_first_selected_variant = zp_current_product_custom_variants | first %}{% endif %}{% endif %}{% unless zp_first_selected_variant.available %}{% assign zp_first_available_variant = nil %}{% for zp_pvr in zp_current_product_custom_variants %}{% assign zp_vid = '' | append: zp_pvr.id %}{% if zp_selected_variants contains zp_vid and zp_pvr.available %}{% assign zp_first_available_variant = zp_pvr %}{% break %}{% endif %}{% endfor %}{% unless zp_first_available_variant == nil %}{% assign zp_first_selected_variant = zp_first_available_variant %}{% endunless %}{% assign zp_first_available_variant = nil %}{% endunless %}{% assign zp_vid = nil %}{% if zp_intgrt_wboldqtbrk and zp_integrate_with_bold_custom_pricing and zp_main_product_available %}{% assign zp_bvids = zp_bvids | split: ',' %}{% assign zp_bdvids = zp_bdvids | split: ',' %}{% assign zp_bdvid = nil %}{% assign zp_vid = '' | append: zp_first_selected_variant.id %}{% for zp_pvr in zp_bdvids %}{% if zp_vid == zp_pvr %}{% assign zp_bdvid = zp_bvids[forloop.index0] %}{% break %}{% endif %}{% endfor %}{% if zp_bdvid and zp_bdvid != zp_vid %}{% assign zp_bitr = false %}{% for zp_pvr in product.variants %}{% if zp_bitr %}{% break %}{% endif %}{% assign zp_pvid = '' | append: zp_pvr.id %}{% if zp_pvid == zp_bdvid %}{% assign zp_bitr = true %}{% if zp_intgrt_wboldqtbrk %}{% include 'bold-variant' with zp_pvr, hide_action: 'skip' %}{% endif %}{% assign zp_first_selected_variant = zp_pvr %}{% break %}{% endif %}{% endfor %}{% endif %}{% endif %}{% assign zp_current_product_price = zp_first_selected_variant.price %}{% if zp_first_selected_variant.compare_at_price > zp_first_selected_variant.price %}{% assign zp_avwcp = true %}{% endif %}{% if zp_pimgdt != blank %}{% unless zp_uiec %}{% assign zp_img_tps = zp_pimgdt | map: 'tp' %}{% endunless %}{% assign zp_umltpimgs = true %}{% else %}{% assign zp_img_tps = zp_product_image_type | split: ',' %}{% assign zp_umltpimgs = false %}{% endif %}{% if zp_pimsdt == blank or zp_pimsdt == '' %}{% assign zp_pimsdt = '1080:--:1080x:|~|:936:--:936x:|~|:774:--:774x:|~|:540:--:540x:|~|:350:--:350x' %}{% endif %}{% assign zp_product_featured_image = product.featured_image %}{% for zp_itp in zp_img_tps %}{% assign zp_img_tp = zp_itp | strip %}{% assign zp_pivsdp = '' %}{% assign zp_pimsdpr = '' | append: zp_pimsdt | split: ':|~|:' %}{% assign zp_pimsls = '' %}{% assign zp_pimjs = '' %}{% assign zp_current_product_image_size = nil %}{% assign zp_fimss = 0 %}{% assign zp_limss = 0 %}{% for zp_imsd in zp_pimsdpr %}{% assign zp_imsdpr = '' | append: zp_imsd | split: ':--:' %}{% assign zp_imss = zp_imsdpr[0] %}{% assign zp_imrf = zp_imsdpr[1] %}{% if forloop.first %}{% assign zp_fimss = 0 | plus: zp_imss %}{% elsif forloop.last %}{% assign zp_limss = 0 | plus: zp_imss %}{% endif %}{% if zp_imss.size > 0 and zp_imrf.size > 0 %}{% assign zp_imssw = zp_imss | append: 'w' %}{% assign zp_pimsls = zp_pimsls | append: zp_imss | append: 'px' | append: '__zp1502150400__' %}{% assign zp_imsswjs = zp_imssw | json %}{% assign zp_imrfjs = zp_imrf | json %}{% assign zp_pimjs = zp_pimjs | append: '{"filter":' | append: zp_imrfjs | append: ',"screen":' | append: zp_imsswjs | append: '}' | append: '__zp1502150400__' %}{% assign zp_pivsdp = zp_pivsdp | append: zp_imssw | append: ':--:' | append: zp_imrf | append: ':|~|:' %}{% unless zp_current_product_image_size %}{% assign zp_current_product_image_size = zp_imrf %}{% endunless %}{% endif %}{% endfor %}{% unless zp_current_product_image_size %}{% assign zp_current_product_image_size = '1080x' %}{% endunless %}{% assign zp_pimj = zp_pimjs | split: '__zp1502150400__' %}{% if zp_fimss > zp_limss %}{% assign zp_pimj = zp_pimj | reverse %}{% endif %}{% assign zp_product_image_sizes_list = zp_pimsls | split: '__zp1502150400__' | join: ',' %}{% assign zp_pimj = zp_pimj | join: ',' | prepend: '[' | append: ']' %}{% assign zp_pivsdp = zp_pivsdp | split: ':|~|:' %}{% if zp_product_featured_image.id %}{% assign zp_fsvid = '' | append: zp_first_selected_variant.image.id | strip %}{% if zp_img_tp == 'variant' and zp_shw_vrntsslctr == true and zp_fsvid.size > 0 %}{% assign zp_product_featured_image = zp_first_selected_variant.image %}{% endif %}{% assign zp_product_image_srcset_available = true %}{% if zp_umltpimgs %}{% if zp_uiec %}{% assign zp_pimarpv = 0 | plus: zp_imarts[forloop.index0] %}{% else %}{% assign zp_pimarpv = 0 | plus: zp_pimgdt[forloop.index0]['arat'] %}{% endif %}{% unless zp_pimarpv > 0 %}{% assign zp_pimarpv = nil %}{% endunless %}{% else %}{% assign zp_pimarpv = nil %}{% endif %}{% assign zp_pimsss = '' %}{% for zp_imsd in zp_pivsdp %}{% assign zp_imsdpr = '' | append: zp_imsd | split: ':--:' %}{% assign zp_imssw = zp_imsdpr[0] %}{% assign zp_imrf = zp_imsdpr[1] %}{% assign zp_imen = '' | append: zp_product_featured_image.src | split: '.' | last %}{% if zp_pimarpv != blank and zp_imen != 'svg' %}{% assign zp_imcw = zp_imrf | split: 'x' | first %}{% assign zp_imcw = 0 | plus: zp_imcw %}{% if zp_product_featured_image.width < zp_imcw %}{% assign zp_imcw = zp_product_featured_image.width %}{% endif %}{% assign zp_imch = zp_imcw | divided_by: zp_pimarpv | floor %}{% if zp_product_featured_image.height < zp_imch %}{% assign zp_imch = zp_product_featured_image.height %}{% assign zp_imcw = zp_imch | times: zp_pimarpv | floor %}{% endif %}{% assign zp_imurlwf = zp_product_featured_image | image_url: width: zp_imcw, height: zp_imch, crop: 'center' %}{% else %}{% assign zp_imurlwf = zp_product_featured_image | img_url: zp_imrf %}{% endif %}{% assign zp_pimsss = zp_pimsss | append: zp_imurlwf | append: ' ' | append: zp_imssw | append: '__zp1502150400__' %}{% endfor %}{% assign zp_product_image_src_set = zp_pimsss | split: '__zp1502150400__' %}{% if zp_fimss > zp_limss %}{% assign zp_product_image_src_set = zp_product_image_src_set | reverse %}{% endif %}{% assign zp_product_image_src_set = zp_product_image_src_set | join: ', ' %}{% assign zp_pimen = '' | append: zp_product_featured_image.src | split: '.' | last %}{% if zp_pimarpv != blank and zp_pimen != 'svg' %}{% assign zp_pimcw = '1080x' | split: 'x' | first %}{% assign zp_pimcw = 0 | plus: zp_pimcw %}{% if zp_product_featured_image.width < zp_pimcw %}{% assign zp_pimcw = zp_product_featured_image.width %}{% endif %}{% assign zp_pimch = zp_pimcw | divided_by: zp_pimarpv | floor %}{% if zp_product_featured_image.height < zp_pimch %}{% assign zp_pimch = zp_product_featured_image.height %}{% assign zp_pimcw = zp_pimch | times: zp_pimarpv | floor %}{% endif %}{% assign zp_product_default_image = zp_product_featured_image | image_url: width: zp_pimcw, height: zp_pimch, crop: 'center' %}{% else %}{% assign zp_product_default_image = zp_product_featured_image | img_url: 'master' %}{% assign zp_pimcw = nil %}{% assign zp_pimch = nil %}{% endif %}{% if zp_pimlmi == false %}{% assign zp_product_image = '' %}{% elsif zp_pimcw != blank %}{% assign zp_product_image = zp_product_featured_image | image_url: width: zp_pimcw, height: zp_pimch, crop: 'center' %}{% else %}{% assign zp_product_image = zp_product_featured_image | img_url: zp_current_product_image_size %}{% endif %}{% else %}{% assign zp_pimcw = nil %}{% assign zp_pimch = nil %}{% assign zp_product_default_image = zp_eimsrc %}{% assign zp_product_image = zp_eimsrc %}{% endif %}{% if zp_img_tp == 'custom' or zp_product_featured_image.id == blank %}{% assign zp_pimllav = false %}{% assign zp_product_image_srcset_available = false %}{% assign zp_pimssav = false %}{% else %}{% assign zp_pimllav = true %}{% assign zp_pimssav = true %}{% endif %}{% if zp_product_featured_image.id %}{% assign zp_dimdan = 'data-zp-default-image' %}{% else %}{% assign zp_dimdan = 'src' %}{% endif %}{% capture zp_pimda %}{% if zp_product_image_lazy_load %}{% assign zp_pimlap = 'data-' %}{% else %}{% assign zp_pimlap = '' %}{% endif %}{% assign zp_pimen = '' | append: zp_product_featured_image.src | split: '.' | last %}{% if zp_pimcw != blank and zp_pimen != 'svg' %}{% assign zp_pimwa = zp_pimcw %}{% assign zp_pimha = zp_pimch %}{% assign zp_imcw = '540x' | split: 'x' | first %}{% assign zp_imcw = 0 | plus: zp_imcw %}{% if zp_product_featured_image.width < zp_imcw %}{% assign zp_imcw = zp_product_featured_image.width %}{% endif %}{% assign zp_imch = zp_imcw | divided_by: zp_pimarpv | floor %}{% if zp_product_featured_image.height < zp_imch %}{% assign zp_imch = zp_product_featured_image.height %}{% assign zp_imcw = zp_imch | times: zp_pimarpv | floor %}{% endif %}{% assign zp_pimls = zp_product_featured_image | image_url: width: zp_imcw, height: zp_imch, crop: 'center' %}{% assign zp_pimsc = zp_product_featured_image | image_url: width: zp_pimwa, height: zp_pimha, crop: 'center' %}{% else %}{% assign zp_pimwa = zp_product_featured_image.width %}{% assign zp_pimha = zp_product_featured_image.height %}{% assign zp_pimls = zp_product_featured_image | img_url: '540x' %}{% assign zp_pimsc = zp_product_featured_image | img_url: 'original' %}{% endif %}{% if zp_product_image_lazy_load and zp_pimllav %} width="{{ zp_pimwa }}" height="{{ zp_pimha }}" decoding="async" loading="lazy" src="{{ zp_pimsc }}"{% endif %}{% if zp_pimssav %} {% if zp_product_image_lazy_load and zp_pimllav %}data-sizes="auto" sizes="{{ zp_product_image_sizes_list }}"{% else %}sizes="{{ zp_product_image_sizes_list }}"{% endif %}{% endif %}{% if zp_product_image_srcset_available and zp_pimlmi %} {{ zp_pimlap }}srcset="{{ zp_product_image_src_set }}"{% endif %} data-zp-product-id="{{ product.id }}" data-zp-product-image data-zp-product-image-type="{{ zp_img_tp }}" data-zp-image-id="{{ zp_product_featured_image.id }}" {{ zp_dimdan }}="{{ zp_product_default_image }}"{% endcapture %}{% if zp_umltpimgs %}{% if zp_uiec %}{% assign zp_imid = zp_imids[forloop.index0] | strip %}{% else %}{% assign zp_imid = zp_pimgdt[forloop.index0]['id'] %}{% endif %}{% capture zp_img_prp %}zps_mprdimgdt_{{ zp_pblkmkr }}_{{ zp_imid }}_{% endcapture %}{% capture zp_imalpn %}zps_imgalt_{{ zp_pblkmkr }}_{{ zp_imid }}_{% endcapture %}{% assign zp_imalpv = '' | append: zp_product_featured_image.alt | strip_html | strip_newlines | escape %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_img_prp, zp_pimda | replace: zp_imalpn, zp_imalpv %}{% endif %}{% endfor %}{% if zp_pprvimg %}{% assign zp_pimgldcnt = '<svg class="hidden" width="215px" height="150px" data-zp-image-loader><use href="#elementLoader"></use></svg>' %}{% endif %}{% if zp_pshcren or zp_pcrdt != blank %}{% if zp_pcrdt != blank %}{% if zp_uiec %}{% assign zp_pcrldtl = zp_pcrdt | append: ' ' | split: '|*c*|' %}{% else %}{% assign zp_pcrldtl = zp_pcrdt %}{% endif %}{% assign zp_pcrlrvr = true %}{% else %}{% assign zp_pcrldtl = '1' | split: ',' %}{% assign zp_pcrlrvr = false %}{% endif %}{% for zp_pcrldti in zp_pcrldtl %}{% if zp_pcrlrvr %}{% if zp_uiec %}{% assign zp_pshcrid = zp_pcrldti | strip %}{% assign zp_pcrshsrs = zp_pcrsss[forloop.index0] | strip %}{% else %}{% assign zp_pshcrid = zp_pcrldti['spcid'] %}{% assign zp_pcrshsrs = '' | append: zp_pcrldti['spsrcs'] %}{% endif %}{% if zp_pshcritid != blank %}{% assign zp_pshcrmfid = zp_pshcritid %}{% elsif zp_uiec %}{% assign zp_pshcrmfid = zp_pcrmids[forloop.index0] | strip %}{% else %}{% assign zp_pshcrmfid = zp_pcrldti['spcpid'] %}{% endif %}{% assign zp_pcrlbmkr = zp_pblkmkr | append: '_' | append: zp_pshcrid %}{% else %}{% assign zp_pcrlbmkr = zp_pblkmkr %}{% endif %}{% capture zp_cdvdbgn %}<zppcim_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zppcim_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{% assign zp_pscit = zp_tpsct[0] %}{% capture zp_cdvdbgn %}<zppcv_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zppcv_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{% assign zp_pscvt = zp_tpsct[0] %}{% capture zp_cdvdbgn %}<zppcti_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zppcti_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{% assign zp_psctit = zp_tpsct[0] %}{% capture zp_cdvdbgn %}<zppctv_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zppctv_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{% assign zp_pstvt = zp_tpsct[0] %}{% capture zp_pshcrmtpl %}<zpctw_{{ zp_pcrlbmkr }}>{% capture zp_cdvdbgn %}<zpctw_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zpctw_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{{ zp_tpsct[0] }}</zpctw_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_pshcrttpl %}<zpctwt_{{ zp_pcrlbmkr }}>{% capture zp_cdvdbgn %}<zpctwt_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zpctwt_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{{ zp_tpsct[0] }}</zpctwt_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_pshcrm %}{% assign zp_ssc = zp_pcrshsrs | split: ',' %}{% if product.media.size > 0 %}{% assign zp_fsvfm = zp_first_selected_variant.featured_media %}{% if zp_first_selected_variant.available and zp_fsvfm != blank %}{% case zp_fsvfm.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_fsvfm | img_url: '100x100' %}{% assign zp_imgorg = zp_fsvfm | img_url: 'original' %}{% assign zp_imgalt = zp_fsvfm.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_ssc %}{{ zp_fsvfm | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_pscit | replace: 'zps_medwid', zp_fsvfm.width| replace: 'zps_medheig', zp_fsvfm.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% when 'external_video' %}{% assign video = zp_fsvfm | external_video_tag %}{{ zp_pscvt | replace: 'zps_medvid', video }}{% when 'video' %}{% assign video = zp_fsvfm | video_tag: controls: true %}{{ zp_pscvt | replace: 'zps_medvid', video }}{% endcase %}{% endif %}{% for zp_pmd in product.media %}{% if zp_pmd.id == zp_fsvfm.id %}{% continue %}{% endif %}{% case zp_pmd.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_pmd | img_url: '100x100' %}{% assign zp_imgorg = zp_pmd | img_url: 'original' %}{% assign zp_imgalt = zp_pmd.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_ssc %}{{ zp_pmd | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_pscit | replace: 'zps_medwid', zp_pmd.width| replace: 'zps_medheig', zp_pmd.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% when 'external_video' %}{% assign video = zp_pmd | external_video_tag %}{{ zp_pscvt | replace: 'zps_medvid', video }}{% when 'video' %}{% assign video = zp_pmd | video_tag: controls: true %}{{ zp_pscvt | replace: 'zps_medvid', video }}{% endcase %}{% endfor %}{% else %}{% assign zp_imgsml = product.media | img_url: '100x100' %}{% assign zp_imgorg = product.media | img_url: 'original' %}{% assign zp_imgalt = product.media.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_ssc %}{{ product.media | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_pscit | replace: 'zps_medwid', product.media.width| replace: 'zps_medheig', product.media.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% endif %}{% endcapture %}{% capture zp_pshcrt %}{% assign zp_mp = 0 %}{% if product.media.size > 0 %}{% assign zp_fsvfm = zp_first_selected_variant.featured_media %}{% if zp_first_selected_variant.available and zp_fsvfm != blank %}{% case zp_fsvfm.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_fsvfm | img_url: '100x100' %}{% assign zp_imgalt = zp_fsvfm.alt | escape %}{{ zp_psctit | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_mp | replace: 'zps_medalt', zp_imgalt }}{% when 'external_video' %}{{ zp_pstvt | replace: 'zps_medpos', zp_mp }}{%when 'video' %}{{ zp_pstvt | replace: 'zps_medpos', zp_mp }}{% endcase %}{% assign zp_mp = zp_mp | plus: 1 %}{% endif %}{% for zp_pmd in product.media %}{% if zp_pmd.id == zp_fsvfm.id %}{% continue %}{% endif %}{% case zp_pmd.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_pmd | img_url: '100x100' %}{% assign zp_imgalt = zp_pmd.alt | escape %}{{ zp_psctit | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_mp | replace: 'zps_medalt', zp_imgalt }}{% when 'external_video' %}{{ zp_pstvt | replace: 'zps_medpos', zp_mp }}{%when 'video' %}{{ zp_pstvt | replace: 'zps_medpos', zp_mp }}{% endcase %}{% assign zp_mp = zp_mp | plus: 1 %}{% endfor %}{% else %}{% assign zp_imgsml = product.media | img_url: '100x100' %}{% assign zp_imgalt = product.media.alt | escape %}{{ zp_psctit | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_mp | replace: 'zps_medalt', zp_imgalt }}{% endif %}{% endcapture %}{% capture zp_pshcrjsn %}{% assign zp_ob = "{" %}{% assign zp_cb = "}" %}{% assign zp_nac = false %}<script type="application/json" data-zp-shopify-carousel="{{ zp_pshcrid }}">{{ zp_ob }}"id":{{ '' | append: zp_pshcrid | json }},"mfid":{{ zp_pshcrmfid | json }},"role":"shopify_carousel","media":[{% if product.media.size > 0 %}{% assign zp_fsvfm = zp_first_selected_variant.featured_media %}{% if zp_first_selected_variant.available and zp_fsvfm != blank %}{% assign zp_nac = true %}{{ zp_ob }}{% case zp_fsvfm.media_type %}{% when 'image' %}"id":"{{ zp_fsvfm.id }}","type":"image","src":"{{ zp_fsvfm | img_url: 'original' }}","alt":{{ '' | append: zp_fsvfm.alt | escape | json }}{% when 'external_video' %}"id":"{{ zp_fsvfm.id }}","type":"video","content":"{{ zp_fsvfm | external_video_tag | escape }}"{% when 'video' %}"id":"{{ zp_fsvfm.id }}","type":"video","content":"{{ zp_fsvfm | video_tag: controls: true | escape }}"{% endcase %}{{ zp_cb }}{% endif %}{% for zp_pmd in product.media %}{% if zp_pmd.id == zp_fsvfm.id %}{% continue %}{% endif %}{% if zp_nac %},{% endif %}{{ zp_ob }}{% case zp_pmd.media_type %}{% when 'image' %}"id":"{{ zp_pmd.id }}","type":"image","src":"{{ zp_pmd | img_url: 'original' }}","alt":{{ '' | append: zp_pmd.alt | escape | json }}{% when 'external_video' %}"id":"{{ zp_pmd.id }}","type":"video","content":"{{ zp_pmd | external_video_tag | escape }}"{% when 'video' %}"id":"{{ zp_pmd.id }}","type":"video","content":"{{ zp_pmd | video_tag: controls: true | escape }}"{% endcase %}{{ zp_cb }}{% assign zp_nac = true %}{% endfor %}{% else %}{{ zp_ob }}"id":"{{ product.media.id }}","type":"image_default","src":"{{ product.media | img_url: 'original' }}","alt":{{ '' | append: product.media.alt | escape | json }}{{ zp_cb }}{% endif %}]{{ zp_cb }}</script>{% endcapture %}{% if zp_pshcrttpl != blank %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_pshcrttpl, zp_pshcrt %}{% endif %}{% if zp_pshcrmtpl != blank %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_pshcrmtpl, zp_pshcrm %}{% endif %}{% capture zp_pcrlbmkr %}<zpprdscj_{{ zp_pcrlbmkr }}></zpprdscj_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_pcrlbmkr, zp_pshcrjsn %}{% endfor %}{% assign zp_pcrldtl = nil %}{% assign zp_pshcritid = nil %}{% endif %}{% if zp_product_redirect_with_params == nil %}{% assign zp_current_product_redirect_with_params = false %}{% else %}{% assign zp_current_product_redirect_with_params = zp_product_redirect_with_params %}{% endif %}{% assign zp_product_json_integration_content = product | json | default: 'null' %}{% if zp_integrate_with_recharge == false and zp_pcintrcsbcr and zp_rcprewso == false %}<style>[data-zp-add-to-cart-form] .rc-container-wrapper{display:none!important}</style>{% assign zp_rcprewso = true %}{% endif %}{% if zp_avwcp %}{% assign zp_pldwc = '' %}{% else %}{% assign zp_pldwc = 'hidden' %}{% endif %} 
{%- if zp_main_product_available %}{% capture zp_psdint -%}{% capture zp_replace_integration %}<zp_product_soldout_integration></zp_product_soldout_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_soldout_integration>', '' | replace: '</zp_product_soldout_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture %}{% assign zp_pfcstg = zp_psdint %}{% assign zp_psdint = nil %}{% endif -%}{%- if zp_any_product_variant_available -%}{%- if zp_main_product_available %}{% capture zp_product_form_classes_list -%}{% if zp_intgrt_wboldqtbrk %}shapp_qb_prod{% endif %} {{ zp_product_form_classes }} {{ zp_product_form_custom_classes }}{%- endcapture %}{% assign zp_product_form_classes_list = zp_product_form_classes_list | strip %}{% else %}{% assign zp_product_form_classes_list = '' %}{% endif %}{% if zp_use_product_form_action %}{% assign zp_product_form_action_attr = '/cart/add' %}{% else %}{% assign zp_product_form_action_attr = nil %}{% endif %}{% if zp_use_product_form_id %}{% assign zp_pfiddfv = 'zp_product_form_' | append: zp_product_iterator | append: '_' | append: product.id %}{% assign zp_product_form_id_attr = zp_product_form_id_val | default: zp_pfiddfv %}{% else %}{% assign zp_product_form_id_attr = nil %}{% endif %}{% if zp_enable_subscription_widget %}{% assign zp_dbsbwat = nil %}{% else %}{% assign zp_dbsbwat = '' %}{% endif %}{% if zp_prdlpsbcren %}{% assign zp_prdlpsbcrfat = product.id %}{% else %}{% assign zp_prdlpsbcrfat = nil %}{% endif -%}{%- capture zp_pfoptg -%}{%- form 'product', product, id: zp_product_form_id_attr, action: zp_product_form_action_attr, class: zp_product_form_classes_list, data-zp-add-to-cart-form: '', data-zp-link-type: zp_product_link_type, data-productid: product.id, data-zp-redirect-with-url-params: zp_current_product_redirect_with_params, data-zp-disable-subscrptn-wdgt: zp_dbsbwat, data-loop-product-id: zp_prdlpsbcrfat -%}{% if zp_dshpwgtbpr and zp_product_max_price != blank %}{% if zp_product_max_price < 5000 or zp_product_max_price > 300000 %}{% assign zp_dshpwgt = false %}{% endif %}{% endif %}{% if zp_dshpwgt and zp_shw_vrntsslctr and zp_app_integrations contains 'shoppaywidget' %}{% if zp_shpwtginc %}{% capture zp_pfpmtcp %}{{ form | payment_terms }}{% endcapture %}{% else %}<div class="zpa-offset-bottom-sm">{{ form | payment_terms }}</div>{% endif %}{% if zp_pfpmtcp.size > 0 %}{% assign zp_unpfptrmscl = '' %}{% endif %}{% endif %}{% assign zp_pfcstg = '</form>' %}{% assign zp_product_form_classes = '' %}{% assign zp_product_form_classes_list = '' %}{% assign zp_unpcls = '' %}{% if zp_shw_vrntsslctr and zp_product_show_quantity %}{% assign zp_unqtycls = '' %}{% else %}{% assign zp_unqtycls = ' hidden' %}{% endif %}{% if zp_shw_vrntsslctr %}{% assign zp_incl_boldsnpts = true %}{% else %}{% assign zp_incl_boldsnpts = false %}{% endif %}{% if zp_incl_boldsnpts and zp_app_integrations contains 'productoptionsbybold' %}{% assign zp_intgrt_wboldprdopts = true %}{% else %}{% assign zp_intgrt_wboldprdopts = false %}{% endif %}{% if zp_incl_boldsnpts and zp_app_integrations contains 'quantitybreaksbybold' %}{% assign zp_intgrt_wboldqtbrk = true %}{% else %}{% assign zp_intgrt_wboldqtbrk = false %}{% endif %}{% if zp_app_integrations contains 'subscriptionsbybold' %}{% assign zp_incl_boldsbsrpns = true %}{% else %}{% assign zp_incl_boldsbsrpns = false %}{% endif %}{% assign zp_product_button_type = 'submit' %}{% capture zp_chbtn %}{{ form | payment_button }}{% endcapture %}{% if zp_current_entity_metafields['config'].type == 'json' %}{% assign zp_pdstds = zp_current_entity_metafields['config'].value['staticdiscounts'] %}{% else %}{% assign zp_pdstds = zp_current_entity_metafields['config']['staticdiscounts'] %}{% endif %}{% assign zp_cpstdd = zp_pdstds[zp_product_element_id] %}{% assign zp_current_product_static_discount_data = zp_cpstdd %}{%- if zp_rprfrtg and zp_prcpts contains zp_opcstg -%}{% assign zp_pwcst = true %}{%- else -%}{% assign zp_pwcst = false %}{%- endif -%}{%- if zp_shw_vrntsslctr or zp_bndblen -%}{% if zp_uiec %}{% assign zp_cscntprts = '' %}{% assign zp_pcsdtp = zp_csicf | append: ' ' | split: '|#cs#|' %}{% assign zp_pcspdt = '' %}{% for zp_prt in zp_pcsdtp %}{% assign zp_prts = zp_prt | append: ' ' | split: '|*cs*|' %}{% assign zp_cscntprts = zp_cscntprts | append: zp_prts[0] | strip | append: '|**|' %}{% assign zp_pcspdt = zp_pcspdt | append: zp_prts[1] | strip | append: '|**|' %}{% endfor %}{% assign zp_cscntprts = zp_cscntprts | split: '|**|' %}{% assign zp_pcspdt = zp_pcspdt | split: '|**|' %}{% elsif zp_rprfrmf %}{% assign zp_cscntprts = zp_cprst['crsslls'] | default: zp_cprst['bndl'] | default: nil %}{% else %}{% assign zp_cscntprts = zp_prcpts | split: zp_opcstg %}{% assign zp_prcpts = '' %}{% endif %}{% for zp_cscntprt in zp_cscntprts %}{% if zp_uiec %}{% assign zp_csblkmkr = zp_cscntprt %}{% assign zp_cssttngs = zp_pcspdt[forloop.index0] %}{% assign zp_cscntprtsz = 2 %}{% elsif zp_rprfrmf %}{% assign zp_csblkmkr = zp_cscntprt | first %}{% assign zp_cssttngs = zp_cscntprt | last %}{% assign zp_cscntprtsz = 2 %}{% else %}{% assign zp_cscnt = zp_cscntprt | append: ' ' | split: zp_clcstg %}{% assign zp_cscntprtsz = zp_cscnt | size %}{% endif %}{% if zp_cscntprtsz < 2 %}{% assign zp_prcpts = zp_prcpts | append: zp_cscntprt %}{% else %}{% assign zp_cspr = nil %}{% assign zp_cshndl = '' %}{% assign zp_csslcvrns = '' %}{% assign zp_csslvrnlst = '' %}{% assign zp_csblcid = '' %}{% assign zp_csimgsz = nil %}{% assign zp_csimgszjson = '[]' %}{% assign zp_csshwvrnlbl = nil %}{% assign zp_csvrntslvw = 'vt' %}{% assign zp_csvrntslofscls = nil %}{% assign zp_csdsctam = nil %}{% assign zp_cssvam = nil %}{% assign zp_crcspr = nil %}{% assign zp_crcscapr = nil %}{% assign zp_csslpr = nil %}{% assign zp_fmcspr = nil %}{% assign zp_csimg = 'no-image.gif' | img_url: '280x' %}{% assign zp_fmcsslpr = nil %}{% assign zp_fmcscapr = nil %}{% assign zp_fmcsdsctsvam = nil %}{% assign zp_fmcsdsctam = nil %}{% assign zp_csdsctamwsfx = nil %}{% assign zp_uncscls = ' hidden' %}{% assign zp_csunvbdsctcl = ' hidden' %}{% assign zp_uncsqtycls = ' hidden' %}{% assign zp_csupwrprcls = ' hidden' %}{% assign zp_csimgdatr = nil %}{% assign zp_csvrntcntr = nil %}{% assign zp_csqtycntr = nil %}{% assign zp_csmsgs = nil %}{% assign zp_csfsvr = nil %}{% assign zp_ccscvrs = nil %}{% assign zp_cselid = nil %}{% assign zp_csupblck = nil %}{% assign zp_csuplbl = '' %}{% assign zp_csatnlclscnt = '' %}{% assign zp_csavlbl = false %}{% assign zp_csldmnimg = true %}{% assign zp_csshwqtylbl = true %}{% assign zp_csdftqty = '1' %}{% assign zp_csimgtp = 'product' %}{% assign zp_csdsctdt = '' %}{% assign zp_csshwqty = true %}{% assign zp_cross_sell_view_type = 'crosssellproduct' %}{% assign zp_csprdfnd = false %}{% assign zp_csuntprtginc = false %}{% assign zp_csoptstgs = nil %}{% assign zp_csvrntslctrcls = nil %}{% assign zp_csimglzld = false %}{% assign zp_crvsrc = nil %}{% assign zp_csrvdt = nil %}{% assign zp_csrvss = nil %}{% assign zp_csrvwrpcl = 'disabled hidden' %}{% assign zp_csrvrtg = nil %}{% assign zp_csrvcnt = nil %}{% assign zp_csrvrtngtxt = '' %}{% assign zp_csshcrlen = false %}{% assign zp_csshcrlid = nil %}{% assign zp_csshcrlmfid = nil %}{% assign zp_csshcrlmdtpl = nil %}{% assign zp_csshcrltmbtpl = nil %}{% assign zp_csshcrlmds = '' %}{% assign zp_csshcrltmb = '' %}{% assign zp_csshcrljsn = '' %}{% assign zp_csvrntjsndt = nil %}{% assign zp_csimgsjsndt = nil %}{% assign zp_csimids = nil %}{% assign zp_csimtps = nil %}{% assign zp_csimarts = nil %}{% assign zp_csimgsdt = nil %}{% assign zp_cscrlsdt = nil %}{% assign zp_cscrmids = nil %}{% assign zp_cscrsss = nil %}{% assign zp_csldwc = 'hidden' %}{% assign zp_cspttl = 'products.product.unavailable' | t %}{% if zp_cspttl contains 'Translation missing' or zp_cspttl contains 'translation missing' %}{% assign zp_cspttl = "Unavailable" %}{% endif %}{% assign zp_cspdsc = 'products.product.unavailable' | t %}{% if zp_cspdsc contains 'Translation missing' or zp_cspdsc contains 'translation missing' %}{% assign zp_cspdsc = "Unavailable" %}{% endif %}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bndblen %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% if zp_uiec %}{% assign zp_pstgs = zp_cssttngs | append: ' ' | split: '|~cs~|' %}{% assign zp_pstgk = '' %}{% assign zp_pstgvs = '' %}{% for zp_pstg in zp_pstgs %}{% assign zp_pstgpt = zp_pstg | append: ' ' | split: '|:cs:|' %}{% if zp_pstgpt.size < 2 %}{% continue %}{% endif %}{% assign zp_pstgk = zp_pstgk | append: zp_pstgpt[0] | strip | append: '|::|' %}{% assign zp_pstgvs = zp_pstgvs | append: zp_pstgpt[1] | strip | append: '|::|' %}{% endfor %}{% assign zp_product_settings_keys = zp_pstgk | split: '|::|' %}{% assign zp_product_settings_values = zp_pstgvs | split: '|::|' %}{% elsif zp_rprfrmf %}{% assign zp_product_settings_keys = zp_cssttngs %}{% else %}{% if zp_cscnt[0] contains '<zpprdmrkp></zpprdmrkp>' %}{% assign zp_cscnt[0] = zp_cscnt[0] | remove: '<zpprdmrkp></zpprdmrkp>' %}{% assign zp_dscsmk = true %}{% else %}{% assign zp_dscsmk = false %}{% endif %}{% assign zp_cscntprts = zp_cscnt[0] | append: ' ' | split: '>' %}{% assign zp_pstgs = zp_cscntprts[0] %}{% assign zp_pstgt = zp_pstgs | append: '>' %}{% assign zp_cscntprts = zp_cscntprts | join: '>' | remove_first: zp_pstgt %}{% assign zp_pstgs = ' ' | append: zp_pstgs | split: ' data-' %}{% assign zp_pstgk = '' %}{% assign zp_pstgvs = '' %}{% for zp_pstg in zp_pstgs %}{% assign zp_pstgpt = zp_pstg | split: '=' %}{% if zp_pstgpt.size < 2 %}{% continue %}{% endif %}{% assign zp_prstnk = '' | append: zp_pstgpt[0] | strip %}{% if zp_prstnk.size < 1 %}{% continue %}{% endif %}{% assign zp_pstgk = zp_pstgk | append: zp_prstnk | append: '__zp1502150400__' %}{% assign zp_pstgss = zp_pstg | size %}{% assign zp_pstgks = '' | append: zp_pstgpt[0] | size | plus: 1 %}{% assign zp_prstnvl = '' | append: zp_pstg | slice: zp_pstgks, zp_pstgss | strip %}{% assign zp_pstgvli = zp_prstnvl | size | minus: 1 %}{% assign zp_pstgvfl = zp_prstnvl | first %}{% if zp_pstgvfl == '"' or zp_pstgvfl == "'" %}{% assign zp_prstnvl = zp_prstnvl | slice: 1, zp_pstgvli %}{% endif %}{% assign zp_pstgvli = zp_prstnvl | size | minus: 1 %}{% assign zp_pstgvll = zp_prstnvl | last %}{% if zp_pstgvll == '"' or zp_pstgvll == "'" %}{% assign zp_prstnvl = zp_prstnvl | slice: 0, zp_pstgvli %}{% endif %}{% assign zp_pstgvs = zp_pstgvs | append: zp_prstnvl | append: '__zp1502150400__' %}{% endfor %}{% assign zp_product_settings_keys = zp_pstgk | split: '__zp1502150400__' %}{% assign zp_product_settings_values = zp_pstgvs | split: '__zp1502150400__' %}{% assign zp_pstgs = nil %}{% assign zp_pstgt = nil %}{% assign zp_pstgpt = nil %}{% endif %}{% assign zp_unscssks = 'srtgs,vrnts,imgs,pcrls' | split: ',' %}{% for zp_product_setting_key_data in zp_product_settings_keys %}{% if zp_rprfrmf and zp_uiec != true %}{% assign zp_prstnk = zp_product_setting_key_data | first %}{% if zp_unscssks contains zp_prstnk %}{% assign zp_prstnvl = zp_product_setting_key_data | last %}{% else %}{% assign zp_prstnvl = zp_product_setting_key_data | last | strip %}{% endif %}{% else %}{% assign zp_prstnk = zp_product_setting_key_data %}{% assign zp_prstnvl = '' | append: zp_product_settings_values[forloop.index0] | strip %}{% endif %}{% case zp_prstnk %}{% when 'handle' %}{% assign zp_cshndl = zp_prstnvl %}{% when 'slctvrnt' %}{% assign zp_csslcvrns = zp_prstnvl %}{% assign zp_csslvrnlst = zp_prstnvl %}{% when 'qty' %}{% assign zp_csdftqty = zp_prstnvl %}{% when 'bid' %}{% assign zp_csblcid = zp_prstnvl %}{% when 'eid' %}{% assign zp_cselid = zp_prstnvl %}{% when 'imgtp' %}{% assign zp_csimgtp = zp_prstnvl %}{% when 'dscntdt' %}{% assign zp_csdsctdt = zp_prstnvl %}{% when 'srtgs' %}{% if zp_uiec %}{% assign zp_csrvdt = zp_prstnvl %}{% else %}{% assign zp_csrvdt = zp_prstnvl | json %}{% endif %}{% when 'srtgsl' %}{% assign zp_csrvss = zp_prstnvl %}{% when 'rtgsrc' %}{% assign zp_crvsrc = zp_prstnvl %}{% when 'vrntsv' %}{% assign zp_csvrntslvw = zp_prstnvl %}{% when 'vtp' %}{% assign zp_cross_sell_view_type = zp_prstnvl %}{% when 'optst' %}{% assign zp_csoptstgs = zp_prstnvl %}{% when 'vrntcls' %}{% assign zp_csvrntslctrcls = zp_prstnvl | url_escape %}{% when 'vrntoffcls' %}{% assign zp_csvrntslofscls = zp_prstnvl | url_escape %}{% when 'shwqty' %}{% if zp_prstnvl == 'false' or zp_prstnvl == '0' %}{% assign zp_csshwqty = false %}{% endif %}{% when 'mimgld' %}{% if zp_prstnvl == 'false' or zp_prstnvl == '0' %}{% assign zp_csldmnimg = false %}{% endif %}{% when 'shwqtylb' %}{% if zp_prstnvl == 'false' or zp_prstnvl == '0' %}{% assign zp_csshwqtylbl = false %}{% endif %}{% when 'shwvrntlb' %}{% if zp_prstnvl == 'false' or zp_prstnvl == '0' %}{% assign zp_csshwvrnlbl = false %}{% else %}{% assign zp_csshwvrnlbl = true %}{% endif %}{% when 'unprcincl' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_csuntprtginc = true %}{% endif %}{% when 'lzld' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_csimglzld = true %}{% endif %}{% when 'spcen' %}{% if zp_prstnvl == 'true' or zp_prstnvl == '1' %}{% assign zp_csshcrlen = true %}{% endif %}{% when 'spcid' %}{% assign zp_csshcrlid = zp_prstnvl %}{% when 'spcpid' %}{% assign zp_csshcrlmfid = zp_prstnvl %}{% when 'vrnts' %}{% if zp_uiec %}{% assign zp_csvrntjsndt = zp_prstnvl %}{% else %}{% assign zp_csvrntjsndt = zp_prstnvl | json %}{% endif %}{% when 'imgs' %}{% assign zp_csimgsjsndt = zp_prstnvl | json %}{% assign zp_csimgsdt = zp_prstnvl %}{% when 'imgsjsn' %}{% assign zp_csimgsjsndt = zp_prstnvl %}{% when 'imgids' %}{% assign zp_csimids = zp_prstnvl | append: ' ' | split: '|*i*|' %}{% when 'imgtps' %}{% assign zp_csimtps = zp_prstnvl | append: ' ' | split: '|*i*|' %}{% when 'imgarts' %}{% assign zp_csimarts = zp_prstnvl | append: ' ' | split: '|*i*|' %}{% when 'pcrls' %}{% assign zp_cscrlsdt = zp_prstnvl %}{% when 'pcrmids' %}{% assign zp_cscrmids = zp_prstnvl | append: ' ' | split: '|*c*|' %}{% when 'pcrsss' %}{% assign zp_cscrsss = zp_prstnvl | append: ' ' | split: '|*c*|' %}{% when 'lnktp' %}{% assign zp_cslnktp = zp_prstnvl %}{% endcase %}{% endfor %}{% if zp_rprfrtg and zp_csoptstgs != empty %}{% assign zp_csoptstgs = zp_csoptstgs | replace: '&quot;', '"' %}{% endif %}{% if zp_bndblen %}{% assign zp_csaflatr = 'bundle-product' %}{% else %}{% assign zp_csaflatr = 'cross-sell' %}{% endif %}{% if zp_cshndl.size > 0 %}{% assign zp_cspr = all_products[zp_cshndl] %}{% assign zp_cross_sell_id = '' | append: zp_cspr.id %}{% if zp_cross_sell_id.size > 0 %}{% assign zp_csprdfnd = true %}{% assign zp_cspttl = zp_cspr.title %}{% assign zp_cspttla = zp_cspttl | escape %}{% assign zp_cspdsc = zp_cspr.description %}{% assign zp_csqtyicrtr = 'products.product.quantity.increase' | t: product: zp_cspr.title %}{% if zp_csqtyicrtr contains 'Translation missing' or zp_csqtyicrtr contains 'translation missing' %}{% assign zp_csqtyicrtr = "Increase quantity" %}{% endif %}{% assign zp_csqtyinpttr = 'products.product.quantity.input_label' | t: product: zp_cspr.title %}{% if zp_csqtyinpttr contains 'Translation missing' or zp_csqtyinpttr contains 'translation missing' %}{% assign zp_csqtyinpttr = "Quantity" %}{% endif %}{% assign zp_csqtydcrtr = 'products.product.quantity.decrease' | t: product: zp_cspr.title %}{% if zp_csqtydcrtr contains 'Translation missing' or zp_csqtydcrtr contains 'translation missing' %}{% assign zp_csqtydcrtr = "Decrease quantity" %}{% endif %}{% assign zp_csavwcp = false %}{% if zp_ccscvrs == blank %}{% assign zp_ccscvrs = zp_cspr.variants %}{% endif %}{% if zp_csslcvrns.size < 1 %}{% assign zp_csslcvrns = zp_ccscvrs | map: 'id' | join: ',' | split: ',' %}{% endif %}{% if zp_csupvrfu %}{% assign zp_usvi = '' | append: zp_cspr.selected_variant.id %}{% else %}{% assign zp_usvi = '' %}{% endif %}{% assign zp_fvrs = '' %}{% assign zp_csfsvr = nil %}{% assign zp_cscsvr = nil %}{% assign zp_acsvrav = false %}{% assign zp_bvids = '' %}{% assign zp_bdvids = '' %}{% assign zp_product_min_price = nil %}{% assign zp_product_max_price = nil %}{% for zp_pvr in zp_ccscvrs %}{% assign zp_vid = '' | append: zp_pvr.id %}{% if zp_intgrt_wboldqtbrk and zp_integrate_with_bold_custom_pricing %}{% assign zp_bvids = zp_bvids | append: zp_vid | append: ',' %}{% assign zp_bdvid = zp_pvr.metafields.shappify_csp['csp_base'] | default: zp_pvr.metafields.shappify_qb['qb_parent'] | default: zp_pvr.metafields.shappify_bundle['bundle_parent'] | default: 'notassigned' %}{% assign zp_bdvids = zp_bdvids | append: zp_bdvid | append: ',' %}{% endif %}{% if zp_csupvrfu and zp_usvi == zp_vid and zp_csslcvrns contains zp_usvi %}{% assign zp_csfsvr = zp_pvr %}{% assign zp_cscsvr = zp_pvr %}{% endif %}{% if zp_csslcvrns contains zp_vid %}{% assign zp_fvrs = zp_fvrs | append: zp_vid | append: ',' %}{% if zp_csfsvr == nil %}{% assign zp_csfsvr = zp_pvr %}{% endif %}{% if zp_pvr.available %}{% assign zp_acsvrav = true %}{% endif %}{% if zp_product_min_price == blank or zp_product_min_price > zp_pvr.price %}{% assign zp_product_min_price = zp_pvr.price %}{% endif %}{% if zp_product_max_price == blank or zp_product_max_price < zp_pvr.price %}{% assign zp_product_max_price = zp_pvr.price %}{% endif %}{% endif %}{% endfor %}{% assign zp_csslcvrns = zp_fvrs | split: ',' %}{% if zp_csslcvrns.size < 1 %}{% assign zp_csslcvrns = zp_ccscvrs | map: 'id' | join: ',' | split: ',' %}{% assign zp_acsvrav = zp_cspr.available %}{% if zp_csupvrfu and zp_csslcvrns contains zp_usvi %}{% assign zp_csfsvr = zp_cspr.selected_variant %}{% assign zp_cscsvr = zp_cspr.selected_variant %}{% else %}{% assign zp_csfsvr = zp_ccscvrs | first %}{% endif %}{% endif %}{% unless zp_csfsvr.available %}{% assign zp_csfavvr = nil %}{% for zp_pvr in zp_ccscvrs %}{% assign zp_vid = '' | append: zp_pvr.id %}{% if zp_csslcvrns contains zp_vid and zp_pvr.available %}{% assign zp_csfavvr = zp_pvr %}{% break %}{% endif %}{% endfor %}{% unless zp_csfavvr == nil %}{% assign zp_csfsvr = zp_csfavvr %}{% endunless %}{% assign zp_csfavvr = nil %}{% endunless %}{% assign zp_vid = nil %}{% if zp_intgrt_wboldqtbrk and zp_integrate_with_bold_custom_pricing%}{% assign zp_bvids = zp_bvids | split: ',' %}{% assign zp_bdvids = zp_bdvids | split: ',' %}{% assign zp_bdvid = nil %}{% assign zp_vid = '' | append: zp_csfsvr.id %}{% for zp_pvr in zp_bdvids %}{% if zp_vid == zp_pvr %}{% assign zp_bdvid = zp_bvids[forloop.index0] %}{% break %}{% endif %}{% endfor %}{% if zp_bdvid and zp_bdvid != zp_vid %}{% assign zp_bitr = false %}{% for zp_pvr in zp_cspr.variants %}{% if zp_bitr %}{% break %}{% endif %}{% assign zp_pvid = '' | append: zp_pvr.id %}{% if zp_pvid == zp_bdvid %}{% assign zp_bitr = true %}{% if zp_intgrt_wboldqtbrk %}{% include 'bold-variant' with zp_pvr, hide_action: 'skip' %}{% endif %}{% assign zp_csfsvr = zp_pvr %}{% break %}{% endif %}{% endfor %}{% endif %}{% endif %}{% assign zp_crcspr = zp_csfsvr.price %}{% if zp_csfsvr.compare_at_price > zp_csfsvr.price %}{% assign zp_csavwcp = true %}{% endif %}{% if zp_csimgsdt != blank %}{% unless zp_uiec %}{% assign zp_csimtps = zp_csimgsdt | map: 'tp' %}{% endunless %}{% assign zp_umltpimgs = true %}{% else %}{% assign zp_csimtps = zp_csimgtp | split: ',' %}{% assign zp_umltpimgs = false %}{% endif %}{% assign zp_csimsd = '1080:--:280x' %}{% assign zp_csfim = zp_cspr.featured_image %}{% for zp_itp in zp_csimtps %}{% assign zp_img_tp = zp_itp | strip %}{% assign zp_pivsdp = '' %}{% assign zp_pimsdpr = '' | append: zp_csimsd | split: ':|~|:' %}{% assign zp_pimsls = '' %}{% assign zp_pimjs = '' %}{% assign zp_csimgsz = nil %}{% assign zp_fimss = 0 %}{% assign zp_limss = 0 %}{% for zp_imsd in zp_pimsdpr %}{% assign zp_imsdpr = '' | append: zp_imsd | split: ':--:' %}{% assign zp_imss = zp_imsdpr[0] %}{% assign zp_imrf = zp_imsdpr[1] %}{% if forloop.first %}{% assign zp_fimss = 0 | plus: zp_imss %}{% elsif forloop.last %}{% assign zp_limss = 0 | plus: zp_imss %}{% endif %}{% if zp_imss.size > 0 and zp_imrf.size > 0 %}{% assign zp_imssw = zp_imss | append: 'w' %}{% assign zp_pimsls = zp_pimsls | append: zp_imss | append: 'px' | append: '__zp1502150400__' %}{% assign zp_imsswjs = zp_imssw | json %}{% assign zp_imrfjs = zp_imrf | json %}{% assign zp_pimjs = zp_pimjs | append: '{"filter":' | append: zp_imrfjs | append: ',"screen":' | append: zp_imsswjs | append: '}' | append: '__zp1502150400__' %}{% assign zp_pivsdp = zp_pivsdp | append: zp_imssw | append: ':--:' | append: zp_imrf | append: ':|~|:' %}{% unless zp_csimgsz %}{% assign zp_csimgsz = zp_imrf %}{% endunless %}{% endif %}{% endfor %}{% unless zp_csimgsz %}{% assign zp_csimgsz = '1080x' %}{% endunless %}{% assign zp_csimgszjson = zp_pimjs | split: '__zp1502150400__' %}{% if zp_fimss > zp_limss %}{% assign zp_csimgszjson = zp_csimgszjson | reverse %}{% endif %}{% assign zp_csimsl = zp_pimsls | split: '__zp1502150400__' | join: ',' %}{% assign zp_csimgszjson = zp_csimgszjson | join: ',' | prepend: '[' | append: ']' %}{% assign zp_pivsdp = zp_pivsdp | split: ':|~|:' %}{% if zp_csfim.id %}{% assign zp_fsvid = '' | append: zp_csfsvr.image.id | strip %}{% if zp_img_tp == 'variant' and zp_shw_vrntsslctr == true and zp_fsvid.size > 0 %}{% assign zp_csfim = zp_csfsvr.image %}{% endif %}{% assign zp_csimsav = true %}{% if zp_umltpimgs %}{% if zp_uiec %}{% assign zp_csimarpv = 0 | plus: zp_csimarts[forloop.index0] %}{% else %}{% assign zp_csimarpv = 0 | plus: zp_csimgsdt[forloop.index0]['arat'] %}{% endif %}{% unless zp_csimarpv > 0 %}{% assign zp_csimarpv = nil %}{% endunless %}{% else %}{% assign zp_csimarpv = nil %}{% endif %}{% assign zp_pimsss = '' %}{% for zp_imsd in zp_pivsdp %}{% assign zp_imsdpr = '' | append: zp_imsd | split: ':--:' %}{% assign zp_imssw = zp_imsdpr[0] %}{% assign zp_imrf = zp_imsdpr[1] %}{% assign zp_imen = '' | append: zp_csfim.src | split: '.' | last %}{% if zp_csimarpv != blank and zp_imen != 'svg' %}{% assign zp_imcw = zp_imrf | split: 'x' | first %}{% assign zp_imcw = 0 | plus: zp_imcw %}{% if zp_csfim.width < zp_imcw %}{% assign zp_imcw = zp_csfim.width %}{% endif %}{% assign zp_imch = zp_imcw | divided_by: zp_csimarpv | floor %}{% if zp_csfim.height < zp_imch %}{% assign zp_imch = zp_csfim.height %}{% assign zp_imcw = zp_imch | times: zp_csimarpv | floor %}{% endif %}{% assign zp_imurlwf = zp_csfim | image_url: width: zp_imcw, height: zp_imch, crop: 'center' %}{% else %}{% assign zp_imurlwf = zp_csfim | img_url: zp_imrf %}{% endif %}{% assign zp_pimsss = zp_pimsss | append: zp_imurlwf | append: ' ' | append: zp_imssw | append: '__zp1502150400__' %}{% endfor %}{% assign zp_csimss = zp_pimsss | split: '__zp1502150400__' %}{% if zp_fimss > zp_limss %}{% assign zp_csimss = zp_csimss | reverse %}{% endif %}{% assign zp_csimss = zp_csimss | join: ', ' %}{% assign zp_csimen = '' | append: zp_csfim.src | split: '.' | last %}{% if zp_csimarpv != blank and zp_csimen != 'svg' %}{% assign zp_csimcw = '280x' | split: 'x' | first %}{% assign zp_csimcw = 0 | plus: zp_csimcw %}{% if zp_csfim.width < zp_csimcw %}{% assign zp_csimcw = zp_csfim.width %}{% endif %}{% assign zp_csimch = zp_csimcw | divided_by: zp_csimarpv | floor %}{% if zp_csfim.height < zp_csimch %}{% assign zp_csimch = zp_csfim.height %}{% assign zp_csimcw = zp_csimch | times: zp_csimarpv | floor %}{% endif %}{% assign zp_csdim = zp_csfim | image_url: width: zp_csimcw, height: zp_csimch, crop: 'center' %}{% else %}{% assign zp_csdim = zp_csfim | img_url: 'master' %}{% assign zp_csimcw = nil %}{% assign zp_csimch = nil %}{% endif %}{% if zp_csimcw != blank %}{% assign zp_csimg = zp_csfim | image_url: width: zp_csimcw, height: zp_csimch, crop: 'center' %}{% else %}{% assign zp_csimg = zp_csfim | img_url: zp_csimgsz %}{% endif %}{% else %}{% assign zp_csimcw = nil %}{% assign zp_csimch = nil %}{% assign zp_csdim = zp_eimsrc %}{% assign zp_csimg = zp_eimsrc %}{% endif %}{% if zp_img_tp == 'custom' or zp_csfim.id == blank %}{% assign zp_csimllav = false %}{% assign zp_csimsav = false %}{% assign zp_csimssav = false %}{% else %}{% assign zp_csimllav = true %}{% assign zp_csimssav = true %}{% endif %}{% if zp_csfim.id %}{% assign zp_dimdan = 'data-zp-default-image' %}{% else %}{% assign zp_dimdan = 'src' %}{% endif %}{% capture zp_csimgdatr %}{% if zp_csimglzld %}{% assign zp_pimlap = 'data-' %}{% else %}{% assign zp_pimlap = '' %}{% endif %}{% assign zp_pimen = '' | append: zp_csfim.src | split: '.' | last %}{% if zp_csimcw != blank and zp_pimen != 'svg' %}{% assign zp_pimwa = zp_csimcw %}{% assign zp_pimha = zp_csimch %}{% assign zp_imcw = '140x' | split: 'x' | first %}{% assign zp_imcw = 0 | plus: zp_imcw %}{% if zp_csfim.width < zp_imcw %}{% assign zp_imcw = zp_csfim.width %}{% endif %}{% assign zp_imch = zp_imcw | divided_by: zp_csimarpv | floor %}{% if zp_csfim.height < zp_imch %}{% assign zp_imch = zp_csfim.height %}{% assign zp_imcw = zp_imch | times: zp_csimarpv | floor %}{% endif %}{% assign zp_pimls = zp_csfim | image_url: width: zp_imcw, height: zp_imch, crop: 'center' %}{% assign zp_pimsc = zp_csfim | image_url: width: zp_pimwa, height: zp_pimha, crop: 'center' %}{% else %}{% assign zp_pimwa = zp_csfim.width %}{% assign zp_pimha = zp_csfim.height %}{% assign zp_pimls = zp_csfim | img_url: '140x' %}{% assign zp_pimsc = zp_csfim | img_url: 'original' %}{% endif %}{% if zp_csimglzld and zp_csimllav %} width="{{ zp_pimwa }}" height="{{ zp_pimha }}" decoding="async" loading="lazy" src="{{ zp_pimsc }}"{% endif %}{% if zp_csimssav %} {% if zp_csimglzld and zp_csimllav %}data-sizes="auto" sizes="{{ zp_csimsl }}"{% else %}sizes="{{ zp_csimsl }}"{% endif %}{% endif %}{% if zp_csimsav and zp_csldmnimg %} {{ zp_pimlap }}srcset="{{ zp_csimss }}"{% endif %} data-zp-product-id="{{ zp_cspr.id }}" data-zp-{% if zp_bndblen %}bundle-product{% else %}cross-sell{% endif %}-image data-zp-{% if zp_bndblen %}bundle-product{% else %}cross-sell{% endif %}-image-type="{{ zp_img_tp }}" data-zp-image-id="{{ zp_csfim.id }}" {{ zp_dimdan }}="{{ zp_csdim }}"{% endcapture %}{% if zp_umltpimgs %}{% if zp_uiec %}{% assign zp_imid = zp_csimids[forloop.index0] | strip %}{% else %}{% assign zp_imid = zp_csimgsdt[forloop.index0]['id'] %}{% endif %}{% capture zp_img_prp %}zps_mcsimgdt_{{ zp_csblkmkr }}_{{ zp_imid }}_{% endcapture %}{% capture zp_imalpn %}zps_csimgalt_{{ zp_csblkmkr }}_{{ zp_imid }}_{% endcapture %}{% assign zp_imalpv = '' | append: zp_csfim.alt | strip_html | strip_newlines | escape %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_img_prp, zp_csimgdatr | replace: zp_imalpn, zp_imalpv %}{% endif %}{% endfor %}{% if zp_csshcrlen or zp_cscrlsdt != blank %}{% if zp_cscrlsdt != blank %}{% if zp_uiec %}{% assign zp_pcrldtl = zp_cscrlsdt | append: ' ' | split: '|*c*|' %}{% else %}{% assign zp_pcrldtl = zp_cscrlsdt %}{% endif %}{% assign zp_pcrlrvr = true %}{% else %}{% assign zp_pcrldtl = '1' | split: ',' %}{% assign zp_pcrlrvr = false %}{% endif %}{% for zp_pcrldti in zp_pcrldtl %}{% if zp_pcrlrvr %}{% if zp_uiec %}{% assign zp_csshcrlid = zp_pcrldti | strip %}{% assign zp_pcrshsrs = zp_cscrsss[forloop.index0] | strip %}{% else %}{% assign zp_csshcrlid = zp_pcrldti['spcid'] %}{% assign zp_pcrshsrs = '' | append: zp_pcrldti['spsrcs'] %}{% endif %}{% if zp_uiec %}{% assign zp_csshcrlmfid = zp_cscrmids[forloop.index0] | strip %}{% else %}{% assign zp_csshcrlmfid = zp_pcrldti['spcpid'] %}{% endif %}{% assign zp_pcrlbmkr = zp_csblkmkr | append: '_' | append: zp_csshcrlid %}{% else %}{% assign zp_pcrlbmkr = zp_csblkmkr %}{% endif %}{% capture zp_cdvdbgn %}<zpcspcim_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zpcspcim_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{% assign zp_pscit = zp_tpsct[0] %}{% capture zp_cdvdbgn %}<zpcspcv_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zpcspcv_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{% assign zp_pscvt = zp_tpsct[0] %}{% capture zp_cdvdbgn %}<zpcspcti_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zpcspcti_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{% assign zp_psctit = zp_tpsct[0] %}{% capture zp_cdvdbgn %}<zpcspctv_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zpcspctv_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{% assign zp_pstvt = zp_tpsct[0] %}{% capture zp_csshcrlmdtpl %}<zpcsctw_{{ zp_pcrlbmkr }}>{% capture zp_cdvdbgn %}<zpcsctw_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zpcsctw_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{{ zp_tpsct[0] }}</zpcsctw_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_csshcrltmbtpl %}<zpcsctwt_{{ zp_pcrlbmkr }}>{% capture zp_cdvdbgn %}<zpcsctwt_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_cdvden %}</zpcsctwt_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_tpfct = zp_current_entity_content | split: zp_cdvdbgn %}{% assign zp_tpsct = zp_tpfct[1] | split: zp_cdvden %}{{ zp_tpsct[0] }}</zpcsctwt_{{ zp_pcrlbmkr }}>{% endcapture %}{% capture zp_csshcrlmds %}{% assign zp_ssc = zp_pcrshsrs | split: ',' %}{% if zp_cspr.media.size > 0 %}{% assign zp_fsvfm = zp_csfsvr.featured_media %}{% if zp_csfsvr.available and zp_fsvfm != blank %}{% case zp_fsvfm.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_fsvfm | img_url: '100x100' %}{% assign zp_imgorg = zp_fsvfm | img_url: 'original' %}{% assign zp_imgalt = zp_fsvfm.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_ssc %}{{ zp_fsvfm | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_pscit | replace: 'zps_medwid', zp_fsvfm.width| replace: 'zps_medheig', zp_fsvfm.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% when 'external_video' %}{% assign video = zp_fsvfm | external_video_tag %}{{ zp_pscvt | replace: 'zps_medvid', video }}{% when 'video' %}{% assign video = zp_fsvfm | video_tag: controls: true %}{{ zp_pscvt | replace: 'zps_medvid', video }}{% endcase %}{% endif %}{% for zp_pmd in zp_cspr.media %}{% if zp_pmd.id == zp_fsvfm.id %}{% continue %}{% endif %}{% case zp_pmd.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_pmd | img_url: '100x100' %}{% assign zp_imgorg = zp_pmd | img_url: 'original' %}{% assign zp_imgalt = zp_pmd.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_ssc %}{{ zp_pmd | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_pscit | replace: 'zps_medwid', zp_pmd.width| replace: 'zps_medheig', zp_pmd.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% when 'external_video' %}{% assign video = zp_pmd | external_video_tag %}{{ zp_pscvt | replace: 'zps_medvid', video }}{% when 'video' %}{% assign video = zp_pmd | video_tag: controls: true %}{{ zp_pscvt | replace: 'zps_medvid', video }}{% endcase %}{% endfor %}{% else %}{% assign zp_imgsml = zp_cspr.media | img_url: '100x100' %}{% assign zp_imgorg = zp_cspr.media | img_url: 'original' %}{% assign zp_imgalt = zp_cspr.media.alt | escape %}{% capture zp_srcszimgs %}{% for zp_srcszct in zp_ssc %}{{ zp_cspr.media | img_url: zp_srcszct }} {{ zp_srcszct | replace: 'x', 'w' }}{% unless forloop.last %},{% endunless %}{% endfor %}{% endcapture %}{{ zp_pscit | replace: 'zps_medwid', zp_cspr.media.width| replace: 'zps_medheig', zp_cspr.media.height | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medimurl', zp_imgorg | replace: 'zps_medalt', zp_imgalt | replace: 'zps_medimgsrc', zp_srcszimgs }}{% endif %}{% endcapture %}{% capture zp_csshcrltmb %}{% assign zp_mp = 0 %}{% if zp_cspr.media.size > 0 %}{% assign zp_fsvfm = zp_csfsvr.featured_media %}{% if zp_csfsvr.available and zp_fsvfm != blank %}{% case zp_fsvfm.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_fsvfm | img_url: '100x100' %}{% assign zp_imgalt = zp_fsvfm.alt | escape %}{{ zp_psctit | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_mp | replace: 'zps_medalt', zp_imgalt }}{% when 'external_video' %}{{ zp_pstvt | replace: 'zps_medpos', zp_mp }}{%when 'video' %}{{ zp_pstvt | replace: 'zps_medpos', zp_mp }}{% endcase %}{% assign zp_mp = zp_mp | plus: 1 %}{% endif %}{% for zp_pmd in zp_cspr.media %}{% if zp_pmd.id == zp_fsvfm.id %}{% continue %}{% endif %}{% case zp_pmd.media_type %}{% when 'image' %}{% assign zp_imgsml = zp_pmd | img_url: '100x100' %}{% assign zp_imgalt = zp_pmd.alt | escape %}{{ zp_psctit | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_mp | replace: 'zps_medalt', zp_imgalt }}{% when 'external_video' %}{{ zp_pstvt | replace: 'zps_medpos', zp_mp }}{%when 'video' %}{{ zp_pstvt | replace: 'zps_medpos', zp_mp }}{% endcase %}{% assign zp_mp = zp_mp | plus: 1 %}{% endfor %}{% else %}{% assign zp_imgsml = zp_cspr.media | img_url: '100x100' %}{% assign zp_imgalt = zp_cspr.media.alt | escape %}{{ zp_psctit | replace: 'zps_medsurl', zp_imgsml | replace: 'zps_medpos', zp_mp | replace: 'zps_medalt', zp_imgalt }}{% endif %}{% endcapture %}{% capture zp_csshcrljsn %}{% assign zp_ob = "{" %}{% assign zp_cb = "}" %}{% assign zp_nac = false %}<script type="application/json" data-zp-shopify-carousel="{{ zp_csshcrlid }}">{{ zp_ob }}"id":{{ '' | append: zp_csshcrlid | json }},"mfid":{{ zp_csshcrlmfid | json }},"role":"shopify_carousel","media":[{% if zp_cspr.media.size > 0 %}{% assign zp_fsvfm = zp_csfsvr.featured_media %}{% if zp_csfsvr.available and zp_fsvfm != blank %}{% assign zp_nac = true %}{{ zp_ob }}{% case zp_fsvfm.media_type %}{% when 'image' %}"id":"{{ zp_fsvfm.id }}","type":"image","src":"{{ zp_fsvfm | img_url: 'original' }}","alt":{{ '' | append: zp_fsvfm.alt | escape | json }}{% when 'external_video' %}"id":"{{ zp_fsvfm.id }}","type":"video","content":"{{ zp_fsvfm | external_video_tag | escape }}"{% when 'video' %}"id":"{{ zp_fsvfm.id }}","type":"video","content":"{{ zp_fsvfm | video_tag: controls: true | escape }}"{% endcase %}{{ zp_cb }}{% endif %}{% for zp_pmd in zp_cspr.media %}{% if zp_pmd.id == zp_fsvfm.id %}{% continue %}{% endif %}{% if zp_nac %},{% endif %}{{ zp_ob }}{% case zp_pmd.media_type %}{% when 'image' %}"id":"{{ zp_pmd.id }}","type":"image","src":"{{ zp_pmd | img_url: 'original' }}","alt":{{ '' | append: zp_pmd.alt | escape | json }}{% when 'external_video' %}"id":"{{ zp_pmd.id }}","type":"video","content":"{{ zp_pmd | external_video_tag | escape }}"{% when 'video' %}"id":"{{ zp_pmd.id }}","type":"video","content":"{{ zp_pmd | video_tag: controls: true | escape }}"{% endcase %}{{ zp_cb }}{% assign zp_nac = true %}{% endfor %}{% else %}{{ zp_ob }}"id":"{{ zp_cspr.media.id }}","type":"image_default","src":"{{ zp_cspr.media | img_url: 'original' }}","alt":{{ '' | append: zp_cspr.media.alt | escape | json }}{{ zp_cb }}{% endif %}]{{ zp_cb }}</script>{% endcapture %}{% if zp_csshcrltmbtpl != blank %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_csshcrltmbtpl, zp_csshcrltmb %}{% endif %}{% if zp_csshcrlmdtpl != blank %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_csshcrlmdtpl, zp_csshcrlmds %}{% endif %}{% capture zp_pcrlbmkr %}<zpcsscj_{{ zp_pcrlbmkr }}></zpcsscj_{{ zp_pcrlbmkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_pcrlbmkr, zp_csshcrljsn %}{% endfor %}{% assign zp_pcrldtl = nil %}{% endif %}{% if zp_prdso or zp_acsvrav %}{% assign zp_csprunpcls = '' %}{% if zp_csfsvr.compare_at_price > zp_csfsvr.price %}{% assign zp_crcscapr = zp_csfsvr.compare_at_price %}{% else %}{% assign zp_crcscapr = nil %}{% endif %}{% assign zp_csdsctam_recalculate = true %}{% assign zp_csdsctam_money = false %}{% assign zp_csdsctam_prefix = '' %}{% assign zp_csdsctam_suffix = '' %}{% if zp_csdsctdt contains ':' %}{% assign zp_csdsctdt = zp_csdsctdt | split: ':' %}{% assign zp_sdd = true %}{% else %}{% assign zp_sdd = false %}{% endif %}{% if zp_csdsctdt.size > 1 %}{% assign zp_csdsctam = 0 | plus: zp_csdsctdt[0] | abs %}{% assign zp_product_discount_type = '' | append: zp_csdsctdt[1] %}{% if zp_product_discount_type == 'percentage' or zp_product_discount_type == 'percentage_dynamic' %}{% assign zp_pdap = '' | append: zp_csdsctam | split: '.' %}{% assign zp_pddp = '' | append: zp_pdap[1] | default: '0' %}{% assign zp_pddp = 0 | plus: zp_pddp %}{% unless zp_pddp > 0 %}{% assign zp_csdsctam = zp_pdap[0] %}{% endunless %}{% assign zp_csdsctam = 0 | plus: zp_csdsctam | at_most: 100 %}{% assign zp_cssvam = zp_crcspr | times: zp_csdsctam | divided_by: 100 | at_most: zp_crcspr %}{% assign zp_csdsctam_recalculate = false %}{% assign zp_csdsctam_suffix = '%' %}{% elsif zp_product_discount_type == 'compare_price' %}{% if zp_crcscapr %}{% assign zp_csdsctam = zp_crcscapr | minus: zp_crcspr %}{% else %}{% assign zp_csdsctam = 0 %}{% assign zp_csunvbdsctcl = 'hidden' %}{% endif %}{% assign zp_cssvam = zp_csdsctam %}{% else %}{% assign zp_csdsctam = zp_csdsctam | times: 100 %}{% assign zp_csdsctam = '' | append: zp_csdsctam | split: '.' | first | default: 0 %}{% assign zp_csdsctam = 0 | plus: zp_csdsctam | at_most: zp_crcspr %}{% assign zp_cssvam = zp_csdsctam %}{% assign zp_csdsctam_money = true %}{% endif %}{% if zp_product_discount_type == 'compare_price' %}{% assign zp_csslpr = zp_crcspr %}{% else %}{% assign zp_csslpr = zp_crcspr | minus: zp_cssvam %}{% endif %}{% assign zp_csdsctam_prefix = '-' %}{% else %}{% assign zp_csslpr = zp_crcspr %}{% assign zp_csunvbdsctcl = 'hidden' %}{% assign zp_csdsctam = 0 %}{% endif %}{% if zp_sdd %}{% assign zp_csdsctdt = zp_csdsctdt | join: ':' %}{% endif %}{% if zp_product_calculate_bundle_price %}{% assign zp_crcspr = zp_crcspr | times: zp_csdftqty %}{% if zp_crcscapr %}{% assign zp_crcscapr = zp_crcscapr | times: zp_csdftqty %}{% endif %}{% assign zp_csslpr = zp_csslpr | times: zp_csdftqty %}{% if zp_cssvam %}{% assign zp_cssvam = zp_cssvam | times: zp_csdftqty %}{% endif %}{% if zp_csdsctam_recalculate %}{% assign zp_csdsctam = zp_csdsctam | times: zp_csdftqty %}{% endif %}{% endif %}{% assign zp_fmcspr = zp_crcspr | money %}{% assign zp_fmcscapr = zp_crcscapr | money %}{% assign zp_fmcsslpr = zp_csslpr | money %}{% if zp_csdsctam_money %}{% assign zp_fmcsdsctam = zp_csdsctam | money %}{% else %}{% assign zp_fmcsdsctam = zp_csdsctam %}{% endif %}{% assign zp_csdsctamwsfx = zp_fmcsdsctam | append: zp_csdsctam_suffix %}{% assign zp_fmcsdsctam = zp_fmcsdsctam | prepend: zp_csdsctam_prefix | append: zp_csdsctam_suffix %}{% if zp_cssvam %}{% assign zp_fmcsdsctsvam = zp_cssvam | money %}{% endif %}{% if zp_unit_price_enabled %}{% if zp_csuntprtginc %}{% if zp_csfsvr.unit_price_measurement %}{% assign zp_csupwrprcls = '' %}{% else %}{% assign zp_csupwrprcls = ' hidden' %}{% endif %}{% capture zp_csuplbl %}{% assign zp_translation = 'products.product.unit_price_label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.price.unit_price' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Unit Price" %}{% endif %}{% endif %}{{ zp_translation }}{% endcapture %}{% capture zp_csupblck %}<span data-zp-cross-sell-unit-price>{% if zp_csfsvr.unit_price_measurement %}{{ zp_csfsvr.unit_price | money }}{% endif %}</span><span> / </span><span data-zp-cross-sell-up-base-unit>{% if zp_csfsvr.unit_price_measurement %}{% if zp_csfsvr.unit_price_measurement.reference_value != 1 %}{{ zp_csfsvr.unit_price_measurement.reference_value }}{% endif %}{{ zp_csfsvr.unit_price_measurement.reference_unit }}{% endif %}</span>{% endcapture %}{% else %}{% capture zp_csupblck %}{% if zp_unit_price_enabled %}<div class="zpa-offset-bottom-xs{% unless zp_csfsvr.unit_price_measurement %} hidden{% endunless %}" data-zp-cross-sell-unit-price-wrapper><span data-zp-cross-sell-unit-price>{% if zp_csfsvr.unit_price_measurement %}{{ zp_csfsvr.unit_price | money }}{% endif %}</span><span> / </span><span data-zp-cross-sell-up-base-unit>{% if zp_csfsvr.unit_price_measurement %}{% if zp_csfsvr.unit_price_measurement.reference_value != 1 %}{{ zp_csfsvr.unit_price_measurement.reference_value }}{% endif %}{{ zp_csfsvr.unit_price_measurement.reference_unit }}{% endif %}</span></div>{% endif %}{% endcapture %}{% assign zp_csvrntcntr = zp_csupblck | append: zp_csvrntcntr %}{% endif %}{% endif %}{% else %}{% assign zp_csprunpcls = ' hidden' %}{% endif %}{% if zp_csavwcp %}{% assign zp_csldwc = '' %}{% else %}{% assign zp_csldwc = 'hidden' %}{% endif %}{% if zp_acsvrav %}{% assign zp_csavlbl = true %}{% assign zp_uncscls = '' %}{% assign zp_csunvbdsctcl = '' %}{% assign zp_acspct = zp_acspct | plus: 1 %}{% capture zp_csvrntcntr %}{% if zp_shw_vrntsslctr %}<select id="{{ zp_cross_sell_selector }}" class="hidden noreplace" data-productid="{{ zp_cspr.id }}" data-zp-{{ zp_csaflatr }}-field="id">{% assign zp_fvid = '' | append: zp_csfsvr.id %}{% for zp_csvr in zp_ccscvrs %}{% assign zp_vid = '' | append: zp_csvr.id %}{% unless zp_csslcvrns contains zp_vid %}{% continue %}{% endunless %}{% if zp_cspr.has_only_default_variant %}{% assign zp_csvnm = zp_cspr.title %}{% else %}{% assign zp_csvnm = zp_cspr.title | append: ' - ' | append: zp_csvr.title %}{% endif %}{% if zp_csvr.available %}{% if zp_fvid == zp_vid %}{% assign zp_osa = 'selected="selected" ' %}{% else %}{% assign zp_osa = '' %}{% endif %}<option {{ zp_osa }}value="{{ zp_csvr.id }}" data-zp-var-name="{{ zp_csvnm | escape }}">{{ zp_csvr.title }} - {{ zp_csvr.price | money_with_currency }}</option>{% else %}<option disabled="disabled" value="{{ zp_csvr.id }}" data-zp-var-name="{{ zp_csvnm | escape }}">{{ zp_csvr.title }} - {% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</option>{% endif %}{% endfor %}</select>{% endif %}{% endcapture %}{% if zp_csshwqty %}{% assign zp_uncsqtycls = '' %}{% else %}{% assign zp_uncsqtycls = 'hidden' %}{% endif %}{% capture zp_csqtycntr %}{% if zp_bndblen %}{% assign zp_csqtyfatr = 'bundle-product' %}{% else %}{% assign zp_csqtyfatr = 'cross-sell' %}{% endif %}{% if zp_csshwqty %}{% unless zp_csshwqtylbl == false %}<label for="{{ zp_cross_sell_selector }}-quantity">{% assign zp_translation = 'products.product.quantity.label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.quantity' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{% endif %}{% assign zp_last_translation_char = zp_translation | strip | split: '' | last %}{% if zp_last_translation_char == ':' %}{{ zp_translation }}{% else %}{{ zp_translation }}:{% endif %}</label>{% endunless %}<div class="zpa-quantity-block" data-zp-{{ zp_csqtyfatr }}-quantity-el data-product-wrapper-id="{{ zp_cselid }}"><button class="zpa-btn-custom zpa-quantity-btn" type="button" title="{% assign zp_translation = 'products.product.quantity.decrease' | t: product: zp_cspr.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Decrease quantity" %}{% endif %}{{ zp_translation }}" data-zp-{{ zp_csqtyfatr }}-decrease-qty><svg class="zpa-quantity-icon" width="14px" height="14px"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconDecrease"></use></svg></button><input id="{{ zp_cross_sell_selector }}-quantity" class="zpa-quantity-field xs" value="{{ zp_csdftqty }}" maxlength="3" size="3" type="tel" inputmode="numeric" required pattern="^[1-9][0-9]*" title="{% assign zp_translation = 'products.product.quantity.input_label' | t: product: zp_cspr.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{{ zp_translation }}" data-zp-{{ zp_csqtyfatr }}-quantity data-zp-{{ zp_csqtyfatr }}-field="quantity"><button class="zpa-btn-custom zpa-quantity-btn" type="button" title="{% assign zp_translation = 'products.product.quantity.increase' | t: product: zp_cspr.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Increase quantity" %}{% endif %}{{ zp_translation }}" data-zp-{{ zp_csqtyfatr }}-increase-qty><svg class="zpa-quantity-icon" width="14px" height="14px"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconIncrease"></use></svg></button></div>{% else %}<input id="{{ zp_cross_sell_selector }}-quantity" type="hidden" value="{{ zp_csdftqty }}" data-zp-{{ zp_csqtyfatr }}-quantity data-zp-{{ zp_csqtyfatr }}-field="quantity">{% endif %}{% endcapture %}{% capture zp_csmsgs %}{% if zp_csfsvr.available %}{% if zp_bndblen %}{% assign zp_cross_sell_inventory_message_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_inventory_message_attr = 'cross-sell' %}{% endif %}<div data-zp-{{ zp_cross_sell_inventory_message_attr }}-inventory-messages class="zpa-{{ zp_csaflatr }}-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs hidden"></div>{% else %}{% if zp_bndblen %}{% assign zp_cross_sell_inventory_message_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_inventory_message_attr = 'cross-sell' %}{% endif %}<div data-zp-{{ zp_cross_sell_inventory_message_attr }}-inventory-messages class="zpa-{{ zp_csaflatr }}-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs">{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</div>{% endif %}{% if zp_shw_vrntsslctr %}<div class="zpa-product-message-wrap"><span class="zpa-product-message zpa-{% if zp_bndblen %}bundle-product{% else %}cross-sell-product{% endif %}--message hidden" data-zp-{{ zp_csaflatr }}-messages data-zp-success-message="{{ zp_patcm }}"></span></div>{% endif %}{% endcapture %}{% if zp_bndblen %}{% assign zp_cssdd = zp_pdstds[zp_csblkmkr] %}{% if zp_cssdd != blank and zp_cpstdd['only_cross_sell'] == blank %}{% assign zp_csatnlclscnt = zp_csatnlclscnt | append: '<input type="hidden" data-zp-bundle-product-discount-field="discount" value="' | append: zp_cssdd['code'] | append: '">' %}{% endif %}{% endif %}{% else %}{% capture zp_csmsgs %}{% if zp_bndblen %}{% assign zp_cross_sell_inventory_message_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_inventory_message_attr = 'cross-sell' %}{% endif %}<div data-zp-{{ zp_cross_sell_inventory_message_attr }}-inventory-messages class="zpa-{{ zp_csaflatr }}-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs">{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</div>{% endcapture %}{% endif %}{% capture zp_csjsnincnt %}{% if zp_intgrt_wboldqtbrk %}{% capture zp_product_json %}{% include 'bold-product', product: zp_cspr, output: 'json' %}{% endcapture %}{% if zp_product_json contains 'Could not find asset ' %}{{ zp_cspr | json | default: 'null' }}{% else %}{{ zp_product_json | strip | default: 'null' }}{% endif %}{% assign zp_product_json = nil %}{% else %}{{ zp_cspr | json | default: 'null' }}{% endif %}{% endcapture %}{% capture zp_cscfgpr %}{"product":{{ zp_csjsnincnt }}{% if zp_csslvrnlst != '' %},"selectedVariants":"{{ zp_csslvrnlst | url_escape }}"{% endif %},"discountData":"{{ zp_csdsctdt }}","selector":"{{ zp_cross_sell_selector }}","available":{{ zp_csavlbl }},"blockId":"{{ zp_csblcid | default: '' }}","elementId":"{{ zp_cselid | default: '' }}","imageSize":"{{ '' | append: zp_csimgsz | strip | default: 'master' | url_escape }}","imageSrcSetData":{{ zp_csimgszjson }}{% if zp_csshwvrnlbl != nil %},"showVariantLabel":"{{ zp_csshwvrnlbl }}"{% endif %}{% if zp_csvrntjsndt == blank %},"variantSelectorView":"{{ zp_csvrntslvw }}"{% endif %}{% if zp_csvrntjsndt != blank %},"variantSelectors":{{ zp_csvrntjsndt }}{% endif %}{% if zp_csimgsdt != blank %},"images":{{ zp_csimgsjsndt }}{% endif %},"defaultQty":{{ 0 | plus: zp_csdftqty }}{% if zp_csoptstgs != blank %},"optionsSettings":{{ zp_csoptstgs }}{% endif %}{% if zp_csvrntslctrcls != blank %},"variantLabelClasses":"zp {{ zp_csvrntslctrcls }}"{% endif %}{% if zp_csvrntslofscls != blank %},"variantOffsetClasses":"{{ zp_csvrntslofscls }}"{% endif %}{% if zp_crvsrc != blank %},"reviewsSource":{{ zp_crvsrc | json }}{% endif %}{% if zp_csrvdt != blank %},"starRatings":{{ zp_csrvdt }}{% endif %} {% if zp_cslnktp != blank %},"linkType":"{{ zp_cslnktp }}"{% endif %}}{% endcapture %}{% if zp_cscfg.size > 1 %}{% assign zp_cscfgprspr = ',' %}{% else %}{% assign zp_cscfgprspr = '' %}{% endif %}{% assign zp_cscfg = '' | append: zp_cscfg | append: zp_cscfgprspr | append: zp_cscfgpr %}{% assign zp_cscfgpr = nil %}{% capture zp_ccsphrpr %}zps_pp{{ zp_csblkmkr }}_{% endcapture %}{% capture zp_ccsurrpr %}zps_pu{{ zp_csblkmkr }}_{% endcapture %}{% assign zp_csphpr = routes.root_url | append: '/products/' | replace: '//', '/' | append: zp_cspr.handle %}{% assign zp_csurpr = shop.url | append: zp_csphpr %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_ccsphrpr, zp_csphpr | replace: zp_ccsurrpr, zp_csurpr %}{% else %}{% assign zp_cspr = nil %}{% capture zp_csmsgs %}{% if zp_bndblen %}{% assign zp_cross_sell_inventory_message_attr = 'bundle-product' %}{% else %}{% assign zp_cross_sell_inventory_message_attr = 'cross-sell' %}{% endif %}<div data-zp-{{ zp_cross_sell_inventory_message_attr }}-inventory-messages class="zpa-{{ zp_csaflatr }}-sold-out__label zpa-text-center zpa-font-b zpa-text-uppercase zpa-offset-top-xs">{% assign zp_translation = 'products.product.unavailable' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Unavailable" %}{% endif %}{{ zp_translation }}</div>{% endcapture %}{% if zp_bndblen %}{% if zp_cscfg.size > 1 %}{% assign zp_cscfgprspr = ',' %}{% else %}{% assign zp_cscfgprspr = '' %}{% endif %}{% assign zp_cscfg = '' | append: zp_cscfg | append: zp_cscfgprspr | append: '{"product":null,"selector":"' | append: zp_cross_sell_selector | append: '","elementId":"' | append: zp_cselid | append: '"}' %}{% endif %}{% if zp_csimgsdt != blank %}{% unless zp_uiec %}{% assign zp_csimtps = zp_csimgsdt | map: 'tp' %}{% endunless %}{% assign zp_umltpimgs = true %}{% else %}{% assign zp_csimtps = zp_csimgtp | split: ',' %}{% assign zp_umltpimgs = false %}{% endif %}{% for zp_itp in zp_csimtps %}{% if zp_umltpimgs %}{% if zp_uiec %}{% assign zp_imid = zp_csimids[forloop.index0] | strip %}{% else %}{% assign zp_imid = zp_csimgsdt[forloop.index0]['id'] %}{% endif %}{% capture zp_img_prp %}zps_mcsimgdt_{{ zp_csblkmkr }}_{{ zp_imid }}_{% endcapture %}{% capture zp_imalpn %}zps_csimgalt_{{ zp_csblkmkr }}_{{ zp_imid }}_{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_img_prp, '' | replace: zp_imalpn, '' %}{% endif %}{% endfor %}{% endif %}{% if zp_csrvss != blank %}{% assign zp_rvwsrc = zp_csrvss | split: ',' %}{% assign zp_cptr_rplc_src = true %}{% elsif zp_cssttngs contains 'srtgs' %}{% assign zp_rvwsrc = zp_cssttngs['srtgs'] | map: 'rtgsrc' | uniq %}{% assign zp_cptr_rplc_src = true %}{% else %}{% assign zp_rvwsrc = zp_cssttngs['rtgsrc'] | split: ' ' %}{% assign zp_cptr_rplc_src = false %}{% endif %}{% for zp_rvs_src in zp_rvwsrc %}{% if zp_rvs_src == blank %}{% continue %}{% endif %}{% assign zp_csrvrtg = nil %}{% assign zp_csrvcnt = nil %}{% assign zp_csrvrtngtxt = '' %}{% if zp_cspr.id > 0 %}{% case zp_rvs_src %}{% when 'yotpo' %}{% assign zp_prvwdt = zp_cspr.metafields.yotpo %}{% assign zp_prvwcnt = 0 | plus: zp_prvwdt.reviews_count %}{% if zp_prvwcnt > 0 %}{% assign zp_csrvrtg = 0 | plus: zp_prvwdt.reviews_average %}{% assign zp_csrvcnt = 0 | plus: zp_prvwdt.reviews_count %}{% endif %}{% when 'loox' %}{% assign zp_prvwdt = zp_cspr.metafields.loox %}{% assign zp_prvwcnt = 0 | plus: zp_prvwdt.num_reviews %}{% if zp_prvwcnt > 0 %}{% assign zp_csrvrtg = 0 | plus: zp_prvwdt.avg_rating %}{% assign zp_csrvcnt = 0 | plus: zp_prvwdt.num_reviews %}{% endif %}{% when 'spr' %}{% assign zp_prvwdt = zp_cspr.metafields.spr.reviews %}{% if zp_prvwdt %}{% assign zp_prvwdt = ' ' | append: zp_prvwdt | append: ' ' %}{% assign zp_prvwrtgdt = zp_prvwdt | split: '"ratingValue":' %}{% assign zp_prvwrtgdt = zp_prvwrtgdt[1] | strip | slice: 0, 100 | remove: '"' | remove: "'" | split: '' %}{% assign zp_prvwavchr = '1234567890.' | split: '' %}{% assign zp_csrvrtg = '' %}{% for zp_prvwrchr in zp_prvwrtgdt %}{% if zp_prvwavchr contains zp_prvwrchr %}{% assign zp_csrvrtg = zp_csrvrtg | append: zp_prvwrchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_csrvrtg = 0 | plus: zp_csrvrtg %}{% unless zp_csrvrtg > 0 %}{% assign zp_csrvrtg = nil %}{% endunless %}{% assign zp_prvwrtgdt = zp_prvwdt | split: '"reviewCount":' %}{% if zp_prvwrtgdt.size < 2 %}{% assign zp_prvwrtgdt = zp_prvwdt | split: '"ratingCount":' %}{% endif %}{% assign zp_prvwrtgdt = zp_prvwrtgdt[1] | strip | slice: 0, 100 | remove: '"' | remove: "'" | split: '' %}{% assign zp_prvwavchr = '1234567890' | split: '' %}{% assign zp_csrvcnt = '' %}{% for zp_prvwrchr in zp_prvwrtgdt %}{% if zp_prvwavchr contains zp_prvwrchr %}{% assign zp_csrvcnt = zp_csrvcnt | append: zp_prvwrchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_csrvcnt = 0 | plus: zp_csrvcnt %}{% unless zp_csrvcnt > 0 %}{% assign zp_csrvcnt = nil %}{% endunless %}{% endif %}{% when 'opinew' %}{% assign zp_prvwdt = zp_cspr.metafields.opinew_metafields %}{% assign zp_prvwcnt = 0 | plus: zp_prvwdt.reviews_count %}{% if zp_prvwcnt > 0 %}{% assign zp_csrvrtg = 0 | plus: zp_prvwdt.reviews_average %}{% assign zp_csrvcnt = 0 | plus: zp_prvwdt.reviews_count %}{% endif %}{% when 'judgeme' %}{% assign zp_prvwdt = zp_cspr.metafields.judgeme.badge %}{% if zp_prvwdt %}{% assign zp_prvwdt = ' ' | append: zp_prvwdt | append: ' ' %}{% assign zp_prvwrtgdt = zp_prvwdt | split: ' data-average-rating=' %}{% assign zp_prvwrtgdt = zp_prvwrtgdt[1] | strip | split: ' ' | first | strip | remove: '"' | remove: "'" | split: '' %}{% assign zp_prvwavchr = '1234567890.' | split: '' %}{% assign zp_csrvrtg = '' %}{% for zp_prvwrchr in zp_prvwrtgdt %}{% if zp_prvwavchr contains zp_prvwrchr %}{% assign zp_csrvrtg = zp_csrvrtg | append: zp_prvwrchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_csrvrtg = 0 | plus: zp_csrvrtg %}{% unless zp_csrvrtg > 0 %}{% assign zp_csrvrtg = nil %}{% endunless %}{% assign zp_prvwrtgdt = zp_prvwdt | split: ' data-number-of-reviews=' %}{% assign zp_prvwrtgdt = zp_prvwrtgdt[1] | strip | split: ' ' | first | strip | remove: '"' | remove: "'" | split: '' %}{% assign zp_prvwavchr = '1234567890' | split: '' %}{% assign zp_csrvcnt = '' %}{% for zp_prvwrchr in zp_prvwrtgdt %}{% if zp_prvwavchr contains zp_prvwrchr %}{% assign zp_csrvcnt = zp_csrvcnt | append: zp_prvwrchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_csrvcnt = 0 | plus: zp_csrvcnt %}{% unless zp_csrvcnt > 0 %}{% assign zp_csrvcnt = nil %}{% endunless %}{% endif %}{% endcase %}{% endif %}{% assign zp_prvwdt = nil %}{% assign zp_prvwrtgdt = nil %}{% assign zp_prvwcnt = nil %}{% if zp_csrvcnt != empty and zp_csrvcnt > 0 %}{% assign zp_csrvwrpcl = '' %}{% else %}{% assign zp_csrvwrpcl = 'disabled hidden' %}{% endif %}{% if zp_cptr_rplc_src %}{% assign zp_rvwmkr = zp_csblkmkr | append: '_' | append: zp_rvs_src %}{% else %}{% assign zp_rvwmkr = zp_csblkmkr %}{% endif %}{% if zp_csrvrtg != empty and zp_csrvrtg > 0 %}{% assign zp_csrvrtngtxt = '' | append: zp_csrvrtg %}{% if zp_csrvrtngtxt contains '.' %}{% assign zp_prvwrtgdt = zp_csrvrtg | split: '.' %}{% if zp_prvwrtgdt[1].size > 1 %}{% assign zp_prtgdtdcm = '' | append: zp_prvwrtgdt[1] | split: '' %}{% assign zp_csrvrtngtxt = zp_prvwrtgdt[0] | append: '.' | append: zp_prtgdtdcm[0] %}{% endif %}{% assign zp_prvwrtgdt = nil %}{% assign zp_prtgdtdcm = nil %}{% else %}{% assign zp_csrvrtngtxt = zp_csrvrtngtxt | append: '.0' %}{% endif %}{% assign zp_prvwtrtng = zp_csrvrtg %}{% for zp_itridx in (1..5) %}{% if zp_prvwtrtng > 0 and zp_prvwtrtng <= 0.5 %}{% assign zp_csrtstrcl = 'zpa-star-half' %}{% elsif zp_prvwtrtng > 0.5 %}{% assign zp_csrtstrcl = 'zpa-star-full' %}{% else %}{% assign zp_csrtstrcl = '' %}{% endif %}{% assign zp_prtgsitr = 'zps_rvic_' | append: zp_itridx %}{% assign zp_prvwtrtng = zp_prvwtrtng | minus: 1 %}{% if zp_rprfrmf %}{% capture zp_crrpi %}zps_rvic_{{ zp_itridx }}_{{ zp_rvwmkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csrtstrcl %}{% else %}{% assign zp_prcpts = zp_prcpts | replace: zp_prtgsitr, zp_csrtstrcl %}{% endif %}{% endfor %}{% else %}{% for zp_itridx in (1..5) %}{% assign zp_prtgsitr = 'zps_rvic_' | append: zp_itridx %}{% if zp_rprfrmf %}{% capture zp_crrpi %}zps_rvic_{{ zp_itridx }}_{{ zp_rvwmkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, "" %}{% else %}{% assign zp_prcpts = zp_prcpts | replace: zp_prtgsitr, "" %}{% endif %}{% endfor %}{% endif %}{% capture zp_crrpi %}<zpcsrvavg_{{ zp_rvwmkr }}></zpcsrvavg_{{ zp_rvwmkr }}>{% endcapture %}{% capture zp_crrpi2 %}<zpcsrvcnt_{{ zp_rvwmkr }}></zpcsrvcnt_{{ zp_rvwmkr }}>{% endcapture %}{% capture zp_crrpi3 %}zps_csunvavlblrv_{{ zp_rvwmkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_csrvrtngtxt | replace: zp_crrpi2, zp_csrvcnt | replace: zp_crrpi3, zp_csrvwrpcl %}{% endfor %}{% endif %}{% unless zp_csprdfnd %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_empty_wrapper_selector %}{% endunless %}{% if zp_rprfrmf %}{% capture zp_csvtn %}<zpcsvrnts_{{ zp_csblkmkr }}></zpcsvrnts_{{ zp_csblkmkr }}>{% endcapture %}{% unless zp_current_entity_content contains zp_csvtn %}{% assign zp_csatnlclscnt = zp_csatnlclscnt | append: zp_csvrntcntr %}{% endunless %}{% capture zp_csqtn %}<zpcsqtyctrl_{{ zp_csblkmkr }}></zpcsqtyctrl_{{ zp_csblkmkr }}>{% endcapture %}{% unless zp_current_entity_content contains zp_csqtn %}{% assign zp_csatnlclscnt = zp_csatnlclscnt | append: zp_csqtycntr %}{% endunless %}{% if zp_csatnlclscnt.size > 0 %}{% assign zp_csatnlclscnt = '<div style="display:none!important">' | append: zp_csatnlclscnt | append: '</div>' %}{% endif %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi2 %}zps_csimgsrc_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi3 %}<zpcsslprc_{{ zp_csblkmkr }}></zpcsslprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi4 %}<zpprscst_{{ zp_csblkmkr }}></zpprscst_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi5 %}zpprscsa_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi6 %}<zpprscsdes_{{ zp_csblkmkr }}></zpprscsdes_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi7 %}<zpcsprc_{{ zp_csblkmkr }}></zpcsprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi8 %}<zpcscompareprc_{{ zp_csblkmkr }}></zpcscompareprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi9 %}<zpcssvdprc_{{ zp_csblkmkr }}></zpcssvdprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi10 %}<zpcsdcsamnt_{{ zp_csblkmkr }}></zpcsdcsamnt_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi11 %}<zpcsildcs_{{ zp_csblkmkr }}></zpcsildcs_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi12 %}zps_csunvavlblprdcl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi13 %}zps_csunprprdcl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi14 %}zps_csunavlbldccl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi15 %}zps_csimgdattr_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi16 %}zps_csunvavlblqtycl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi17 %}<zpcsvrnts_{{ zp_csblkmkr }}></zpcsvrnts_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi18 %}<zpcsvrnts_{{ zp_csblkmkr }}></zpcsvrnts_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi19 %}<zpcsqtyctrl_{{ zp_csblkmkr }}></zpcsqtyctrl_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi20 %}<zpcspmsg_{{ zp_csblkmkr }}></zpcspmsg_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi21 %}<zpcsunprc_{{ zp_csblkmkr }}></zpcsunprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi22 %}<zpcsunplb_{{ zp_csblkmkr }}></zpcsunplb_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi23 %}zps_unvavlblcsunp_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi24 %}zps_unvavlblbndilcl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi25 %}<zpcsaccc_{{ zp_csblkmkr }}></zpcsaccc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi26 %}zps_qtyicrtl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi27 %}zps_qtyinttl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi28 %}zps_qtydcrtl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi29 %}zps_elid_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi30 %}zps_qtyattr_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi31 %}<zpcsctw_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi32 %}</zpcsctw_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi33 %}<zpcspcim_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi34 %}</zpcspcim_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi35 %}<zpcspcv_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi36 %}</zpcspcv_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi37 %}<zpcsctwt_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi38 %}</zpcsctwt_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi39 %}<zpcspcti_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi40 %}</zpcspcti_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi41 %}<zpcspctv_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi42 %}</zpcspctv_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi43 %}zps_ldc_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi44 %}<zpdcsprdct_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi45 %}</zpdcsprdct_{{ zp_csblkmkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_wrapper_selector | replace: zp_crrpi2, zp_csimg | replace: zp_crrpi3, zp_fmcsslpr | replace: zp_crrpi4, zp_cspttl | replace: zp_crrpi5, zp_cspttla | replace: zp_crrpi6, zp_cspdsc | replace: zp_crrpi7, zp_fmcspr | replace: zp_crrpi8, zp_fmcscapr | replace: zp_crrpi9, zp_fmcsdsctsvam | replace: zp_crrpi10, zp_fmcsdsctam | replace: zp_crrpi11, zp_csdsctamwsfx | replace: zp_crrpi12, zp_uncscls | replace: zp_crrpi13, zp_csprunpcls | replace: zp_crrpi14, zp_csunvbdsctcl | replace: zp_crrpi15, zp_csimgdatr | replace: zp_crrpi16, zp_uncsqtycls | replace_first: zp_crrpi17, zp_csvrntcntr | replace: zp_crrpi18, '' | replace: zp_crrpi19, zp_csqtycntr | replace: zp_crrpi20, zp_csmsgs | replace: zp_crrpi21, zp_csupblck | replace: zp_crrpi22, zp_csuplbl | replace: zp_crrpi23, zp_csupwrprcls | replace: zp_crrpi24, zp_unbndpiwrcl | replace: zp_crrpi25, zp_csatnlclscnt | replace: zp_crrpi26, zp_csqtyicrtr | replace: zp_crrpi27, zp_csqtyinpttr | replace: zp_crrpi28, zp_csqtydcrtr | replace: zp_crrpi29, zp_cselid | replace: zp_crrpi30, '' | replace: zp_crrpi31, '' | replace: zp_crrpi32, '' | replace: zp_crrpi33, '' | replace: zp_crrpi34, '' | replace: zp_crrpi35, '' | replace: zp_crrpi36, '' | replace: zp_crrpi37, '' | replace: zp_crrpi38, '' | replace: zp_crrpi39, '' | replace: zp_crrpi40, '' | replace: zp_crrpi41, '' | replace: zp_crrpi42, '' | replace: zp_crrpi43, zp_csldwc | replace: zp_crrpi44, '' | replace: zp_crrpi45, '' %}{% else %}{% assign zp_cscntprts = zp_cscntprts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_csimg | replace: '<zpcsslprc></zpcsslprc>', zp_fmcsslpr | replace: '<zpcsprc></zpcsprc>', zp_fmcspr | replace: '<zpcscompareprc></zpcscompareprc>', zp_fmcscapr | replace: '<zpcssvdprc></zpcssvdprc>', zp_fmcsdsctsvam | replace: '<zpcsdcsamnt></zpcsdcsamnt>', zp_fmcsdsctam | replace: 'zps_csunvavlblprdcl', zp_uncscls | replace: 'zps_csunprprdcl', zp_csprunpcls | replace: 'zps_csunavlbldccl', zp_csunvbdsctcl | replace: 'zps_csimgdattr', zp_csimgdatr | replace: 'zps_csunvavlblqtycl', zp_uncsqtycls | replace_first: '<zpcsvrnts></zpcsvrnts>', zp_csvrntcntr | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_csqtycntr | replace: '<zpcspmsg></zpcspmsg>', zp_csmsgs | replace: '<zpcsunprc></zpcsunprc>', zp_csupblck | replace: 'zps_unvavlblcsunp', zp_csupwrprcls | replace: 'zps_unvavlblbndilcl', zp_unbndpiwrcl %}{% assign zp_prcpts = zp_prcpts | append: zp_cscntprts | append: zp_cscnt[1] %}{% endif %}{% endif %}{% endfor %}{% if zp_acspct > 0 %}{% assign zp_uncswrcl = '' %}{% endif %}{% if zp_cscfg.size > 0 %}{% assign zp_cscfg = '[' | append: zp_cscfg | append: ']' %}{% if zp_bndblen %}{% if zp_uiec %}{% assign zp_bndbcfg = zp_bjc | default: 'null' %}{% assign zp_bndh = zp_bdh | default: 'null' %}{% else %}{% assign zp_bndbcfg = zp_cprst['bndlc'] | default: nil | json %}{% assign zp_bndh = zp_cprst['bndlce'] | default: nil | json %}{% endif %}{% assign zp_adpinstg = zp_adpinstg | append: ',"bundleConfig":{"rules":' | append: zp_bndbcfg | append: ',"hash":' | append: zp_bndh %}{% if zp_cprst['bndlel'] != blank %}{% for zp_bndecgfpr in zp_cprst['bndlel'] %}{% assign zp_bndestg = zp_bndecgfpr | last %}{% assign zp_adpinstg = zp_adpinstg | append: ',"' | append: zp_bndestg['t'] | append: '":' %}{% if zp_bndestg['t'] == 'title' %}{% assign zp_bndbcfg = zp_bndestg['dt'] | default: product.title | strip_html | strip_newlines | strip %}{% else %}{% assign zp_bndbcfg = zp_bndestg['dt'] %}{% endif %}{% assign zp_bndbcfg = zp_bndbcfg | default: nil | json %}{% assign zp_adpinstg = zp_adpinstg | append: zp_bndbcfg %}{% endfor %}{% else %}{% assign zp_bndbcfg = zp_cprst['bndlttl'] | default: '' | strip_html | strip_newlines | strip | json %}{% assign zp_adpinstg = zp_adpinstg | append: ',"title":' | append: zp_bndbcfg %}{% endif %}{% assign zp_adpinstg = zp_adpinstg | append: '}' %}{% assign zp_bndbcfg = nil %}{% endif %}{% endif %}{%- endif -%} 
{%- capture zp_additional_property_integration_content -%}{% capture zp_replace_integration %}<zp_additional_property_integration></zp_additional_property_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_additional_property_integration>', '' | replace: '</zp_additional_property_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{% if zp_integrate_with_recharge and zp_enable_subscription_widget and zp_pcintrcsbcr == false %}{% assign zp_recharge_wrapper_content = '<div id="' | append: zp_product_selector | append: '-recharge-wrapper" class="zpa-offset-bottom-xs zpa-recharge-wrapper" data-zp-recharge-product="' | append: product.id | append: '" data-zp-wrapper="' | append: zp_product_selector | append: '"></div>' %}{% assign zp_additional_property_integration_content = zp_additional_property_integration_content | prepend: zp_recharge_wrapper_content %}{% endif %} 
{%- if zp_main_product_available -%}{%- capture zp_variant_integration_content -%}{% capture zp_replace_integration %}<zp_variant_integration></zp_variant_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_variant_integration>', '' | replace: '</zp_variant_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{%- else -%}{% assign zp_variant_integration_content = '' %}{%- endif -%}
{%- if zp_main_product_available -%}{%- capture zp_property_integration_content -%}{% if zp_incl_boldsbsrpns %}{% include 'bsub-widget' %}{% endif %}{% if zp_intgrt_wboldprdopts %}<div class="bold_options" data-product-id="{{ product.id }}"></div>{% endif %}{% capture zp_replace_integration %}<zp_property_integration></zp_property_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_property_integration>', '' | replace: '</zp_property_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{%- else -%}{% assign zp_property_integration_content = '' %}{%- endif -%}
{%- if zp_main_product_available -%}{%- capture zp_product_json_integration_content -%}{% capture zp_replace_integration %}<zp_product_json_integration>{% if zp_intgrt_wboldqtbrk %}{% capture zp_product_json %}{% include 'bold-product', product: product, output: 'json' %}{% endcapture %}{% if zp_product_json contains 'Could not find asset ' %}{{ product | json | default: 'null' }}{% else %}{{ zp_product_json | strip | default: 'null' }}{% endif %}{% assign zp_product_json = nil %}{% else %}{{ product | json | default: 'null' }}{% endif %}</zp_product_json_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_json_integration>', '' | replace: '</zp_product_json_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{%- else -%}{% assign zp_product_json_integration_content = '' %}{%- endif -%}
{%- if zp_main_product_available -%}{%- capture zp_product_footer_integration_content -%}{% capture zp_replace_integration %}<zp_product_footer_integration></zp_product_footer_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_footer_integration>', '' | replace: '</zp_product_footer_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture -%}{%- else -%}{% assign zp_product_footer_integration_content = '' %}{%- endif -%}{%- if zp_main_product_available %}{% capture zp_pvrntcntr %}{% if zp_shw_vrntsslctr %}{% if zp_pvrntslwrclen %}<div class="{{ zp_pvrntslwrcl }}">{% endif %}{{ zp_additional_property_integration_content }}<select class="hidden noreplace" id="{{ zp_product_selector }}" name="id" data-productid="{{ product.id }}" aria-hidden="true">{% assign zp_fvid = '' | append: zp_first_selected_variant.id %}{% for variant in zp_current_product_custom_variants %}{% assign zp_vid = '' | append: variant.id %}{% unless zp_selected_variants contains zp_vid %}{% continue %}{% endunless %}{{ zp_variant_integration_content }}{% if zp_intgrt_wboldqtbrk %}{% include 'bold-variant' with variant, hide_action: 'skip' %}{% endif %}{% if variant.available %}{% if zp_fvid == zp_vid %}{% assign zp_osa = 'selected="selected" ' %}{% else %}{% assign zp_osa = '' %}{% endif %}<option {{ zp_osa }}value="{{ variant.id }}">{{ variant.title }} - {{ variant.price | money_with_currency }}</option>{% else %}<option disabled="disabled" value="{{ variant.id }}">{{ variant.title }} - {% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}</option>{% endif %}{% endfor %}</select>{{ zp_property_integration_content }}{% if zp_pvrntslwrclen %}</div>{% endif %}{% endif %}{% endcapture %}{% endif -%}{%- capture zp_pqtycntr -%}{% if zp_shw_vrntsslctr %}{% if zp_product_show_quantity %}{% unless zp_product_show_quantity_label == false %}<label class="{% if zp_pvrntslv == 'hz' %}{{ 'zpa-buybox__label zpa-offset-right-sm zpa-buybox__label zp' | append: zp_pqslcl | strip }}{% else %}{{ 'zp' | append: zp_pqslcl | strip }}{% endif %}" for="{{ zp_product_selector }}-quantity">{% assign zp_translation = 'products.product.quantity.label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.quantity' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{% endif %}{% assign zp_last_translation_char = zp_translation | strip | split: '' | last %}{% if zp_last_translation_char == ':' %}{{ zp_translation }}{% else %}{{ zp_translation }}:{% endif %}</label>{% endunless %}<div class="{% if zp_pvrntslv == 'hz' %}zpa-quantity-block{% else %}zpa-quantity-block{% endif %}" data-product-wrapper-id="{{ zp_product_element_id }}" data-zp-quantity-el><button class="zpa-btn-custom zpa-quantity-btn" type="button" title="{% assign zp_translation = 'products.product.quantity.decrease' | t: product: product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Decrease quantity" %}{% endif %}{{ zp_translation }}" data-zp-product-decrease-qty><svg class="zpa-quantity-icon" width="14px" height="14px"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconDecrease"></use></svg></button><input id="{{ zp_product_selector }}-quantity" class="zpa-quantity-field xs" value="{{ zp_product_default_quantity }}" maxlength="3" size="3" type="tel" inputmode="numeric" required pattern="^[1-9][0-9]*" name="quantity" title="{% assign zp_translation = 'products.product.quantity.input_label' | t: product: product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Quantity" %}{% endif %}{{ zp_translation }}" data-zp-product-quantity><button class="zpa-btn-custom zpa-quantity-btn" type="button" title="{% assign zp_translation = 'products.product.quantity.increase' | t: product: product.title %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Increase quantity" %}{% endif %}{{ zp_translation }}" data-zp-product-increase-qty><svg class="zpa-quantity-icon" width="14px" height="14px"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#iconIncrease"></use></svg></button></div>{% else %}<input id="{{ zp_product_selector }}-quantity" type="hidden" name="quantity" value="{{ zp_product_default_quantity }}" data-zp-product-quantity>{% endif %}{% endif %}{%- endcapture -%}{% capture zp_pqtytgn %}zps_qtyattr_{{ zp_pblkmkr }}{% endcapture %}{% if zp_current_entity_content contains zp_pqtytgn %}{% assign zp_pqtycntr = zp_pqtycntr | remove: ' name="quantity"' | remove: ' required ' %}{% endif %} 
{%- if zp_main_product_available %}{% capture zp_pbtnintgr -%}{%- if zp_intgrt_wboldqtbrk %}<div class="shappify-qty-msg">{{ bold_selected_or_first_available_variant.metafields.shappify_qb.pricing_html }}</div>{% endif -%}{% capture zp_replace_integration %}<zp_product_info_integration></zp_product_info_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_product_info_integration>', '' | replace: '</zp_product_info_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture %}{% else %}{% assign zp_pbtnintgr = '' %}{% endif -%}{%- capture zp_pbtnmsg -%}{% if zp_shw_vrntsslctr %}<div class="{{ 'zpa-product-message__wrapper ' | append: zp_pmsgwcl | strip }}"><span class="{{ 'zpa-product-message hidden product-success zp ' | append: zp_patccl | strip }}" data-zp-product-messages data-zp-success-message="{{ zp_patcm }}"></span></div>{% endif %}{%- endcapture -%}
{%- if zp_main_product_available %}{% capture zp_product_additional_integrations -%}{% if zp_intgrt_wboldprdopts %}{% assign zp_incl_boldcmnsnpt = true %}<script>window.BOLD.common.Shopify.saveProduct({{ product.handle | json }},{{ product.id | json }},{{ product | json }});{% for variant in product.variants %}{% assign csp_metafield_namespace = variant.id | prepend: "csp" %}window.BOLD.common.Shopify.saveVariant({{ variant.id | json }},{variant:{{ variant | json }},inventory_quantity:{{ variant.inventory_quantity | json }},product_id:{{ product.id | json }},product_handle:{{ product.handle | json }},price:{{ variant.price | json }},variant_title:{{ variant.title | json }},group_id:"{{ variant.metafields.bold_rp.rp_group_id }}",csp_metafield:{{ product.metafields[csp_metafield_namespace] | json }}});{% endfor %}</script>{% endif %}{% if zp_intgrt_wboldqtbrk == true %}{% include "bold-product" with product, hide_action: "break" %}{% if bold_hidden_product %}{% break %}{% endif %}{% endif %}{% capture zp_replace_integration %}<zp_additional_integration></zp_additional_integration>{% endcapture %}{{ zp_replace_integration | replace: '<zp_additional_integration>', '' | replace: '</zp_additional_integration>', '' | strip }}{%- assign zp_replace_integration = '' -%}{%- endcapture %}{% else %}{% assign zp_product_additional_integrations = '' %}{% endif -%}{% if zp_cpstdd != blank %}{% if zp_cpstdd['only_cross_sell'] %}{% if zp_bndblen %}{% assign zp_pdscfnatr = 'data-zp-bundle-product-discount-field' %}{% else %}{% assign zp_pdscfnatr = 'data-zp-cross-sell-discount-field' %}{% endif %}{% assign zp_pdscfnatr = zp_pdscfnatr | append: ' data-zp-name' %}{% else %}{% assign zp_pdscfnatr = 'name' %}{% endif %}{% assign zp_cpstdschf = '<input type="hidden" ' | append: zp_pdscfnatr | append: '="discount" value="' | append: zp_cpstdd['code'] | append: '">' %}{% capture zp_paclcntmk %}<zpprdaccc_{{ zp_pblkmkr }}></zpprdaccc_{{ zp_pblkmkr }}>{% endcapture %}{% if zp_current_entity_content contains zp_paclcntmk %}{% assign zp_padclcnt = zp_padclcnt | append: zp_cpstdschf %}{% else %}{% assign zp_pqtycntr = zp_pqtycntr | append: zp_cpstdschf %}{% endif %}{% endif %}{% assign zp_pdstds = nil %}{%- endform -%}{%- endcapture -%}{% assign zp_pfoptg = zp_pfoptg | remove: '</form>' | strip %}{%- else -%}{% if zp_product_found %}{% assign zp_unplnbcls = '' %}{% assign zp_unpbwrcls = ' hidden' %}{% endif %}{%- endif -%}{% if zp_prdso or zp_any_product_variant_available %}{% assign zp_prunpcls = '' %}{% if zp_first_selected_variant.compare_at_price > zp_first_selected_variant.price %}{% assign zp_current_product_compare_at_price = zp_first_selected_variant.compare_at_price %}{% else %}{% assign zp_current_product_compare_at_price = nil %}{% endif %}{% assign zp_product_discount_amount_recalculate = true %}{% assign zp_product_discount_amount_money = false %}{% assign zp_product_discount_amount_prefix = '' %}{% assign zp_product_discount_amount_suffix = '' %}{% if zp_product_discount_data contains ':' %}{% assign zp_product_discount_data = zp_product_discount_data | split: ':' %}{% assign zp_sdd = true %}{% else %}{% assign zp_sdd = false %}{% endif %}{% if zp_product_discount_data.size > 1 %}{% assign zp_product_discount_amount = 0 | plus: zp_product_discount_data[0] | abs %}{% assign zp_product_discount_type = '' | append: zp_product_discount_data[1] %}{% if zp_product_discount_type == 'percentage' or zp_product_discount_type == 'percentage_dynamic' %}{% assign zp_pdap = '' | append: zp_product_discount_amount | split: '.' %}{% assign zp_pddp = '' | append: zp_pdap[1] | default: '0' %}{% assign zp_pddp = 0 | plus: zp_pddp %}{% unless zp_pddp > 0 %}{% assign zp_product_discount_amount = zp_pdap[0] %}{% endunless %}{% assign zp_product_discount_amount = 0 | plus: zp_product_discount_amount | at_most: 100 %}{% assign zp_product_saved_amount = zp_current_product_price | times: zp_product_discount_amount | divided_by: 100 | at_most: zp_current_product_price %}{% assign zp_product_discount_amount_recalculate = false %}{% assign zp_product_discount_amount_suffix = '%' %}{% assign zp_prdscdfwcl = '' %}{% elsif zp_product_discount_type == 'compare_price' %}{% if zp_current_product_compare_at_price %}{% assign zp_product_discount_amount = zp_current_product_compare_at_price | minus: zp_current_product_price %}{% else %}{% assign zp_product_discount_amount = 0 %}{% assign zp_unavailable_discount_class = 'hidden' %}{% endif %}{% assign zp_product_saved_amount = zp_product_discount_amount %}{% else %}{% assign zp_product_discount_amount = zp_product_discount_amount | times: 100 %}{% assign zp_product_discount_amount = '' | append: zp_product_discount_amount | split: '.' | first | default: 0 %}{% assign zp_product_discount_amount = 0 | plus: zp_product_discount_amount | at_most: zp_current_product_price %}{% assign zp_product_saved_amount = zp_product_discount_amount %}{% assign zp_product_discount_amount_money = true %}{% endif %}{% if zp_product_discount_type == 'compare_price' %}{% assign zp_product_sale_price = zp_current_product_price %}{% else %}{% assign zp_product_sale_price = zp_current_product_price | minus: zp_product_saved_amount %}{% endif %}{% assign zp_product_discount_amount_prefix = '-' %}{% else %}{% assign zp_product_sale_price = zp_current_product_price %}{% assign zp_unavailable_discount_class = 'hidden' %}{% assign zp_product_discount_amount = 0 %}{% endif %}{% if zp_sdd %}{% assign zp_product_discount_data = zp_product_discount_data | join: ':' %}{% endif %}{% if zp_product_calculate_bundle_price %}{% assign zp_current_product_price = zp_current_product_price | times: zp_product_default_quantity %}{% if zp_current_product_compare_at_price %}{% assign zp_current_product_compare_at_price = zp_current_product_compare_at_price | times: zp_product_default_quantity %}{% endif %}{% assign zp_product_sale_price = zp_product_sale_price | times: zp_product_default_quantity %}{% if zp_product_saved_amount %}{% assign zp_product_saved_amount = zp_product_saved_amount | times: zp_product_default_quantity %}{% endif %}{% if zp_product_discount_amount_recalculate %}{% assign zp_product_discount_amount = zp_product_discount_amount | times: zp_product_default_quantity %}{% endif %}{% endif %}{% if zp_ucprart and zp_product_discount_type == 'compare_price' %}{% assign zp_formatted_product_compare_at_price = zp_current_product_compare_at_price | money %}{% assign zp_formatted_product_price = zp_formatted_product_compare_at_price %}{% else %}{% assign zp_formatted_product_price = zp_current_product_price | money %}{% assign zp_formatted_product_compare_at_price = zp_current_product_compare_at_price | money %}{% endif %}{% assign zp_formatted_product_sale_price = zp_product_sale_price | money %}{% if zp_product_discount_amount_money %}{% assign zp_formatted_product_discount_amount = zp_product_discount_amount | money %}{% else %}{% assign zp_formatted_product_discount_amount = zp_product_discount_amount %}{% endif %}{% assign zp_product_discount_amount_with_suffix = zp_formatted_product_discount_amount | append: zp_product_discount_amount_suffix %}{% assign zp_formatted_product_discount_amount = zp_formatted_product_discount_amount | prepend: zp_product_discount_amount_prefix | append: zp_product_discount_amount_suffix %}{% if zp_product_saved_amount %}{% assign zp_formatted_product_saved_amount = zp_product_saved_amount | money %}{% endif %}{% if zp_unit_price_enabled %}{% if zp_product_unit_price_tag_included %}{% if zp_first_selected_variant.unit_price_measurement %}{% assign zp_pupwrcl = '' %}{% else %}{% assign zp_pupwrcl = ' hidden' %}{% endif %}{% capture zp_puplbl %}{% assign zp_translation = 'products.product.unit_price_label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.price.unit_price' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Unit Price" %}{% endif %}{% endif %}{{ zp_translation }}{% endcapture %}{% capture zp_pupblk %}<span data-zp-product-unit-price>{% if zp_first_selected_variant.unit_price_measurement %}{{ zp_first_selected_variant.unit_price | money }}{% endif %}</span><span> / </span><span data-zp-product-up-base-unit>{% if zp_first_selected_variant.unit_price_measurement %}{% if zp_first_selected_variant.unit_price_measurement.reference_value != 1 %}{{ zp_first_selected_variant.unit_price_measurement.reference_value }}{% endif %}{{ zp_first_selected_variant.unit_price_measurement.reference_unit }}{% endif %}</span>{% endcapture %}{% else %}{% capture zp_pupblk %}{% if zp_unit_price_enabled %}<div class="zpa-offset-bottom-xs{% unless zp_first_selected_variant.unit_price_measurement %} hidden{% endunless %}" data-zp-product-unit-price-wrapper><div class="zpa-dynamic-buy-box__label--xs">{% assign zp_translation = 'products.product.unit_price_label' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = 'products.product.price.unit_price' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Unit Price" %}{% endif %}{% endif %}{{ zp_translation }}:</div><span data-zp-product-unit-price>{% if zp_first_selected_variant.unit_price_measurement %}{{ zp_first_selected_variant.unit_price | money }}{% endif %}</span><span> / </span><span data-zp-product-up-base-unit>{% if zp_first_selected_variant.unit_price_measurement %}{% if zp_first_selected_variant.unit_price_measurement.reference_value != 1 %}{{ zp_first_selected_variant.unit_price_measurement.reference_value }}{% endif %}{{ zp_first_selected_variant.unit_price_measurement.reference_unit }}{% endif %}</span></div>{% endif %}{% endcapture %}{% assign zp_pvrntcntr = zp_pupblk | append: zp_pvrntcntr %}{% endif %}{% endif %}{% else %}{% assign zp_prunpcls = ' hidden' %}{% endif %}{% if zp_product_found %}{%- capture zp_pinscr -%}<script type="text/json" data-zp-product-init>{"translations":{ {% if zp_pbcpt != blank and zp_pbcpt != '' %}"addToCart":"{{ zp_pbcpt | url_escape }}"{% endif %} },"productSelector":"{{ zp_product_selector }}"{% if zp_selected_variants_list != '' %},"selectedVariants":"{{ zp_selected_variants_list | url_escape }}"{% endif %},"productType":"{{ zp_product_type }}","imageSize":"{{ '' | append: zp_current_product_image_size | strip | default: 'master' | url_escape }}","productDiscountData":"{{ zp_product_discount_data }}","initBuilder":{{ zp_any_product_variant_available | default: 'false' }},"sbscrbPriceRefresh":{{ zp_pscrprrf | default: 'false' }},"calculateBundlePrice":{{ zp_product_calculate_bundle_price | default: 'false' }},"defaultQty":{{ 0 | plus: zp_product_default_quantity }},"productElementId":"{{ zp_product_element_id }}"{% if zp_pbtnsjsndt != blank %},"buttons":{{ zp_pbtnsjsndt }}{% endif %}{% if zp_pimgjsndt != blank %},"images":{{ zp_pimgjsndt }}{% endif %},"imageSrcSetData":{{ zp_pimj }},"productBlockId":"{{ zp_product_block_id }}","preloadVariantImages":{{ zp_pprvimg }}{% if zp_pvrnjsndt == blank %},"variantSelectorView":"{{ zp_pvrntslv }}"{% endif %}{% if zp_pvrntslofcl != blank %},"variantOffsetClasses":"{{ zp_pvrntslofcl }}"{% endif %}{% if zp_pvrntslcl != blank %},"variantLabelClasses":"zp {{ zp_pvrntslcl }}"{% endif %}{% if zp_pshwvrntsllbl != nil %},"showVariantLabel":{{ zp_pshwvrntsllbl }}{% endif %}{% if zp_pvrnjsndt != blank %},"variantSelectors":{{ zp_pvrnjsndt }}{% endif %},"enableHistoryState":{{ zp_use_product_variant_from_url }},"productEntityType":"{{ zp_product_entity_type }}","imageGeneralContainer":{{ zp_ugpimgcnt | default: false }},"updExternalPrice":{{ zp_upextppr }}{% if zp_popstng != blank %},"optionsSettings":{{ zp_popstng }}{% endif %}{% if zp_pimgjsndt == blank %},"enableImageLinking":{{ zp_epimgln }}{% endif %}{% if zp_cpstdd != blank %},"productDiscountHash":{{ zp_cpstdd['data_hash'] | json }}{% endif %}{% if zp_prvsr != blank %},"reviewsSource":{{ zp_prvsr | json }}{% endif %}{% if zp_prvdt != blank %},"starRatings":{{ zp_prvdt }}{% endif %}{% if zp_cscfg != blank %},"{{ zp_cscfgk }}":{{ zp_cscfg }}{% endif %},"productEnabled":{{ zp_main_product_available }}{% if zp_pbtnsjsndt == blank %},"redirectUrl":{{ zp_redirect_product_url | json }}{% endif %}{% if zp_pbtnsjsndt == blank %},"redirectTarget":{{ zp_pbtnlt | json }}{% endif %}{% if zp_lnktp != blank %},"linkType":"{{ zp_lnktp }}"{% endif %},"product":{{ zp_product_json_integration_content | default: "null" }}{{ zp_adpinstg }}}</script>{%- endcapture -%}{% endif %}{% if zp_product_found %}{% capture zp_product_button_text %}<span class="zpa-btn-custom__caption" data-zp-add-to-cart-text>{% if zp_any_product_variant_available %}{{ zp_pbcpt }}{% else %}{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}{% endif %}</span><svg class="zpa-btn-loader zpa-btn-custom__icon" width="14px" height="14px"><use href="#buyButtonLoader"></use></svg>{% endcapture %}{% capture zp_product_sticky_button_text %}<span class="zpa-btn-custom__caption" >{% if zp_any_product_variant_available %}{{ zp_pskbcpt }}{% else %}{% assign zp_translation = 'products.product.sold_out' | t %}{% if zp_translation contains 'Translation missing' or zp_translation contains 'translation missing' %}{% assign zp_translation = "Sold Out" %}{% endif %}{{ zp_translation }}{% endif %}</span><svg class="zpa-btn-loader zpa-btn-custom__icon" width="14px" height="14px"><use href="#buyButtonLoader"></use></svg>{% endcapture %}{% endif %}{% if zp_prvss != blank %}{% assign zp_rvwsrc = zp_prvss | split: ',' %}{% assign zp_cptr_rplc_src = true %}{% elsif zp_cprst contains 'srtgs' %}{% assign zp_rvwsrc = zp_cprst['srtgs'] | map: 'rtgsrc' | uniq %}{% assign zp_cptr_rplc_src = true %}{% else %}{% assign zp_rvwsrc = zp_cprst['rtgsrc'] | split: ' ' %}{% assign zp_cptr_rplc_src = false %}{% endif %}{% for zp_rvs_src in zp_rvwsrc %}{% if zp_rvs_src == blank %}{% continue %}{% endif %}{% assign zp_product_review_rating = nil %}{% assign zp_product_review_count = nil %}{% assign zp_product_review_rating_text = '' %}{% if product.id > 0 %}{% case zp_rvs_src %}{% when 'yotpo' %}{% assign zp_prvwdt = product.metafields.yotpo %}{% assign zp_prvwcnt = 0 | plus: zp_prvwdt.reviews_count %}{% if zp_prvwcnt > 0 %}{% assign zp_product_review_rating = 0 | plus: zp_prvwdt.reviews_average %}{% assign zp_product_review_count = 0 | plus: zp_prvwdt.reviews_count %}{% endif %}{% when 'loox' %}{% assign zp_prvwdt = product.metafields.loox %}{% assign zp_prvwcnt = 0 | plus: zp_prvwdt.num_reviews %}{% if zp_prvwcnt > 0 %}{% assign zp_product_review_rating = 0 | plus: zp_prvwdt.avg_rating %}{% assign zp_product_review_count = 0 | plus: zp_prvwdt.num_reviews %}{% endif %}{% when 'spr' %}{% assign zp_prvwdt = product.metafields.spr.reviews %}{% if zp_prvwdt %}{% assign zp_prvwdt = ' ' | append: zp_prvwdt | append: ' ' %}{% assign zp_prvwrtgdt = zp_prvwdt | split: '"ratingValue":' %}{% assign zp_prvwrtgdt = zp_prvwrtgdt[1] | strip | slice: 0, 100 | remove: '"' | remove: "'" | split: '' %}{% assign zp_prvwavchr = '1234567890.' | split: '' %}{% assign zp_product_review_rating = '' %}{% for zp_prvwrchr in zp_prvwrtgdt %}{% if zp_prvwavchr contains zp_prvwrchr %}{% assign zp_product_review_rating = zp_product_review_rating | append: zp_prvwrchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_product_review_rating = 0 | plus: zp_product_review_rating %}{% unless zp_product_review_rating > 0 %}{% assign zp_product_review_rating = nil %}{% endunless %}{% assign zp_prvwrtgdt = zp_prvwdt | split: '"reviewCount":' %}{% if zp_prvwrtgdt.size < 2 %}{% assign zp_prvwrtgdt = zp_prvwdt | split: '"ratingCount":' %}{% endif %}{% assign zp_prvwrtgdt = zp_prvwrtgdt[1] | strip | slice: 0, 100 | remove: '"' | remove: "'" | split: '' %}{% assign zp_prvwavchr = '1234567890' | split: '' %}{% assign zp_product_review_count = '' %}{% for zp_prvwrchr in zp_prvwrtgdt %}{% if zp_prvwavchr contains zp_prvwrchr %}{% assign zp_product_review_count = zp_product_review_count | append: zp_prvwrchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_product_review_count = 0 | plus: zp_product_review_count %}{% unless zp_product_review_count > 0 %}{% assign zp_product_review_count = nil %}{% endunless %}{% endif %}{% when 'opinew' %}{% assign zp_prvwdt = product.metafields.opinew_metafields %}{% assign zp_prvwcnt = 0 | plus: zp_prvwdt.reviews_count %}{% if zp_prvwcnt > 0 %}{% assign zp_product_review_rating = 0 | plus: zp_prvwdt.reviews_average %}{% assign zp_product_review_count = 0 | plus: zp_prvwdt.reviews_count %}{% endif %}{% when 'judgeme' %}{% assign zp_prvwdt = product.metafields.judgeme.badge %}{% if zp_prvwdt %}{% assign zp_prvwdt = ' ' | append: zp_prvwdt | append: ' ' %}{% assign zp_prvwrtgdt = zp_prvwdt | split: ' data-average-rating=' %}{% assign zp_prvwrtgdt = zp_prvwrtgdt[1] | strip | split: ' ' | first | strip | remove: '"' | remove: "'" | split: '' %}{% assign zp_prvwavchr = '1234567890.' | split: '' %}{% assign zp_product_review_rating = '' %}{% for zp_prvwrchr in zp_prvwrtgdt %}{% if zp_prvwavchr contains zp_prvwrchr %}{% assign zp_product_review_rating = zp_product_review_rating | append: zp_prvwrchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_product_review_rating = 0 | plus: zp_product_review_rating %}{% unless zp_product_review_rating > 0 %}{% assign zp_product_review_rating = nil %}{% endunless %}{% assign zp_prvwrtgdt = zp_prvwdt | split: ' data-number-of-reviews=' %}{% assign zp_prvwrtgdt = zp_prvwrtgdt[1] | strip | split: ' ' | first | strip | remove: '"' | remove: "'" | split: '' %}{% assign zp_prvwavchr = '1234567890' | split: '' %}{% assign zp_product_review_count = '' %}{% for zp_prvwrchr in zp_prvwrtgdt %}{% if zp_prvwavchr contains zp_prvwrchr %}{% assign zp_product_review_count = zp_product_review_count | append: zp_prvwrchr %}{% else %}{% break %}{% endif %}{% endfor %}{% assign zp_product_review_count = 0 | plus: zp_product_review_count %}{% unless zp_product_review_count > 0 %}{% assign zp_product_review_count = nil %}{% endunless %}{% endif %}{% endcase %}{% endif %}{% assign zp_prvwdt = nil %}{% assign zp_prvwrtgdt = nil %}{% assign zp_prvwcnt = nil %}{% if zp_product_review_count != empty and zp_product_review_count > 0 %}{% assign zp_product_review_wrapper_classes = '' %}{% else %}{% assign zp_product_review_wrapper_classes = 'disabled hidden' %}{% endif %}{% if zp_cptr_rplc_src %}{% assign zp_rvwmkr = zp_pblkmkr | append: '_' | append: zp_rvs_src %}{% else %}{% assign zp_rvwmkr = zp_pblkmkr %}{% endif %}{% if zp_product_review_rating != empty and zp_product_review_rating > 0 %}{% assign zp_product_review_rating_text = '' | append: zp_product_review_rating %}{% if zp_product_review_rating_text contains '.' %}{% assign zp_prvwrtgdt = zp_product_review_rating | split: '.' %}{% if zp_prvwrtgdt[1].size > 1 %}{% assign zp_prtgdtdcm = '' | append: zp_prvwrtgdt[1] | split: '' %}{% assign zp_product_review_rating_text = zp_prvwrtgdt[0] | append: '.' | append: zp_prtgdtdcm[0] %}{% endif %}{% assign zp_prvwrtgdt = nil %}{% assign zp_prtgdtdcm = nil %}{% else %}{% assign zp_product_review_rating_text = zp_product_review_rating_text | append: '.0' %}{% endif %}{% assign zp_prvwtrtng = zp_product_review_rating %}{% for zp_itridx in (1..5) %}{% if zp_prvwtrtng > 0 and zp_prvwtrtng <= 0.5 %}{% assign zp_product_rating_star_classes = 'zpa-star-half' %}{% elsif zp_prvwtrtng > 0.5 %}{% assign zp_product_rating_star_classes = 'zpa-star-full' %}{% else %}{% assign zp_product_rating_star_classes = '' %}{% endif %}{% assign zp_prtgsitr = 'zps_rvic_' | append: zp_itridx %}{% assign zp_prvwtrtng = zp_prvwtrtng | minus: 1 %}{% if zp_rprfrmf %}{% capture zp_crrpi %}zps_rvic_{{ zp_itridx }}_{{ zp_rvwmkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_rating_star_classes %}{% else %}{% assign zp_prcpts = zp_prcpts | replace: zp_prtgsitr, zp_product_rating_star_classes %}{% endif %}{% endfor %}{% else %}{% for zp_itridx in (1..5) %}{% assign zp_prtgsitr = 'zps_rvic_' | append: zp_itridx %}{% if zp_rprfrmf %}{% capture zp_crrpi %}zps_rvic_{{ zp_itridx }}_{{ zp_rvwmkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, "" %}{% else %}{% assign zp_prcpts = zp_prcpts | replace: zp_prtgsitr, "" %}{% endif %}{% endfor %}{% endif %}{% capture zp_crrpi %}<zpprdrvavg_{{ zp_rvwmkr }}></zpprdrvavg_{{ zp_rvwmkr }}>{% endcapture %}{% capture zp_crrpi2 %}<zpprdrvcnt_{{ zp_rvwmkr }}></zpprdrvcnt_{{ zp_rvwmkr }}>{% endcapture %}{% capture zp_crrpi3 %}zps_unvavlblprdrv_{{ zp_rvwmkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_review_rating_text | replace: zp_crrpi2, zp_product_review_count | replace: zp_crrpi3, zp_product_review_wrapper_classes %}{% endfor %}{% assign zp_hsdpm = false %}{% assign zp_tdpm = zp_display_product_markup %}{% if zp_use_current_entity_markup and zp_product_view_type == 'dynamicproductsection' %}{% assign zp_ipm = true %}{% assign zp_hsdpm = true %}{% elsif zp_use_current_entity_markup and zp_dnprsex and zp_dnprsmex and zp_current_entity.handle == product.handle %}{% assign zp_ipm = true %}{% assign zp_hsdpm = true %}{% assign zp_dnprsmex = false %}{% elsif zp_use_product_markup %}{% assign zp_ipm = true %}{% else %}{% assign zp_ipm = false %}{% endif %}{% if zp_ipm %}{% if zp_hsdpm %}{% assign zp_display_product_markup = true %}{% endif %}{%- if zp_product_found and zp_display_product_markup -%}{% assign zp_product_custom_title = zp_product_custom_title | strip_html | strip | default: product.title | strip_html | strip %}{% assign zp_product_custom_description = zp_product_custom_description | strip_html | strip | default: product.description | strip_html | strip %}{% if zp_current_selected_variant != blank %}{% assign zp_product_schema_variant = zp_current_selected_variant %}{% else %}{% assign zp_product_schema_variant = zp_first_selected_variant %}{% endif %}{% assign zp_product_custom_image = zp_product_custom_image | strip | default: zp_product_image | strip %}{% if zp_pshcren or zp_pcrdt != blank %}{% if zp_first_selected_variant.available and zp_first_selected_variant.featured_media != blank and zp_first_selected_variant.featured_media.media_type == 'image' %}{% assign zp_product_custom_image_obj = zp_first_selected_variant.featured_media %}{% else %}{% assign zp_product_custom_image_obj = product.media | where: 'media_type', 'image' | first | default: zp_product_schema_variant.featured_image | default: product.featured_image %}{% endif %}{% assign zp_product_custom_image = zp_product_custom_image_obj | image_url: width: zp_product_custom_image_obj.preview_image.width | prepend: 'https:' %}{% elsif zp_product_custom_image == blank or zp_product_custom_image == '' or zp_product_custom_image contains '/default_images_product_icon_360x240.jpg' %}{% assign zp_product_custom_image_obj = zp_product_schema_variant.featured_image | default: product.featured_image %}{% assign zp_product_custom_image = zp_product_custom_image_obj | image_url: width: zp_product_custom_image_obj.preview_image.width | prepend: 'https:' %}{% endif %}{%- endif -%}{% if zp_main_product_available %}{% capture zp_pftintctn -%}<zp_product_additional_footer_integration></zp_product_additional_footer_integration>{%- endcapture %}{% else %}{% assign zp_pftintctn = '' %}{% endif %}{% capture zp_product_markup_integration %}{% if zp_product_found and zp_display_product_markup %}<script type="application/ld+json">{"@context":"http://schema.org/","@type":"Product",{% if product.vendor != blank %}"brand":{"@type":"Brand","name":{{ product.vendor | json }}},{% endif %}"name":{{ zp_product_custom_title | json }},"description":{{ zp_product_custom_description | json }},"url":{{ request.origin | append: zp_current_entity.url | json }},{% if zp_product_custom_image != blank %}"image":[{{ zp_product_custom_image | json }}],{% endif %}{% if zp_product_schema_variant.sku != blank %}"sku":{{ zp_product_schema_variant.sku | json }},{% endif %}"offers":[{% assign zp_psos = '' %}{% for zp_pvr in zp_current_product_custom_variants %}{% assign zp_svi = '' | append: zp_pvr.id %}{% unless zp_selected_variants contains zp_svi %}{% continue %}{% endunless %}{{ zp_psos }}{% assign zp_psos = ',' %}{% assign zp_pvp = zp_pvr.price %}{% if zp_pvr.compare_at_price > zp_pvr.price %}{% assign zp_pvcp = zp_pvr.compare_at_price %}{% else %}{% assign zp_pvcp = nil %}{% endif %}{% assign zp_pvda_recalculate = true %}{% assign zp_pvda_money = false %}{% assign zp_pvda_prefix = '' %}{% assign zp_pvda_suffix = '' %}{% if zp_product_discount_data contains ':' %}{% assign zp_product_discount_data = zp_product_discount_data | split: ':' %}{% assign zp_sdd = true %}{% else %}{% assign zp_sdd = false %}{% endif %}{% if zp_product_discount_data.size > 1 %}{% assign zp_pvda = 0 | plus: zp_product_discount_data[0] | abs %}{% assign zp_pvdt = '' | append: zp_product_discount_data[1] %}{% if zp_pvdt == 'percentage' or zp_pvdt == 'percentage_dynamic' %}{% assign zp_pdap = '' | append: zp_pvda | split: '.' %}{% assign zp_pddp = '' | append: zp_pdap[1] | default: '0' %}{% assign zp_pddp = 0 | plus: zp_pddp %}{% unless zp_pddp > 0 %}{% assign zp_pvda = zp_pdap[0] %}{% endunless %}{% assign zp_pvda = 0 | plus: zp_pvda | at_most: 100 %}{% assign zp_pvsa = zp_pvp | times: zp_pvda | divided_by: 100 | at_most: zp_pvp %}{% assign zp_pvda_recalculate = false %}{% assign zp_pvda_suffix = '%' %}{% elsif zp_pvdt == 'compare_price' %}{% if zp_pvcp %}{% assign zp_pvda = zp_pvcp | minus: zp_pvp %}{% else %}{% assign zp_pvda = 0 %}{% assign zp_pvudc = 'hidden' %}{% endif %}{% assign zp_pvsa = zp_pvda %}{% else %}{% assign zp_pvda = zp_pvda | times: 100 %}{% assign zp_pvda = '' | append: zp_pvda | split: '.' | first | default: 0 %}{% assign zp_pvda = 0 | plus: zp_pvda | at_most: zp_pvp %}{% assign zp_pvsa = zp_pvda %}{% assign zp_pvda_money = true %}{% endif %}{% if zp_pvdt == 'compare_price' %}{% assign zp_pvsp = zp_pvp %}{% else %}{% assign zp_pvsp = zp_pvp | minus: zp_pvsa %}{% endif %}{% assign zp_pvda_prefix = '-' %}{% else %}{% assign zp_pvsp = zp_pvp %}{% assign zp_pvudc = 'hidden' %}{% assign zp_pvda = 0 %}{% endif %}{% if zp_sdd %}{% assign zp_product_discount_data = zp_product_discount_data | join: ':' %}{% endif %}{"@type":"Offer",{% if zp_pvr.sku != blank %}"sku":{{ zp_pvr.sku | json }},{% endif %}{% if zp_pvr.barcode.size == 12 %}"gtin12":{{ zp_pvr.barcode }},{% endif %}{% if zp_pvr.barcode.size == 13 %}"gtin13":{{ zp_pvr.barcode }},{% endif %}{% if zp_pvr.barcode.size == 14 %}"gtin14":{{ zp_pvr.barcode }},{% endif %}"url":{{ request.origin | append: zp_pvr.url | json }},"priceCurrency":{{ cart.currency.iso_code | json }},"price":{{ zp_pvsp | divided_by: 100.00 | json }},"availability":"http://schema.org/{% if zp_pvr.available %}InStock{% else %}OutOfStock{% endif %}"}{% endfor %}]{% if zp_product_review_count %},"aggregateRating":{"@type":"AggregateRating","ratingValue":{{ zp_product_review_rating | json }},"ratingCount":{{ zp_product_review_count | json }}}{% endif %}}</script>{% endif %}{% endcapture %}{% assign zp_display_product_markup = zp_tdpm %}{% assign zp_tdpm = nil %}{% else %}{% assign zp_product_markup_integration = '' %}{% endif %}{% if zp_rprfrtg and zp_product_view_type == 'dynamicproductsection' %}{% assign zp_svid = zp_first_selected_variant.image.id %}{% if zp_svid != blank %}{% assign zp_ciis = ' data-pc-thumb-img="' | append: zp_svid | append: '"' %}{% assign zp_ciir = zp_ciis | append: ' data-default-active' %}{% assign zp_prcpts = zp_prcpts | replace: zp_ciis, zp_ciir %}{% endif %}{% endif %}{%- elsif zp_ansmpbndprav == false and zp_asmpbdpf -%}{% assign zp_product_button_text = 'products.product.sold_out' | t %}{% if zp_product_button_text contains 'Translation missing' or zp_product_button_text contains 'translation missing' %}{% assign zp_product_button_text = "Sold Out" %}{% endif %}{% assign zp_product_sticky_button_text = 'products.product.sold_out' | t %}{% if zp_product_sticky_button_text contains 'Translation missing' or zp_product_sticky_button_text contains 'translation missing' %}{% assign zp_product_sticky_button_text = "Sold Out" %}{% endif %}{%- endif -%}{%- if zp_rprfrtg and zp_prcpts contains zp_opcstg -%}{% assign zp_pwcst = true %}{%- else -%}{% assign zp_pwcst = false %}{%- endif -%}{%- if zp_rprfrmf -%}{% assign zp_cscntprts = zp_cprst['crsslls'] | default: zp_cprst['bndl'] | default: nil %}{% for zp_cscntprt in zp_cscntprts %}{% assign zp_csblkmkr = zp_cscntprt | first %}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bndblen %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% capture zp_crrpi %}zp_cross_sell_wrapper_selector_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi2 %}<zpdcsprdct_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi3 %}</zpdcsprdct_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi4 %}zp_cross_sell_wrapper_selector_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi5 %}zps_csimgsrc_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi6 %}<zpcsslprc_{{ zp_csblkmkr }}></zpcsslprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi7 %}<zpprscst_{{ zp_csblkmkr }}></zpprscst_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi8 %}zpprscsa_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi9 %}<zpprscsdes_{{ zp_csblkmkr }}></zpprscsdes_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi10 %}<zpcsprc_{{ zp_csblkmkr }}></zpcsprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi11 %}<zpcscompareprc_{{ zp_csblkmkr }}></zpcscompareprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi12 %}<zpcssvdprc_{{ zp_csblkmkr }}></zpcssvdprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi13 %}<zpcsdcsamnt_{{ zp_csblkmkr }}></zpcsdcsamnt_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi14 %}<zpcsildcs_{{ zp_csblkmkr }}></zpcsildcs_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi15 %}zps_csunvavlblprdcl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi16 %}zps_csunprprdcl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi17 %}zps_csunavlbldccl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi18 %}zps_csimgdattr_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi19 %}zps_csunvavlblqtycl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi20 %}<zpcsvrnts_{{ zp_csblkmkr }}></zpcsvrnts_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi21 %}<zpcsvrnts_{{ zp_csblkmkr }}></zpcsvrnts_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi22 %}<zpcsqtyctrl_{{ zp_csblkmkr }}></zpcsqtyctrl_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi23 %}<zpcspmsg_{{ zp_csblkmkr }}></zpcspmsg_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi24 %}<zpcsunprc_{{ zp_csblkmkr }}></zpcsunprc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi25 %}<zpcsunplb_{{ zp_csblkmkr }}></zpcsunplb_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi26 %}zps_unvavlblcsunp_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi27 %}zps_unvavlblbndilcl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi28 %}<zpcsaccc_{{ zp_csblkmkr }}></zpcsaccc_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi29 %}zps_qtyicrtl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi30 %}zps_qtyinttl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi31 %}zps_qtydcrtl_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi32 %}zps_elid_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi33 %}zps_qtyattr_{{ zp_csblkmkr }}{% endcapture %}{% capture zp_crrpi34 %}<zpcsctw_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi35 %}</zpcsctw_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi36 %}<zpcspcim_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi37 %}</zpcspcim_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi38 %}<zpcspcv_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi39 %}</zpcspcv_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi40 %}<zpcsctwt_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi41 %}</zpcsctwt_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi42 %}<zpcspcti_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi43 %}</zpcspcti_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi44 %}<zpcspctv_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi45 %}</zpcspctv_{{ zp_csblkmkr }}>{% endcapture %}{% capture zp_crrpi46 %}zps_ldc_{{ zp_csblkmkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_cross_sell_empty_wrapper_selector | replace: zp_crrpi2, '<div style="display:none!important">' | replace: zp_crrpi3, '</div>' | replace: zp_crrpi4, zp_cross_sell_wrapper_selector | replace: zp_crrpi5, zp_csimg | replace: zp_crrpi6, zp_fmcsslpr | replace: zp_crrpi7, zp_cspttl | replace: zp_crrpi8, zp_cspttla | replace: zp_crrpi9, zp_cspdsc | replace: zp_crrpi10, zp_fmcspr | replace: zp_crrpi11, zp_fmcscapr | replace: zp_crrpi12, zp_fmcsdsctsvam | replace: zp_crrpi13, zp_fmcsdsctam | replace: zp_crrpi14, zp_csdsctamwsfx | replace: zp_crrpi15, zp_uncscls | replace: zp_crrpi16, zp_csprunpcls | replace: zp_crrpi17, zp_csunvbdsctcl | replace: zp_crrpi18, zp_csimgdatr | replace: zp_crrpi19, zp_uncsqtycls | replace_first: zp_crrpi20, zp_csvrntcntr | replace: zp_crrpi21, '' | replace: zp_crrpi22, zp_csqtycntr | replace: zp_crrpi23, zp_csmsgs | replace: zp_crrpi24, zp_csupblck | replace: zp_crrpi25, zp_csuplbl | replace: zp_crrpi26, zp_csupwrprcls | replace: zp_crrpi27, zp_unbndpiwrcl | replace: zp_crrpi28, zp_csatnlclscnt | replace: zp_crrpi29, zp_csqtyicrtr | replace: zp_crrpi30, zp_csqtyinpttr | replace: zp_crrpi31, zp_csqtydcrtr | replace: zp_crrpi32, zp_cselid | replace: zp_crrpi33, '' | replace: zp_crrpi34, '' | replace: zp_crrpi35, '' | replace: zp_crrpi36, '' | replace: zp_crrpi37, '' | replace: zp_crrpi38, '' | replace: zp_crrpi39, '' | replace: zp_crrpi40, '' | replace: zp_crrpi41, '' | replace: zp_crrpi42, '' | replace: zp_crrpi43, '' | replace: zp_crrpi44, '' | replace: zp_crrpi45, '' | replace: zp_crrpi46, zp_csldwc %}{% endfor %}{%- elsif zp_pwcst -%}{% assign zp_cross_sell_product_iterator = zp_cross_sell_product_iterator | plus: 1 %}{% if zp_bndblen %}{% assign zp_cross_sell_selector = 'zpbundleproductselector' %}{% else %}{% assign zp_cross_sell_selector = 'zpcrosssellselector' %}{% endif %}{% assign zp_cross_sell_selector = zp_cross_sell_selector | append: zp_product_selector_suffix | append: zp_cross_sell_product_iterator %}{% assign zp_cross_sell_wrapper_selector = zp_cross_sell_selector | append: zp_main_product_selector_suffix %}{% assign zp_cross_sell_empty_wrapper_selector = zp_cross_sell_wrapper_selector | append: '-empty' %}{% assign zp_prcpts = zp_prcpts | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_empty_wrapper_selector | replace: zp_opcstg, '<div style="display:none!important" ' | replace: zp_clcstg, '</div>' | replace: 'zp_cross_sell_wrapper_selector', zp_cross_sell_wrapper_selector | replace: 'zps_csimgsrc', zp_csimg | replace: '<zpcsslprc></zpcsslprc>', zp_fmcsslpr | replace: '<zpcsprc></zpcsprc>', zp_fmcspr | replace: '<zpcscompareprc></zpcscompareprc>', zp_fmcscapr | replace: '<zpcssvdprc></zpcssvdprc>', zp_fmcsdsctsvam | replace: '<zpcsdcsamnt></zpcsdcsamnt>', zp_fmcsdsctam | replace: 'zps_csunvavlblprdcl', zp_uncscls | replace: 'zps_csunprprdcl', zp_csprunpcls | replace: 'zps_csunavlbldccl', zp_csunvbdsctcl | replace: 'zps_csimgdattr', zp_csimgdatr | replace: 'zps_csunvavlblqtycl', zp_uncsqtycls | replace_first: '<zpcsvrnts></zpcsvrnts>', zp_csvrntcntr | replace: '<zpcsqtyctrl></zpcsqtyctrl>', zp_csqtycntr | replace: '<zpcspmsg></zpcspmsg>', zp_csmsgs | replace: '<zpcsunprc></zpcsunprc>', zp_csupblck | replace: 'zps_unvavlblcsunp', zp_csupwrprcls | replace: 'zps_unvavlblbndilcl', zp_unbndpiwrcl %}{%- endif -%}{% if zp_rprfrmf %}{% capture zp_pvrnttgn %}<zpprdvrnts_{{ zp_pblkmkr }}></zpprdvrnts_{{ zp_pblkmkr }}>{% endcapture %}{% unless zp_current_entity_content contains zp_pvrnttgn %}{% assign zp_padclcnt = zp_padclcnt | append: zp_pvrntcntr %}{% endunless %}{% capture zp_pqtytgn %}<zpprdqtyctrl_{{ zp_pblkmkr }}></zpprdqtyctrl_{{ zp_pblkmkr }}>{% endcapture %}{% if zp_current_entity_content contains zp_pqtytgn %}{% assign zp_pioqtytg = true %}{% else %}{% assign zp_pioqtytg = false %}{% endif %}{% capture zp_pqtytgn %}zps_qtyattr_{{ zp_pblkmkr }}{% endcapture %}{% if zp_current_entity_content contains zp_pqtytgn %}{% assign zp_pinqtysl = true %}{% else %}{% assign zp_pinqtysl = false %}{% endif %}{% if zp_pioqtytg == false and zp_pinqtysl == false %}{% assign zp_padclcnt = zp_padclcnt | append: zp_pqtycntr %}{% endif %}{% if zp_padclcnt.size > 0 %}{% assign zp_padclcnt = '<div style="display:none!important">' | append: zp_padclcnt | append: '</div>' %}{% endif %}{% assign zp_additional_product_footer_data = '' | append: zp_product_additional_integrations | append: zp_pinscr | append: zp_product_markup_integration | append: zp_product_footer_integration_content %}{% if zp_product_found %}{% assign zp_puntxt = 'products.product.sold_out' | t %}{% if zp_puntxt contains 'Translation missing' or zp_puntxt contains 'translation missing' %}{% assign zp_puntxt = "Sold Out" %}{% endif %}{% else %}{% assign zp_puntxt = zp_product_button_text %}{% endif %}{% if zp_uiec %}{% assign zp_btstsl = zp_pbtids %}{% else %}{% assign zp_btstsl = zp_cprst['btns'] %}{% endif %}{% for zp_btsts in zp_btstsl %}{% if zp_uiec %}{% assign zp_btid = zp_btsts | strip %}{% assign zp_btcpt = zp_pbtcpts[forloop.index0] | strip %}{% else %}{% assign zp_btid = zp_btsts['id'] %}{% assign zp_btcpt = zp_btsts['cpt'] %}{% endif %}{% capture zp_btntg %}<zpprdsbtntxt_{{ zp_pblkmkr }}_{{ zp_btid }}></zpprdsbtntxt_{{ zp_pblkmkr }}_{{ zp_btid }}>{% endcapture %}{% if zp_any_product_variant_available %}{% assign zp_btncpt = zp_btcpt %}{% else %}{% assign zp_btncpt = zp_puntxt %}{% endif %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_btntg, zp_btncpt %}{% endfor %}{% capture zp_crrpi %}zp_product_wrapper_selector_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi2 %}<zpprdprc_{{ zp_pblkmkr }}></zpprdprc_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi3 %}<zpprdcompareprc_{{ zp_pblkmkr }}></zpprdcompareprc_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi4 %}<zpprdvrnts_{{ zp_pblkmkr }}></zpprdvrnts_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi5 %}<zpprdvrnts_{{ zp_pblkmkr }}></zpprdvrnts_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi6 %}<zpprdqtyctrl_{{ zp_pblkmkr }}></zpprdqtyctrl_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi7 %}<zpprdform_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi8 %}</zpprdform_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi9 %}zps_unvavlblprdcl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi10 %}zps_unprprdcl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi11 %}zps_unavlbldccl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi12 %}zps_unvvlblprdpdwc_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi13 %}zps_unvavlblqtycl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi14 %}<zpprdbtntxt_{{ zp_pblkmkr }}></zpprdbtntxt_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi15 %}<zpprdstkbtntxt_{{ zp_pblkmkr }}></zpprdstkbtntxt_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi16 %}zps_prdbtntp_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi17 %}<zpprdbtnintgr_{{ zp_pblkmkr }}></zpprdbtnintgr_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi18 %}<zpprdbtnmsg_{{ zp_pblkmkr }}></zpprdbtnmsg_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi19 %}zps_prdimgsrc_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi20 %}zps_prdimgdattr_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi21 %}<zpprdslprc_{{ zp_pblkmkr }}></zpprdslprc_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi22 %}<zpprdsvdprc_{{ zp_pblkmkr }}></zpprdsvdprc_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi23 %}<zpprddcsamnt_{{ zp_pblkmkr }}></zpprddcsamnt_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi24 %}<zpprdildcs_{{ zp_pblkmkr }}></zpprdildcs_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi25 %}<zpprdimgldr_{{ zp_pblkmkr }}></zpprdimgldr_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi26 %}<zppradtnfintgr_{{ zp_pblkmkr }}></zppradtnfintgr_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi27 %}<zpprdunprc_{{ zp_pblkmkr }}></zpprdunprc_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi28 %}<zpprdunplb_{{ zp_pblkmkr }}></zpprdunplb_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi29 %}zps_unvavlblprdunp_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi30 %}zps_csunvavlblgcl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi31 %}<zpprdfptrm_{{ zp_pblkmkr }}></zpprdfptrm_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi32 %}zps_unavlblfptrm_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi33 %}<zpprdrvavg_{{ zp_pblkmkr }}></zpprdrvavg_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi34 %}<zpprdrvcnt_{{ zp_pblkmkr }}></zpprdrvcnt_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi35 %}zps_unvavlblprdrv_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi36 %}<zpprspt_{{ zp_pblkmkr }}></zpprspt_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi37 %}zpprspa_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi38 %}<zpprspdes_{{ zp_pblkmkr }}></zpprspdes_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi39 %}<zppdcb_{{ zp_pblkmkr }}></zppdcb_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi40 %}<zpprdaccc_{{ zp_pblkmkr }}></zpprdaccc_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi41 %}zps_unvavlblbndilcl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi42 %}zps_csunvavlblbwcl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi43 %}zps_qtyicrtl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi44 %}zps_qtyinttl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi45 %}zps_qtydcrtl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi46 %}zps_qtyattr_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi47 %}<zplpsbcr_{{ zp_pblkmkr }}></zplpsbcr_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi48 %}<zpaptsbcr_{{ zp_pblkmkr }}></zpaptsbcr_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi49 %}<zpslsbcr_{{ zp_pblkmkr }}></zpslsbcr_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi50 %}<zprcsbcr_{{ zp_pblkmkr }}></zprcsbcr_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi51 %}zps_elid_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi52 %}zps_qtyattr_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi54 %}zps_ldc_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi55 %}<zpdprdct_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi56 %}</zpdprdct_{{ zp_pblkmkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_product_wrapper_selector | replace: zp_crrpi2, zp_formatted_product_price | replace: zp_crrpi3, zp_formatted_product_compare_at_price | replace_first: zp_crrpi4, zp_pvrntcntr | replace: zp_crrpi5, '' | replace: zp_crrpi6, zp_pqtycntr | replace: zp_crrpi7, zp_pfoptg | replace: zp_crrpi8, zp_pfcstg | replace: zp_crrpi9, zp_unpcls | replace: zp_crrpi10, zp_prunpcls | replace: zp_crrpi11, zp_unavailable_discount_class | replace: zp_crrpi12, zp_prdscdfwcl | replace: zp_crrpi13, zp_unqtycls | replace: zp_crrpi14, zp_product_button_text | replace: zp_crrpi15, zp_product_sticky_button_text | replace: zp_crrpi16, zp_product_button_type | replace: zp_crrpi17, zp_pbtnintgr | replace: zp_crrpi18, zp_pbtnmsg | replace: zp_crrpi19, zp_product_image | replace: zp_crrpi20, zp_pimda | replace: zp_crrpi21, zp_formatted_product_sale_price | replace: zp_crrpi22, zp_formatted_product_saved_amount | replace: zp_crrpi23, zp_formatted_product_discount_amount | replace: zp_crrpi24, zp_product_discount_amount_with_suffix | replace: zp_crrpi25, zp_pimgldcnt | replace: zp_crrpi26, zp_pftintctn | replace: zp_crrpi27, zp_pupblk | replace: zp_crrpi28, zp_puplbl | replace: zp_crrpi29, zp_pupwrcl | replace: zp_crrpi30, zp_uncswrcl | replace: zp_crrpi31, zp_pfpmtcp | replace: zp_crrpi32, zp_unpfptrmscl | replace: zp_crrpi33, zp_product_review_rating_text | replace: zp_crrpi34, zp_product_review_count | replace: zp_crrpi35, zp_product_review_wrapper_classes | replace: zp_crrpi36, zp_product_title | replace: zp_crrpi37, zp_pttpra | replace: zp_crrpi38, zp_product_description | replace: zp_crrpi39, zp_chbtn | replace: zp_crrpi40, zp_padclcnt | replace: zp_crrpi41, zp_unbndpiwrcl | replace: zp_crrpi42, zp_smpbndlprdctwprprcls | replace: zp_crrpi43, zp_pqtyicrtr | replace: zp_crrpi44, zp_pqtyinpttr | replace: zp_crrpi45, zp_pqtydcrtr | replace_first: zp_crrpi46, zp_pqtyaatr | replace: zp_crrpi47, zp_lpscrwgc | replace: zp_crrpi48, zp_aptscrwgc | replace: zp_crrpi49, zp_slscrwgc | replace: zp_crrpi50, zp_rcscrwgc | replace: zp_crrpi51, zp_product_element_id | replace: zp_crrpi52, '' | replace: zp_crrpi54, zp_pldwc | replace: zp_crrpi55, "" | replace: zp_crrpi56, zp_additional_product_footer_data %}{% if zp_psldven %}{% capture zp_crrpi %}zps_unvavlblprdwcl_{{ zp_pblkmkr }}{% endcapture %}{% capture zp_crrpi2 %}zps_unvavlbllnkcl_{{ zp_pblkmkr }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unpbwrcls | replace: zp_crrpi2, zp_unplnbcls %}{% endif %}{% else %}{% assign zp_prcpts = zp_prcpts | replace: 'zp_product_wrapper_selector', zp_product_wrapper_selector | replace: '<zpprdprc></zpprdprc>', zp_formatted_product_price | replace: '<zpprdcompareprc></zpprdcompareprc>', zp_formatted_product_compare_at_price | replace_first: '<zpprdvrnts></zpprdvrnts>', zp_pvrntcntr | replace: '<zpprdqtyctrl></zpprdqtyctrl>', zp_pqtycntr | replace: '<zpprdform>', zp_pfoptg | replace: '</zpprdform>', zp_pfcstg | replace: 'zps_unvavlblprdcl', zp_unpcls | replace: 'zps_unprprdcl', zp_prunpcls | replace: 'zps_unavlbldccl', zp_unavailable_discount_class | replace: 'zps_unvavlblqtycl', zp_unqtycls | replace: '<zpprdbtntxt></zpprdbtntxt>', zp_product_button_text | replace: '<zpprdstkbtntxt></zpprdstkbtntxt>', zp_product_sticky_button_text | replace: 'zps_prdbtntp', zp_product_button_type | replace: '<zpprdbtnintgr></zpprdbtnintgr>', zp_pbtnintgr | replace: '<zpprdbtnmsg></zpprdbtnmsg>', zp_pbtnmsg | replace: 'zps_prdimgsrc', zp_product_image | replace: 'zps_prdimgdattr', zp_pimda | replace: '<zpprdslprc></zpprdslprc>', zp_formatted_product_sale_price | replace: '<zpprdsvdprc></zpprdsvdprc>', zp_formatted_product_saved_amount | replace: '<zpprddcsamnt></zpprddcsamnt>', zp_formatted_product_discount_amount | replace: '<zpprdimgldr></zpprdimgldr>', zp_pimgldcnt | replace: '<zppradtnfintgr></zppradtnfintgr>', zp_pftintctn | replace: '<zpprdunprc></zpprdunprc>', zp_pupblk | replace: '<zpprdunplb></zpprdunplb>', zp_puplbl | replace: 'zps_unvavlblprdunp', zp_pupwrcl | replace: 'zps_csunvavlblgcl', zp_uncswrcl | replace: '<zpprdfptrm></zpprdfptrm>', zp_pfpmtcp | replace: 'zps_unavlblfptrm', zp_unpfptrmscl | replace: '<zpprdrvavg></zpprdrvavg>', zp_product_review_rating_text | replace: '<zpprdrvcnt></zpprdrvcnt>', zp_product_review_count | replace: 'zps_unvavlblprdrv', zp_product_review_wrapper_classes | replace: '<zpprdmrkp></zpprdmrkp>', '' %}{% assign zp_current_entity_content = zp_current_entity_content | append: zp_product_additional_integrations | append: zp_prcpts | append: zp_pinscr | append: zp_product_markup_integration | append: zp_product_footer_integration_content | append: zp_prct[1] %}{% if zp_psldven %}{% capture zp_crrpi %}zps_unvavlblprdwcl_{{ zp_product_element_id }}{% endcapture %}{% capture zp_crrpi2 %}zps_unvavlbllnkcl_{{ zp_product_element_id }}{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, zp_unpbwrcls | replace: zp_crrpi2, zp_unplnbcls %}{% endif %}{% endif %}{% if zp_rprfrmf %}{% capture zp_crrpi %}<zpctw_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi2 %}</zpctw_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi3 %}<zppcim_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi4 %}</zppcim_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi5 %}<zppcv_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi6 %}</zppcv_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi7 %}<zpctwt_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi8 %}</zpctwt_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi9 %}<zppcti_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi10 %}</zppcti_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi11 %}<zppctv_{{ zp_pblkmkr }}>{% endcapture %}{% capture zp_crrpi12 %}</zppctv_{{ zp_pblkmkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_crrpi, '' | replace: zp_crrpi2, '' | replace: zp_crrpi3, '' | replace: zp_crrpi4, '' | replace: zp_crrpi5, '' | replace: zp_crrpi6, '' | replace: zp_crrpi7, '' | replace: zp_crrpi8, '' | replace: zp_crrpi9, '' | replace: zp_crrpi10, '' | replace: zp_crrpi11, '' | replace: zp_crrpi12, '' %}{% endif %}{% if zp_pprid %}{% capture zp_pphrpr %}zps_pp{{ zp_pprid }}_{% endcapture %}{% capture zp_purrpr %}zps_pu{{ zp_pprid }}_{% endcapture %}{% capture zp_pttrpr %}zps_pt{{ zp_pprid }}_{% endcapture %}{% capture zp_cpphrpr %}zps_pp{{ zp_pblkmkr }}_{% endcapture %}{% capture zp_cpurrpr %}zps_pu{{ zp_pblkmkr }}_{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_pphrpr, zp_pphpr | replace: zp_purrpr, zp_purpr | replace: zp_pttrpr, zp_pttpr | replace: zp_cpphrpr, zp_pphpr | replace: zp_cpurrpr, zp_purpr %}{% endif %}{% if zp_pstprcnt.size > 0 %}{% assign zp_pstprcnt = zp_pstprcnt | replace: '\u0026', '&' | replace: '\u003c', '<' | replace: '\u003e', '>' | replace: '\u0022', '"' %}{% if zp_app_integrations contains 'bestcurrencyconverter' %}{% assign zp_sp = zp_pstprcnt | strip | strip_html | split: '' %}{% assign zp_ssp = '' %}{% assign zp_ach = "0123456789,. '" | split: '' %}{% assign zp_pdd = false %}{% for zp_tpt in zp_sp %}{% if zp_ach contains zp_tpt %}{% if zp_tpt == ',' or zp_tpt == '.' %}{% assign zp_pdd = true %}{% assign zp_spch = zp_tpt %}{% elsif zp_tpt == ' ' and zp_pdd %}{% assign zp_pdd = false %}{% assign zp_spch = '__zp1502150400__' %}{% else %}{% assign zp_spch = zp_tpt %}{% endif %}{% else %}{% assign zp_spch = '__zp1502150400__' %}{% endif %}{% assign zp_ssp = zp_ssp | append: zp_spch %}{% endfor %}{% assign zp_sp = '' %}{% assign zp_ssp = zp_ssp | split: '__zp1502150400__' %}{% for zp_tpt in zp_ssp %}{% assign zp_tmpp = '' | append: zp_tpt | strip %}{% if zp_tmpp.size > 0 %}{% assign zp_tmpp = zp_amount_format_template | replace: zp_amount_template, zp_tmpp %}{% assign zp_tpwh = zp_tmpp | strip_html | strip %}{% assign zp_pstprcnt = zp_pstprcnt | replace: zp_tpwh, zp_tmpp %}{% endif %}{% endfor %}{% assign zp_ssp = '' %}{% assign zp_ach = '' %}{% assign zp_tmpp = '' %}{% assign zp_tpwh = '' %}{% endif %}{% if zp_rprfrmf %}{% capture zp_upprp %}<zpprdstcprc_{{ zp_pblkmkr }}></zpprdstcprc_{{ zp_pblkmkr }}>{% endcapture %}{% assign zp_current_entity_content = zp_current_entity_content | replace: zp_upprp, zp_pstprcnt %}{% else %}{% assign zp_prcpts = zp_prcpts | replace: '<zpprdstcprc></zpprdstcprc>', zp_pstprcnt %}{% endif %}{% endif %}{% if zp_pstcpprcnt.size > 0 %}{% assign zp_pstcpprcnt = zp_pstcpprcnt | replace: '\u0026', '&' | replace: '\u003c', '<' | replace: '\u003e', '>' | replace: '\u0022', '"' %}{% if zp_app_integrations contains 'bestcurrencyconverter' %}{% assign zp_sp = zp_pstcpprcnt | strip | strip_html | split: '' %}{% assign zp_ssp = '' %}{% assign zp_ach = "0123456789,. '" | split: '' %}{% assign zp_pdd = false %}{% for zp_tpt in zp_sp %}{% if zp_ach contains zp_tpt %}{% if zp_tpt == ',' or zp_tpt == '.' %}{% assign zp_pdd = true %}{% assign zp_spch = zp_tpt %}{% elsif zp_tpt == ' ' and zp_pdd %}{% assign zp_pdd = false %}{% assign zp_spch = '__zp1502150400__' %}{% else %}{% assign zp_spch = zp_tpt %}{% endif %}{% else %}{% assign zp_spch = '__zp1502150400__' %}{% endif %}{% assign zp_ssp = zp_ssp | append: zp_spch %}{% endfor %}{% assign zp_sp = '' %}{% assign zp_ssp = zp_ssp | split: '__zp1502150400__' %}{% for zp_tpt in zp_ssp %}{% assign zp_tmpp = '' | append: zp_tpt | strip %}{% if zp_tmpp.size > 0 %}{% assign zp_tmpp = zp_amount_format_template | replace: zp_amount_template, zp_tmpp %}{% assign zp_tpwh = zp_tmpp | strip_html | strip %}{% assign zp_pstcpprcnt = zp_pstcpprcnt | replace: zp_tpwh, zp_tmpp %}{% endif %}{% endfor %}{% assign zp_ssp = '' %}{% assign zp_ach = '' %}{% assign zp_tmpp = '' %}{% assign zp_tpwh = '' %}{% endif %}{% if zp_rprfrmf %}{% capture zp_upprp %}<zpprdstccprprc_{{ zp_pblkmkr }}></zpprdstccprprc_{{ zp_pblkmkr }}>{% endcapture %}{% assign zp_prcpts = zp_prcpts | replace: zp_upprp, zp_pstcpprcnt %}{% else %}{% assign zp_prcpts = zp_prcpts | replace: '<zpprdstccprprc></zpprdstccprprc>', zp_pstcpprcnt %}{% endif %}{% endif %}{% if zp_uspgrt %}{% assign zp_pgrdprscnt = zp_pgrdprscnt | append: zp_current_entity_content %}{% assign zp_current_entity_content = zp_pgrtpl %}{% endif %}{% assign zp_selected_variants = '' %}{% assign zp_selected_variants_list = '' %}{% endfor %}{% if zp_uspgrt %}{% assign zp_current_entity_content = zp_tentcnt | replace: zp_pgrtpl, zp_pgrdprscnt | replace: zp_pgrtplotg, '' | replace: zp_pgrtplctg, '' %}{% assign zp_pgrdprscnt = nil %}{% assign zp_tentcnt = nil %}{% endif %}{%- endif -%}{%- endfor -%}{% assign zp_pshcren = false %}{% assign zp_pcrdt = nil %}{% assign zp_lpscrwgc = nil %}{% assign zp_aptscrwgc = nil %}{% assign zp_slscrwgc = nil %}{% if zp_app_integrations contains 'shoppaywidget' %}{% assign zp_spwvcl = '' %}{% else %}{% assign zp_spwvcl = 'hidden' %}{% endif %}{% if zp_cphshmb %}{% assign zp_cphshmbcl = 'hidden' %}{% else %}{% assign zp_cphshmbcl = '' %}{% endif %}{% assign zp_current_entity_content = zp_current_entity_content | replace: 'zps_dsbspintgcl', zp_spwvcl | replace: 'zps_cshmbcl', zp_cphshmbcl | replace: '<zpprdbtnldr></zpprdbtnldr>', '<svg class="zpa-btn-loader zpa-btn-custom__icon" width="14px" height="14px"><use href="#buyButtonLoader"></use></svg>' | replace: '<zpprdicrqtyicn></zpprdicrqtyicn>', '<svg class="zpa-quantity-selector__icon" width="10px" height="10px"><use href="#iconIncrease"></use></svg>' | replace: '<zpprddcrqtyicn></zpprddcrqtyicn>', '<svg class="zpa-quantity-selector__icon" width="10px" height="10px"><use href="#iconDecrease"></use></svg>' | replace: '<zpprdstrricn></zpprdstrricn>', '<svg class="zpa-review-stars__icon" width="24px" height="24px"><use href="#reviewStars"></use></svg>' | replace: '<zpprdimgldr></zpprdimgldr>', '<svg class="hidden" width="215px" height="150px" data-zp-image-loader><use href="#elementLoader"></use></svg>' | replace: '__zpamp__', '\\&' | append: zp_cecac %} 